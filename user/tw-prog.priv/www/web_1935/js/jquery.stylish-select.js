/* svn info: $Revision: 847 $ $Date: 2018-06-06 18:37:11 +0800 (Wed, 06 Jun 2018) $ */
!function(y){y("html").addClass("stylish-select"),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t=Object(this),s=t.length>>>0;if(0===s)return-1;var i=0;if(0<arguments.length&&((i=Number(arguments[1]))!=i?i=0:0!==i&&i!==1/0&&i!==-1/0&&(i=(0<i||-1)*Math.floor(Math.abs(i)))),s<=i)return-1;for(var n=0<=i?i:Math.max(s-Math.abs(i),0);n<s;n++)if(n in t&&t[n]===e)return n;return-1}),y.fn.extend({getSetSSValue:function(e){return e?(y(this).val(e).change(),this):y(this).find(":selected").val()},resetSS:function(){var e=y(this).data("ssOpts");$this=y(this),$this.next().remove(),$this.unbind(".sSelect").sSelect(e)}}),y.fn.sSelect=function(e){return this.each(function(){var n,a=y.extend({defaultText:"Please select",animationSpeed:0,ddMaxHeight:"",containerClass:""},e),r=y(this),c=y('<div class="selectedTxt"></div>'),i=y('<div class="newListSelected '+a.containerClass+(r.is(":disabled")?" newListDisabled":"")+'"></div>'),l=y('<div class="SSContainerDivWrapper" style="visibility:hidden;"></div>'),d=y('<ul class="newList"></ul>'),o=-1,h=-1,u=[],f=!1,p=!1;if(y(this).data("ssOpts",e),i.insertAfter(r),i.attr("tabindex",r.attr("tabindex")||"0"),c.prependTo(i),d.appendTo(i),d.wrap(l),l=d.parent(),r.hide(),!r.is(":disabled")){c.data("ssReRender",!c.is(":visible")),r.children().each(function(){if(y(this).is("option"))g(this,d);else{var e=y(this).attr("label"),t=y('<li class="newListOptionTitle '+(y(this).is(":disabled")?"newListOptionDisabled":"")+'">'+e+"</li>"),s=y("<ul></ul>");t.appendTo(d),s.appendTo(t),y(this).children().each(function(){g(this,s)})}}),(n=d.find("li a:not(.newListItemDisabled)").not(function(){return y(this).parents().hasClass("newListOptionDisabled")})).each(function(e){y(this).parent().data("selected")&&(a.defaultText=y(this).html(),o=h=e)});var v=d.height(),b=i.height(),S=n.length;-1!=o?w(o):c.text(a.defaultText),t(),y(window).bind("resize.sSelect scroll.sSelect",t),c.bind("click.sSelect",function(e){e.stopPropagation(),y(this).data("ssReRender")&&(v=d.height("").height(),l.height(""),b=i.height(),y(this).data("ssReRender",!1),t()),y(".SSContainerDivWrapper").not(y(this).next()).hide().parent().css("position","static").removeClass("newListSelFocus"),l.toggle(),i.css("position","relative"),-1==o&&(o=0);try{n.eq(o).focus()}catch(e){}}),n.bind("click.sSelect",function(e){var t=y(e.target);w(o=n.index(t),p=!0),x()}),n.bind("mouseenter.sSelect",function(e){y(e.target).addClass("newListHover")}).bind("mouseleave.sSelect",function(e){y(e.target).removeClass("newListHover")}),r.bind("change.sSelect",function(e){var t=y(e.target);if(1==p)return p=!1;var s=t.find(":selected");w(o=t.find("option").index(s))}),i.bind("click.sSelect",function(e){e.stopPropagation(),s(this)}),i.bind("focus.sSelect",function(){y(this).addClass("newListSelFocus"),s(this)}),i.bind("blur.sSelect",function(){y(this).removeClass("newListSelFocus")}),y(document).bind("click.sSelect",function(){i.removeClass("newListSelFocus"),l.is(":visible")?x(!1,!0):x(!1)}),r.focus(function(){r.next().focus()}),c.bind("mouseenter.sSelect",function(e){y(e.target).parent().addClass("newListSelHover")}).bind("mouseleave.sSelect",function(e){y(e.target).parent().removeClass("newListSelHover")}),l.css({left:"0",display:"none",visibility:"visible"})}function g(e,t){var s=y(e).text(),i=y(e).val(),n=y(e).is(":disabled");n||y(e).parents().is(":disabled")||u.push(s.charAt(0).toLowerCase()),t.append(y("<li><a"+(n?' class="newListItemDisabled"':"")+' href="JavaScript:void(0);">'+s+"</a></li>").data({key:i,selected:y(e).is(":selected")}))}function t(){var e=i.offset().top,t=y(window).height(),s=y(window).scrollTop();v>parseInt(a.ddMaxHeight)&&(v=parseInt(a.ddMaxHeight)),t<=(e-=s)+v?(d.css({height:v}),l.css({top:"-"+v+"px",height:v}),r.onTop=!0):(d.css({height:v}),l.css({top:b+"px",height:v}),r.onTop=!1)}function x(e,t){1==e&&(h=o,r.change()),1==t&&w(o=h),l.hide(),i.css({position:"static"})}function w(t,e){if(-1==t)c.text(a.defaultText),n.removeClass("hiLite");else{n.removeClass("hiLite").eq(t).addClass("hiLite");var s=n.eq(t).text(),i=n.eq(t).parent().data("key");try{r.val(i)}catch(e){r[0].selectedIndex=t}if(c.text(s),1==e&&(h=t,r.change()),l.is(":visible"))try{n.eq(t).focus()}catch(e){}}}function s(e){y(e).unbind("keydown.sSelect").bind("keydown.sSelect",function(e){var t,s,i=e.which;switch(p=!0,i){case 40:case 39:return o<S-1&&w(++o),!1;case 38:case 37:return 0<o&&w(--o),!1;case 33:case 36:return w(o=0),!1;case 34:case 35:return w(o=S-1),!1;case 13:case 27:return x(!0),!1;case 9:return x(!0),t=y("body").find("button,input,textarea,select"),-1<(s=t.index(r))&&s+1<t.length&&t.eq(s+1).focus(),!1}if(keyPressed=String.fromCharCode(i).toLowerCase(),void 0!==u.indexOf(keyPressed))return++o,-1!=(o=u.indexOf(keyPressed,o))&&null!=o&&f==keyPressed||(o=u.indexOf(keyPressed)),w(o),f=keyPressed,!1})}})}}(jQuery);