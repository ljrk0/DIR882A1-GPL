/* svn info: $Revision: 847 $ $Date: 2018-06-06 18:37:11 +0800 (Wed, 06 Jun 2018) $ */
var a,b,c,d,e,tmp_Iteration,tmp_UserName,tmp_UserPassword,tmp_AccessPath,tmp_UserPromission,tmp_add_UserName,tmp_add_UserPassword,tmp_add_AccessPath,tmp_add_UserPromission,tmp_ID,ROW_BASE=1,IsLoaded=!1,TABLE_NAME="tblUserList",TABLE_NAME2="tblUserList2",TABLE_NAME3="tblUserList3",USER_NUMBER="usernumber_",USER_NAME="username_",USER_PASSWORD="userpassword_",ACCESS_PATH="accesspath_",USER_PROMISSION="userpromission_",EDIT_ICON="editicon_",DELETE_ICON="delicon_";IsLoaded=!0;function GetHNAPInformatiom(t,o,r,s,n){a=t,b=o,c=r,d=s,e=n}function myRowObject(e,t,o,r,d,s){this.one=e,this.two=t,this.three=o,this.four=r,this.five=d,this.six=s}function addRowToTable(t){if(IsLoaded){var o=document.getElementById(TABLE_NAME),r=o.tBodies[0].rows.length,s=r+ROW_BASE;null==t?t=r:s=t+ROW_BASE;var n=o.tBodies[0].insertRow(t),i=n.insertCell(0),a=document.createElement("label");a.setAttribute("id",USER_NAME+s),a.setAttribute("size","10"),a.innerHTML=b,i.appendChild(a);var l=n.insertCell(1),m=document.createElement("label");m.setAttribute("id",ACCESS_PATH+s),m.setAttribute("size","50"),null!=d&&(d=d.replace("/","")),d==DefaultDirectory_RootP||d==DefaultDirectory_Path||"root"==d||"/root"==d?m.innerHTML=I18N("j","root"):m.innerHTML=d,l.appendChild(m);var u=n.insertCell(2),_=document.createElement("label");_.setAttribute("id",USER_PROMISSION+s),_.setAttribute("size","10"),_.innerHTML="true"==e?I18N("j","Read/Write"):I18N("j","Read Only"),u.appendChild(_);var E=n.insertCell(3),h=document.createElement("img");h.setAttribute("src","image/edit_btn.png?v=2fc10c4616"),h.setAttribute("width","28"),h.setAttribute("height","28"),h.setAttribute("id",EDIT_ICON+s),h.setAttribute("style","cursor:pointer"),h.onclick=function(){editData(s)},E.appendChild(h);var N=n.insertCell(4),I=document.createElement("img");I.setAttribute("src","image/trash.png?v=8fee37bb10"),I.setAttribute("width","41"),I.setAttribute("height","41"),I.setAttribute("id",DELETE_ICON+s),I.setAttribute("style","cursor:pointer"),I.onclick=function(){deleteCurrentRow(this)},N.appendChild(I);var w=n.insertCell(5),A=document.createElement("label");A.setAttribute("id",USER_PASSWORD+s),A.setAttribute("size","10"),A.innerHTML=c,A.setAttribute("style","display:none"),w.appendChild(A),n.myRow=new myRowObject(a,m,_,h,I,A),e=d=c=b=null}}function AddRowToIndex(){for(var t=document.getElementById(TABLE_NAME),o=document.getElementById("shareport_UserName").value,r=2;r<=Total_User+1;r++)if(o===t.rows[r].childNodes[0].childNodes[0].innerHTML)return alert("Username can not be the same"),"Error";return""==o?(alert("Username can not be null"),"Error"):(b=document.getElementById("shareport_UserName").value,c=document.getElementById("shareport_Password").value,d=document.getElementById("shareport_Folder").value,e="1"==document.getElementById("shareport_Permission").value?"false":"true",""==d?(alert("Error! Value cannot be null."),"Error"):(addRowToTable(null),Total_User+=1,check_TotalUser(Limit_TotalUser,Total_User),document.getElementById("shareport_UserName").value="",document.getElementById("shareport_Password").value="",document.getElementById("shareport_Permission").value="1",document.getElementById("shareport_Folder").value="","Success"))}function editDataGet(e){var t=document.getElementById(TABLE_NAME),o=t.rows[e].childNodes[0].childNodes[0].innerHTML,r=t.rows[e].childNodes[5].childNodes[0].innerHTML,d=t.rows[e].childNodes[1].childNodes[0].innerHTML,s=t.rows[e].childNodes[2].childNodes[0].innerHTML;document.getElementById("edit_UserName").value=o,document.getElementById("edit_Password").value=r,document.getElementById("edit_Folder").value=d,s==I18N("j","Read Only")?($("#edit_Permission").selectbox("detach"),$("#edit_Permission").val("1"),$("#edit_Permission").selectbox("attach"),tmp_UserPromission="1"):($("#edit_Permission").selectbox("detach"),$("#edit_Permission").val("2"),$("#edit_Permission").selectbox("attach"),tmp_UserPromission="2"),tmp_UserName=o,tmp_Password=r,tmp_AccessPath=d,setIteration(e),tmp_ID=e}function assignRowToIndex(e){var t=document.getElementById(TABLE_NAME),o=document.getElementById("edit_UserName").value;if(""!=o)for(var r=2;r<=Total_User+1;r++)if(o===t.rows[r].childNodes[0].childNodes[0].innerHTML){if(tmp_ID==r)continue;return"Error"}return t.rows[e].childNodes[0].childNodes[0].innerHTML=document.getElementById("edit_UserName").value,document.getElementById("edit_Folder").value==DefaultDirectory_Path?t.rows[e].childNodes[1].childNodes[0].innerHTML=I18N("j","root"):t.rows[e].childNodes[1].childNodes[0].innerHTML=document.getElementById("edit_Folder").value,t.rows[e].childNodes[2].childNodes[0].innerHTML="1"==tmp_UserPromission?I18N("j","Read Only"):I18N("j","Read/Write"),t.rows[e].childNodes[5].childNodes[0].innerHTML=document.getElementById("edit_Password").value,check_TotalUser(Limit_TotalUser,Total_User),tmp_ID}function deleteCurrentRow(e){if(IsLoaded){var t=e.parentNode.parentNode,o=t.parentNode.parentNode,r=t.sectionRowIndex;deleteRows(new Array(t)),reorderRows(o,r),Total_User-=1,check_TotalUser(Limit_TotalUser,Total_User),save_button_changed()}}function OnChangeUserName(e){tmp_UserName=e}function OnChangeFolder(e){tmp_AccessPath=e}function OnChangePermission(e){tmp_UserPromission=e}function deleteRows(e){if(IsLoaded)for(var t=0;t<e.length;t++){var o=e[t].sectionRowIndex;e[t].parentNode.deleteRow(o)}}function changeRowIndex(e){document.getElementById(TABLE_NAME).rows[e].childNodes[3].childNodes[0].onclick=function(){editData(e)}}function reorderRows(e,t){e=document.getElementById(TABLE_NAME);if(IsLoaded&&e.tBodies[0].rows[t])for(var o=t+ROW_BASE,r=t;r<e.tBodies[0].rows.length;r++)e.tBodies[0].rows[r].myRow.one.id=USER_NAME+o,e.tBodies[0].rows[r].myRow.two.id=ACCESS_PATH+o,e.tBodies[0].rows[r].myRow.three.id=USER_PROMISSION+o,e.tBodies[0].rows[r].myRow.four.id=EDIT_ICON+o,e.tBodies[0].rows[r].myRow.five.id=DELETE_ICON+o,e.tBodies[0].rows[r].myRow.six.id=USER_PASSWORD+o,changeRowIndex(o),o++}function check_TotalUser(e,t){var o=e-t;document.getElementById("RemainingRules").innerHTML=o,document.getElementById("createButton").disabled=0==o}