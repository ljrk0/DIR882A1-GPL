/* svn info: $Revision: 847 $ $Date: 2018-06-06 18:37:11 +0800 (Wed, 06 Jun 2018) $ */
function COMM_IPv6ADDR2INT(r){for(var d=new Array(8),t=0;t<d.length;t++)d[t]=0;var n=r.split("::"),a=n[0].split(":");for(t=0;t<a.length;t++)d[t]=parseInt(a[t],16);if(1<n.length){var f=n[1].split(":");for(t=0;t<f.length;t++)d[d.length-1-t]=parseInt(f[t],16)}return d}function COMM_IPv6NETWORK(r,d){var t=COMM_IPv6ADDR2INT(r),n=Math.floor(d/16),a=d%16;if(0<a){var f=Math.pow(2,16)-Math.pow(2,16-a);t[n]&=f,n++}for(var e=n;e<t.length;e++)t[e]=0;return t}function COMM_ValidV6Format(r,d){for(var t=r.split(":"),n=0;n<t.length;n++)t[n]=parseInt(t[n],16);return 0!=t[0]&&(!(65280<=t[0]&&t[0]<=65295)&&(!d||65152!=t[0]&&8194!=t[0]))}function COMM_V6Format(r){return 0!=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})))))(%.+)?\s*$/.test(r)}function COMM_ValidV6Prefix(r,d){for(var t=r.split(":"),n=0;n<t.length;n++)t[n]=parseInt(t[n],16);return 0!=t[0]&&(!(65280<=t[0]&&t[0]<=65295)&&(!d||65152!=t[0]&&8194!=t[0]))}function BoolToEnable(r){return r?"Enable":"Disable"}function getPrefix(r,d){for(var t=COMM_IPv6ADDR2INT(r),n=new Array(8),a=d,f=0,e=":",o=0;o<n.length;o++)n[o]=0;for(;16<a;)n[f]=t[f],a-=16,f++;0<a&&(n[f]=t[f]>>16-a<<16-a);var i=!0;for(o=n.length-1;0<=o;o--)0==n[o]&&i||(i=!1,e=n[o].toString(16)+":"+e);return e}function get6to4addr(r){var d=r.split("."),t=new Array(4);if(4!=d.length)return"";for(var n=0;n<d.length;n++)t[n]=parseInt(d[n],10);return"2002:"+t[0].toString(16)+t[1].toString(16)+":"+t[2].toString(16)+t[3].toString(16)+"::1"}