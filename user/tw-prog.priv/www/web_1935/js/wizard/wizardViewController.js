/* svn info: $Revision: 1105 $ $Date: 2018-09-11 16:45:24 +0800 (Tue, 11 Sep 2018) $ */
require.config({paths:{wizPath:"wizard"},baseUrl:"/js/"}),define(["wizPath/wizardModel","wizPath/wizardView","wizPath/wizStartViewCtrl","wizPath/wizWpsViewCtrl","wizPath/wizSiteSurveyViewCtrl","wizPath/wizEthViewCtrl","wizPath/wizWiFiViewCtrl","wizPath/wizPwdViewCtrl","wizPath/wizSummaryViewCtrl","wizPath/wizAutoUpgradeViewCtrl","wizPath/wizTimeZoneViewCtrl"],function(i,t,r,o,c,w,l,s,u,g,f){var h=new i.WizDeviceInfo,z=[];function e(i){i&&$("input").on("tap",function(){$(this).focus()})}function a(){n(),i.setWizardStatus(!0).fail(function(){}),function a(n){!function(){for(var i=1;i<=9;i++)$("#Wizard"+i).hide();$("#wizButton_back").html(I18N("j","Back")),$("#wizButton_next").html(I18N("j","Next")),t.unlockBtn($(".btn-step")),$("#RTToDUTRight").attr("src","image/wireless_off.gif"),$("#RTToDUTLeft").attr("src","image/wireless_off_180.gif"),$("#DUT").attr("src","image/Device_gary.png"),$("#DUTToClientRight").attr("src","image/wireless_off.gif"),$("#DUTToClientLeft").attr("src","image/wireless_off_180.gif")}();n.init(h).progress(function(i){"done"==i&&m()}).then(function(i){var t=function(i){var t=null;switch(i){case"start":t=r;break;case"wps":t=o;break;case"sitesurvey":t=c;break;case"eth":t=w;break;case"wifi":t=l;break;case"pwd":t=s;break;case"summary":t=u;break;case"autoUpgrade":t=g;break;case"timeZone":t=f}return t}(i);if("back"==i){var e=z.pop();a(e)}else"done"==i?location.href="http://"+h.DeviceName+".local./":null!=t&&(z.push(n),a(t))}).fail(function(){d()});t.initView();changeTimeoutAction()}(r),t.initView(),$("#WizardSection, #wizard_background").show(),clearhometimer(),e(!0)}function d(){i.setWizardStatus(!1).always(function(){m()})}function n(){var i=localStorage.getItem("language");$("#Language").selectbox("detach"),$("#Language").val(i),$("#Language").selectbox({width:150}),$("#Language").off("change").on("change",function(i){switch_Language(i.target.value)})}function m(){e(!1),localStorage.removeItem("RunningWizard"),z=[],$("#WizardSection, #wizard_background").hide(),changeTimeoutAction(),starthometimer()}return{init:a,initTermUI:function(){t.initView(),n(),$("#Wizard1, #topology, #wizButton_back, #wizButton_next, #closeWizBtn").hide(),$("#WizardSection, #wizard_background, #btn_agree, #language_table").show(),$("#wizard_title").html(I18N("j","Terms of Use and Privacy Policy")),$("#Dialog_termNprivacy").load("../../wizard_TermUI.html #page-content-expand",function(){var i=XMLEncode(localStorage.language.split("-")[1]),t=tos_LANG[i],e=privacy_LANG[i];for(var a in t)$("#"+a).html(t[a]);for(var a in e)$("#"+a).html(e[a])}).show(),$("#btn_agree").on("click",function(){$("#btn_agree, #Dialog_termNprivacy").hide(),$("#closeWizBtn, #topology").show(),a()})},closeWizard:d}});