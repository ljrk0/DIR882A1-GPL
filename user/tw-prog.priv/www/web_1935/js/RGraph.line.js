/* svn info: $Revision: 847 $ $Date: 2018-06-06 18:37:11 +0800 (Wed, 06 Jun 2018) $ */
"undefined"==typeof RGraph&&(RGraph={}),RGraph.Line=function(t){this.id=t,this.canvas=document.getElementById(t),this.context=this.canvas.getContext?this.canvas.getContext("2d"):null,(this.canvas.__object__=this).type="line",this.max=0,this.coords=[],this.coords2=[],this.coords.key=[],this.hasnegativevalues=!1,this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,RGraph.OldBrowserCompat(this.context),this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":1,"chart.background.grid.width":1,"chart.background.grid.hsize":25,"chart.background.grid.vsize":25,"chart.background.grid.color":"#4598aa","chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.align":!1,"chart.background.grid.autofit.numhlines":4,"chart.background.grid.autofit.numvlines":16,"chart.background.hbars":null,"chart.background.image":null,"chart.background.image.stretch":!0,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.size":8,"chart.xtickgap":20,"chart.smallxticks":3,"chart.largexticks":5,"chart.ytickgap":20,"chart.smallyticks":3,"chart.largeyticks":5,"chart.numyticks":0,"chart.linewidth":2.01,"chart.colors":["#007086","#0f0","#00f","#f0f","#ff0","#0ff"],"chart.hmargin":0,"chart.tickmarks.dot.color":"white","chart.tickmarks":null,"chart.tickmarks.linewidth":null,"chart.ticksize":3,"chart.gutter.left":25,"chart.gutter.right":25,"chart.gutter.top":25,"chart.gutter.bottom":25,"chart.tickdirection":-1,"chart.yaxispoints":5,"chart.fillstyle":null,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.xticks":null,"chart.text.size":10,"chart.text.angle":0,"chart.text.color":"#4598aa","chart.text.font":"Arial","chart.ymin":null,"chart.ymax":null,"chart.title":"","chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.font":null,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.shadow":!1,"chart.shadow.offsetx":2,"chart.shadow.offsety":2,"chart.shadow.blur":3,"chart.shadow.color":"rgba(0,0,0,0.5)","chart.tooltips":null,"chart.tooltips.hotspot.xonly":!1,"chart.tooltips.hotspot.size":5,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onmousemove","chart.tooltips.highlight":!0,"chart.tooltips.coords.page":!1,"chart.highlight.stroke":"gray","chart.highlight.fill":"white","chart.stepped":!1,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.halign":null,"chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!0,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.interactive":!1,"chart.contextmenu":null,"chart.ylabels":!0,"chart.ylabels.count":4,"chart.ylabels.inside":!1,"chart.ylabels.invert":!1,"chart.xlabels.inside":!1,"chart.xlabels.inside.color":"rgba(255,255,255,0.5)","chart.noaxes":!1,"chart.noyaxis":!1,"chart.noxaxis":!1,"chart.noendxtick":!1,"chart.noendytick":!1,"chart.units.post":"","chart.units.pre":"","chart.scale.decimals":null,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.annotatable":!1,"chart.annotate.color":"black","chart.axesontop":!1,"chart.filled":!1,"chart.filled.range":!1,"chart.filled.accumulative":!0,"chart.variant":null,"chart.axis.color":"#4598aa","chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.zoom.action":"zoom","chart.backdrop":!1,"chart.backdrop.size":30,"chart.backdrop.alpha":.2,"chart.resizable":!1,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.noredraw":!1,"chart.outofbounds":!1,"chart.chromefix":!0,"chart.animation.factor":1,"chart.animation.unfold.x":!1,"chart.animation.unfold.y":!0,"chart.animation.unfold.initial":2,"chart.animation.trace.clip":1,"chart.curvy":!1,"chart.line.visible":!0,"chart.events.click":null,"chart.events.mousemove":null};for(var e=1;e<arguments.length;++e)"null"!=typeof arguments[e]&&arguments[e]||(arguments[e]=[]);this.original_data=[];for(e=1;e<arguments.length;++e)if(arguments[1]&&"object"==typeof arguments[1]&&arguments[1][0]&&"object"==typeof arguments[1][0]&&arguments[1][0].length){var i=[];for(e=0;e<arguments[1].length;++e)i[e]=RGraph.array_clone(arguments[1][e]);for(var r=0;r<i.length;++r)this.original_data[r]=RGraph.array_clone(i[r])}else this.original_data[e-1]=RGraph.array_clone(arguments[e]);if(this.canvas){this.data_arr=RGraph.array_linearize(this.original_data);for(e=0;e<this.data_arr.length;++e)this["$"+e]={};this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0),RGraph.Register(this)}else alert("[LINE] Fatal error: no canvas support")},RGraph.Line.prototype.Set=function(t,e){if("chart."!=(t=t.toLowerCase()).substr(0,6)&&(t="chart."+t),"chart.tooltips"==t&&"object"==typeof e&&e){for(var i=[],r=1;r<arguments.length;r++)if("object"==typeof arguments[r]&&arguments[r][0])for(var s=0;s<arguments[r].length;s++)i.push(arguments[r][s]);else"function"==typeof arguments[r]?i=arguments[r]:i.push(arguments[r]);e=i}if("chart.ylabels.invert"==t&&e&&null==this.properties["chart.ymin"]&&this.Set("chart.ymin",0),"chart.linewidth"==t&&navigator.userAgent.match(/Chrome/))if(1==e)e=1.01;else if(RGraph.is_array(e))for(r=0;r<e.length;++r)"number"==typeof e[r]&&1==e[r]&&(e[r]=1.01);"chart.xaxispos"==t&&"bottom"!=e&&"center"!=e&&"top"!=e&&(alert("[LINE] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+e+" Changing it to center"),e="center"),"chart.numxticks"==t&&(t="chart.xticks"),"chart.spline"==t&&(t="chart.curvy"),this.properties[t]=e},RGraph.Line.prototype.Get=function(t){return"chart."!=t.substr(0,6)&&(t="chart."+t),this.properties[t]},RGraph.Line.prototype.Draw=function(){if("string"==typeof this.properties["chart.background.image"]&&RGraph.DrawBackgroundImage(this),RGraph.FireCustomEvent(this,"onbeforedraw"),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.gutterLeft=this.properties["chart.gutter.left"],this.gutterRight=this.properties["chart.gutter.right"],this.gutterTop=this.properties["chart.gutter.top"],this.gutterBottom=this.properties["chart.gutter.bottom"],this.properties["chart.shadow"]&&navigator.userAgent.match(/Chrome/)&&this.properties["chart.linewidth"]<=1&&this.properties["chart.chromefix"]&&0<this.properties["chart.shadow.blur"]&&alert("[RGRAPH WARNING] Chrome has a shadow bug, meaning you should increase the linewidth to at least 1.01"),this.data=RGraph.array_clone(this.original_data),this.max=0,this.properties["chart.filled"]&&!this.properties["chart.filled.range"]&&1<this.data.length&&this.properties["chart.filled.accumulative"])for(var t=[],e=0;e<this.data.length;++e)for(var i=0;i<this.data[e].length;++i)this.data[e][i]=Number(t[i]?t[i]:0)+this.data[e][i],t[i]=this.data[e][i];if(this.properties["chart.ymax"]){if(this.max=this.properties["chart.ymax"],this.min=this.properties["chart.ymin"]?this.properties["chart.ymin"]:0,this.scale=[(.2*(this.max-this.min)+this.min).toFixed(this.properties["chart.scale.decimals"]),(.4*(this.max-this.min)+this.min).toFixed(this.properties["chart.scale.decimals"]),(.6*(this.max-this.min)+this.min).toFixed(this.properties["chart.scale.decimals"]),(.8*(this.max-this.min)+this.min).toFixed(this.properties["chart.scale.decimals"]),this.max.toFixed(this.properties["chart.scale.decimals"])],!this.properties["chart.outofbounds"])for(dataset=0;dataset<this.data.length;++dataset)for(var r=0;r<this.data[dataset].length;r++)this.hasnegativevalues=this.data[dataset][r]<0||this.hasnegativevalues}else{for(this.min=this.properties["chart.ymin"]?this.properties["chart.ymin"]:0,dataset=0;dataset<this.data.length;++dataset)for(r=0;r<this.data[dataset].length;r++)this.max=Math.max(this.max,this.data[dataset][r]?Math.abs(parseFloat(this.data[dataset][r])):0),this.properties["chart.outofbounds"]||(this.hasnegativevalues=this.data[dataset][r]<0||this.hasnegativevalues);this.scale=RGraph.getScale(Math.abs(parseFloat(this.max)),this),this.max=this.scale[4]?this.scale[4]:0,this.properties["chart.ymin"]&&(this.scale[0]=.2*(this.max-this.properties["chart.ymin"])+this.properties["chart.ymin"],this.scale[1]=.4*(this.max-this.properties["chart.ymin"])+this.properties["chart.ymin"],this.scale[2]=.6*(this.max-this.properties["chart.ymin"])+this.properties["chart.ymin"],this.scale[3]=.8*(this.max-this.properties["chart.ymin"])+this.properties["chart.ymin"],this.scale[4]=1*(this.max-this.properties["chart.ymin"])+this.properties["chart.ymin"]),"number"==typeof this.properties["chart.scale.decimals"]&&(this.scale[0]=Number(this.scale[0]).toFixed(this.properties["chart.scale.decimals"]),this.scale[1]=Number(this.scale[1]).toFixed(this.properties["chart.scale.decimals"]),this.scale[2]=Number(this.scale[2]).toFixed(this.properties["chart.scale.decimals"]),this.scale[3]=Number(this.scale[3]).toFixed(this.properties["chart.scale.decimals"]),this.scale[4]=Number(this.scale[4]).toFixed(this.properties["chart.scale.decimals"]))}this.properties["chart.contextmenu"]&&RGraph.ShowContext(this),this.coords=[],this.grapharea=this.canvas.height-this.gutterTop-this.gutterBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=this.properties["chart.text.size"]/2,"bottom"==this.properties["chart.xaxispos"]&&this.hasnegativevalues&&-1==navigator.userAgent.indexOf("Opera")&&alert("[LINE] You have negative values and the X axis is at the bottom. This is not good..."),"3d"==this.properties["chart.variant"]&&RGraph.Draw3DAxes(this),RGraph.background.Draw(this),this.properties["chart.background.hbars"]&&0<this.properties["chart.background.hbars"].length&&RGraph.DrawBars(this),0==this.properties["chart.axesontop"]&&this.DrawAxes();for(var s=0,h=0;s<this.data.length;s++,h++){if(this.context.beginPath(),this.properties["chart.filled"]||this.SetShadow(s),this.properties["chart.fillstyle"]){if("object"==typeof this.properties["chart.fillstyle"]&&this.properties["chart.fillstyle"][h])var a=this.properties["chart.fillstyle"][h];else if("object"==typeof this.properties["chart.fillstyle"]&&0<this.properties["chart.fillstyle"].toString().indexOf("Gradient"))a=this.properties["chart.fillstyle"];else if("string"==typeof this.properties["chart.fillstyle"])a=this.properties["chart.fillstyle"]}else if(this.properties["chart.filled"])a=this.properties["chart.colors"][h];else a=null;if(this.properties["chart.tickmarks"]&&"object"==typeof this.properties["chart.tickmarks"])var o=this.properties["chart.tickmarks"][s];else if(this.properties["chart.tickmarks"]&&"string"==typeof this.properties["chart.tickmarks"])o=this.properties["chart.tickmarks"];else if(this.properties["chart.tickmarks"]&&"function"==typeof this.properties["chart.tickmarks"])o=this.properties["chart.tickmarks"];else o=null;this.DrawLine(this.data[s],this.properties["chart.colors"][h],a,this.GetLineWidth(h),o,s),this.context.stroke()}if(this.properties["chart.filled"]&&this.properties["chart.filled.accumulative"]&&!this.properties["chart.curvy"]){for(s=0;s<this.coords2.length;++s){this.context.beginPath(),this.context.lineWidth=this.GetLineWidth(s),this.context.strokeStyle=this.properties["chart.colors"][s];for(h=0;h<this.coords2[s].length;++h)0==h||null==this.coords2[s][h][1]||this.coords2[s][h-1]&&null==this.coords2[s][h-1][1]?this.context.moveTo(this.coords2[s][h][0],this.coords2[s][h][1]):(this.properties["chart.stepped"]&&this.context.lineTo(this.coords2[s][h][0],this.coords2[s][h-1][1]),this.context.lineTo(this.coords2[s][h][0],this.coords2[s][h][1]));this.context.stroke()}if(this.properties["chart.tickmarks"]){this.context.beginPath(),this.context.fillStyle="white";for(s=0;s<this.coords2.length;++s){this.context.beginPath(),this.context.strokeStyle=this.properties["chart.colors"][s];for(h=0;h<this.coords2[s].length;++h)if("object"==typeof this.coords2[s][h]&&"number"==typeof this.coords2[s][h][0]&&"number"==typeof this.coords2[s][h][1]){o="object"==typeof this.properties["chart.tickmarks"]?this.properties["chart.tickmarks"][s]:this.properties["chart.tickmarks"];this.DrawTick(this.coords2[s],this.coords2[s][h][0],this.coords2[s][h][1],this.context.strokeStyle,!1,0==h?0:this.coords2[s][h-1][0],0==h?0:this.coords2[s][h-1][1],o,h)}}this.context.stroke(),this.context.fill()}}if(this.context.beginPath(),this.properties["chart.axesontop"]&&this.DrawAxes(),this.DrawLabels(),this.DrawRange(),this.properties["chart.key"]&&this.properties["chart.key"].length&&RGraph.DrawKey&&RGraph.DrawKey(this,this.properties["chart.key"],this.properties["chart.colors"]),this.properties["chart.labels.above"]&&this.DrawAboveLabels(),RGraph.DrawInGraphLabels(this),this.properties["chart.filled"]&&this.properties["chart.filled.range"]&&2==this.data.length){this.context.beginPath();var c=this.coords.length/2;this.context.lineWidth=this.properties["chart.linewidth"],this.context.strokeStyle=this.properties["chart.colors"][0];for(s=0;s<c;++s)0==s?this.context.moveTo(this.coords[s][0],this.coords[s][1]):this.context.lineTo(this.coords[s][0],this.coords[s][1]);this.context.stroke(),this.context.beginPath(),this.properties["chart.colors"][1]&&(this.context.strokeStyle=this.properties["chart.colors"][1]);for(s=this.coords.length-1;c<=s;--s)s==this.coords.length-1?this.context.moveTo(this.coords[s][0],this.coords[s][1]):this.context.lineTo(this.coords[s][0],this.coords[s][1]);this.context.stroke()}else this.properties["chart.filled"]&&this.properties["chart.filled.range"]&&alert("[LINE] You must have only two sets of data for a filled range chart");this.properties["chart.resizable"]&&RGraph.AllowResizing(this),RGraph.InstallEventListeners(this),RGraph.FireCustomEvent(this,"ondraw")},RGraph.Line.prototype.DrawAxes=function(){if(!this.properties["chart.noaxes"]){if(RGraph.NoShadow(this),this.context.lineWidth=1.001,this.context.lineCap="butt",this.context.strokeStyle=this.properties["chart.axis.color"],this.context.beginPath(),0==this.properties["chart.noxaxis"]&&("center"==this.properties["chart.xaxispos"]?(this.context.moveTo(this.gutterLeft,Math.round(this.grapharea/2+this.gutterTop)),this.context.lineTo(this.canvas.width-this.gutterRight,Math.round(this.grapharea/2+this.gutterTop))):"top"==this.properties["chart.xaxispos"]?(this.context.moveTo(this.gutterLeft,this.gutterTop),this.context.lineTo(this.canvas.width-this.gutterRight,this.gutterTop)):(this.context.moveTo(this.gutterLeft,this.canvas.height-this.gutterBottom),this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom))),0==this.properties["chart.noyaxis"]&&("left"==this.properties["chart.yaxispos"]?(this.context.moveTo(this.gutterLeft,this.gutterTop),this.context.lineTo(this.gutterLeft,this.canvas.height-this.gutterBottom)):(this.context.moveTo(this.canvas.width-this.gutterRight,this.gutterTop),this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom))),0==this.properties["chart.noxaxis"]){if(0<this.data[0].length)var t=(this.canvas.width-this.gutterLeft-this.gutterRight)/(this.properties["chart.xticks"]?this.properties["chart.xticks"]:this.data[0].length-1);for((!t||t<=0)&&(t=(this.canvas.width-this.gutterLeft-this.gutterRight)/(this.properties["chart.labels"]&&this.properties["chart.labels"].length?this.properties["chart.labels"].length-1:10)),x=this.gutterLeft+("left"==this.properties["chart.yaxispos"]?t:0);x<=this.canvas.width-this.gutterRight+1&&!("right"==this.properties["chart.yaxispos"]&&x>=this.canvas.width-this.gutterRight-1);x+=t){if(this.properties["chart.noendxtick"]){if("left"==this.properties["chart.yaxispos"]&&x>=this.canvas.width-this.gutterRight-1)break;if("right"==this.properties["chart.yaxispos"]&&x==this.gutterLeft)continue}var e="center"==this.properties["chart.xaxispos"]?this.gutterTop+this.grapharea/2-3:this.canvas.height-this.gutterBottom,i="center"==this.properties["chart.xaxispos"]?e+6:this.canvas.height-this.gutterBottom-(x%60==0?this.properties["chart.largexticks"]*this.properties["chart.tickdirection"]:this.properties["chart.smallxticks"]*this.properties["chart.tickdirection"]);if("center"==this.properties["chart.xaxispos"])i=(e=Math.round(this.gutterTop+this.grapharea/2)-3)+6;else if("bottom"==this.properties["chart.xaxispos"]){e=this.canvas.height-this.gutterBottom,i=this.canvas.height-this.gutterBottom-(x%60==0?this.properties["chart.largexticks"]*this.properties["chart.tickdirection"]:this.properties["chart.smallxticks"]*this.properties["chart.tickdirection"]);i+=0}else"top"==this.properties["chart.xaxispos"]&&(e=this.gutterTop-3,i=this.gutterTop);this.context.moveTo(Math.round(x),e),this.context.lineTo(Math.round(x),i)}}else 0==this.properties["chart.noyaxis"]&&(this.properties["chart.noendytick"]||("left"==this.properties["chart.yaxispos"]?(this.context.moveTo(this.gutterLeft,Math.round(this.canvas.height-this.gutterBottom)),this.context.lineTo(this.gutterLeft-this.properties["chart.smallyticks"],Math.round(this.canvas.height-this.gutterBottom))):(this.context.moveTo(this.canvas.width-this.gutterRight,Math.round(this.canvas.height-this.gutterBottom)),this.context.lineTo(this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"],Math.round(this.canvas.height-this.gutterBottom)))));var r=this.properties["chart.numyticks"];if(0==this.properties["chart.noyaxis"]){var s=0,h=0;if("right"==this.properties["chart.yaxispos"]&&(h=this.canvas.width-this.gutterLeft-this.gutterRight),"center"==this.properties["chart.xaxispos"]){var a=this.grapharea/r,o="left"==this.properties["chart.yaxispos"]?this.gutterLeft:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"];for(y=this.gutterTop;y<this.grapharea/2+this.gutterTop;y+=a)y<this.grapharea/2+this.gutterTop&&(this.context.moveTo("left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight,Math.round(y)),this.context.lineTo(o,Math.round(y)));for(y=this.gutterTop+this.halfgrapharea+a;y<=this.grapharea+this.gutterTop;y+=a)this.context.moveTo("left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight,Math.round(y)),this.context.lineTo(o,Math.round(y))}else if("top"==this.properties["chart.xaxispos"]){a=this.grapharea/r,o="left"==this.properties["chart.yaxispos"]?this.gutterLeft:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"];for(y=this.gutterTop+a;y<=this.grapharea+this.gutterTop;y+=a)this.context.moveTo("left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight,Math.round(y)),this.context.lineTo(o,Math.round(y));this.properties["chart.noxaxis"]&&0==this.properties["chart.noendytick"]&&(this.context.moveTo("left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight,this.gutterTop),this.context.lineTo(o,this.gutterTop))}else{o="left"==this.properties["chart.yaxispos"]?this.gutterLeft-this.properties["chart.smallyticks"]:this.canvas.width-this.gutterRight+this.properties["chart.smallyticks"];for(y=this.gutterTop;y<this.canvas.height-this.gutterBottom&&s<r;y+=(this.canvas.height-this.gutterTop-this.gutterBottom)/r){this.context.moveTo(this.gutterLeft+h,Math.round(y)),this.context.lineTo(o,Math.round(y));s=s+1}}}else 0==this.properties["chart.noxaxis"]&&("left"==this.properties["chart.yaxispos"]?(this.context.moveTo(this.gutterLeft,"top"==this.properties["chart.xaxispos"]?this.gutterTop:this.canvas.height-this.gutterBottom),this.context.lineTo(this.gutterLeft,"top"==this.properties["chart.xaxispos"]?this.gutterTop-this.properties["chart.smallxticks"]:this.canvas.height-this.gutterBottom+this.properties["chart.smallxticks"])):(this.context.moveTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom),this.context.lineTo(this.canvas.width-this.gutterRight,this.canvas.height-this.gutterBottom+this.properties["chart.smallxticks"])));this.context.stroke()}},RGraph.Line.prototype.DrawLabels=function(){this.context.strokeStyle="black",this.context.fillStyle=this.properties["chart.text.color"],this.context.lineWidth=1,RGraph.NoShadow(this);var t=this.properties["chart.text.font"],e=this.properties["chart.text.size"],i=this.context;this.canvas;if(this.properties["chart.ylabels"]&&null==this.properties["chart.ylabels.specific"]){var r=this.properties["chart.units.pre"],s=this.properties["chart.units.post"],h="left"==this.properties["chart.yaxispos"]?this.gutterLeft-5:this.canvas.width-this.gutterRight+5,a="left"==this.properties["chart.yaxispos"]?"right":"left",o=this.properties["chart.ylabels.count"],c=!1,p=this.properties["chart.ylabels.inside"]?this.properties["chart.ylabels.inside.color"]:null;if(1==this.properties["chart.ylabels.inside"]&&"left"==a?(h-=10,a="right",c=!0):1==this.properties["chart.ylabels.inside"]&&"right"==a&&(h+=10,a="left",c=!0),"center"==this.properties["chart.xaxispos"]){var n=this.grapharea/2;if(1==o||3==o||5==o)RGraph.Text(i,t,e,h,this.gutterTop+0*n+this.halfTextHeight,RGraph.number_format(this,this.scale[4],r,s),null,a,c,null,p),5==o&&(RGraph.Text(i,t,e,h,this.gutterTop+.2*n+this.halfTextHeight,RGraph.number_format(this,this.scale[3],r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+.6*n+this.halfTextHeight,RGraph.number_format(this,this.scale[1],r,s),null,a,c,null,p)),3<=o&&(RGraph.Text(i,t,e,h,this.gutterTop+.4*n+this.halfTextHeight,RGraph.number_format(this,this.scale[2],r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+.8*n+this.halfTextHeight,RGraph.number_format(this,this.scale[0],r,s),null,a,c,null,p)),3<=o&&(RGraph.Text(i,t,e,h,this.gutterTop+1.2*n+this.halfTextHeight,"-"+RGraph.number_format(this,this.scale[0],r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+1.6*n+this.halfTextHeight,"-"+RGraph.number_format(this,this.scale[2],r,s),null,a,c,null,p)),5==o&&(RGraph.Text(i,t,e,h,this.gutterTop+1.4*n+this.halfTextHeight,"-"+RGraph.number_format(this,this.scale[1],r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+1.8*n+this.halfTextHeight,"-"+RGraph.number_format(this,this.scale[3],r,s),null,a,c,null,p)),RGraph.Text(i,t,e,h,this.gutterTop+2*n+this.halfTextHeight,"-"+RGraph.number_format(this,"1.0"==this.scale[4]?"1.0":this.scale[4],r,s),null,a,c,null,p);else if(10==o)for(var l=this.grapharea/o/2,g=0;g<o;++g)RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+g/20*this.grapharea,RGraph.number_format(this,(this.scale[4]/o*(o-g)).toFixed(this.properties["chart.scale.decimals"]),r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+g/20*this.grapharea+this.grapharea/2+this.grapharea/20,"-"+RGraph.number_format(this,(this.scale[4]-this.scale[4]/o*(o-g-1)).toFixed(this.properties["chart.scale.decimals"]),r,s),null,a,c,null,p);"number"==typeof this.properties["chart.ymin"]&&RGraph.Text(i,t,e,h,this.canvas.height/2,RGraph.number_format(this,this.properties["chart.ymin"].toFixed(this.properties["chart.scale.decimals"]),r,s),"center",a,c,null,p),1==this.properties["chart.noxaxis"]&&RGraph.Text(i,t,e,h,this.gutterTop+1*n+this.halfTextHeight,this.properties["chart.units.pre"]+"0"+this.properties["chart.units.post"],null,a,c,null,p)}else if("top"==this.properties["chart.xaxispos"]){var u=RGraph.array_reverse(this.scale);if(this.properties["chart.ylabels.invert"]&&(u=RGraph.array_reverse(u),this.context.translate(0,-.2*this.grapharea),null==typeof this.properties["chart.ymin"]&&this.Set("chart.ymin",0)),1==o||3==o||5==o)RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+.2*this.grapharea,"-"+RGraph.number_format(this,u[4],r,s),null,a,c,null,p),5==o&&(RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+.8*this.grapharea,"-"+RGraph.number_format(this,u[1],r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+.4*this.grapharea,"-"+RGraph.number_format(this,u[3],r,s),null,a,c,null,p)),3<=o&&(RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+.6*this.grapharea,"-"+RGraph.number_format(this,u[2],r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+1*this.grapharea,"-"+RGraph.number_format(this,u[0],r,s),null,a,c,null,p));else if(10==o)for(l=this.grapharea/o/2,g=0;g<o;++g)RGraph.Text(i,t,e,h,2*l+this.gutterTop+this.halfTextHeight+g/10*this.grapharea,"-"+RGraph.number_format(this,(u[0]-(u[0]-this.min)/o*(o-g-1)).toFixed(this.properties["chart.scale.decimals"]),r,s),null,a,c,null,p);this.properties["chart.ylabels.invert"]&&this.context.translate(0,0- -.2*this.grapharea),"number"==typeof this.properties["chart.ymin"]&&RGraph.Text(i,t,e,h,this.properties["chart.ylabels.invert"]?this.canvas.height-this.gutterBottom:this.gutterTop,"-"+RGraph.number_format(this,this.properties["chart.ymin"].toFixed(this.properties["chart.scale.decimals"]),r,s),"center",a,c,null,p)}else{if(this.properties["chart.ylabels.invert"]&&(this.scale=RGraph.array_reverse(this.scale),this.context.translate(0,.2*this.grapharea),null==typeof this.properties["chart.ymin"]&&this.Set("chart.ymin",0)),1==o||3==o||5==o)RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+0*this.grapharea,RGraph.number_format(this,this.scale[4],r,s),null,a,c,null,p),5==o&&(RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+.6*this.grapharea,RGraph.number_format(this,this.scale[1],r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+.2*this.grapharea,RGraph.number_format(this,this.scale[3],r,s),null,a,c,null,p)),3<=o&&(RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+.4*this.grapharea,RGraph.number_format(this,this.scale[2],r,s),null,a,c,null,p),RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+.8*this.grapharea,RGraph.number_format(this,this.scale[0],r,s),null,a,c,null,p));else if(10==o)for(l=this.grapharea/o/2,g=0;g<o;++g)RGraph.Text(i,t,e,h,this.gutterTop+this.halfTextHeight+g/10*this.grapharea,RGraph.number_format(this,((this.scale[4]-this.min)/o*(o-g)+this.min).toFixed(this.properties["chart.scale.decimals"]),r,s),null,a,c,null,p);this.properties["chart.ylabels.invert"]&&this.context.translate(0,0-.2*this.grapharea),"number"==typeof this.properties["chart.ymin"]&&RGraph.Text(i,t,e,h,this.properties["chart.ylabels.invert"]?this.gutterTop:this.canvas.height-this.gutterBottom,RGraph.number_format(this,this.properties["chart.ymin"].toFixed(this.properties["chart.scale.decimals"]),r,s),"center",a,c,null,p)}1==this.properties["chart.noxaxis"]&&null==this.properties["chart.ymin"]&&"center"!=this.properties["chart.xaxispos"]&&0==this.properties["chart.noendytick"]&&RGraph.Text(i,t,e,h,"top"==this.properties["chart.xaxispos"]?this.gutterTop+this.halfTextHeight:this.canvas.height-this.gutterBottom+this.halfTextHeight,this.properties["chart.units.pre"]+"0"+this.properties["chart.units.post"],null,a,c,null,p)}else if(this.properties["chart.ylabels"]&&"object"==typeof this.properties["chart.ylabels.specific"]){this.grapharea,this.properties["chart.ylabels.specific"].length;var x="left"==this.properties["chart.yaxispos"]?"right":"left",d=(c=!1,p=null,null!=this.properties["chart.ymin"]&&this.properties["chart.ymin"]);if("left"==this.properties["chart.yaxispos"]){var f=this.gutterLeft-5;this.properties["chart.ylabels.inside"]&&(f+=10,x="left",c=!0,p="rgba(255,255,255,0.5)")}else if("right"==this.properties["chart.yaxispos"]){f=this.canvas.width-this.gutterRight+5;this.properties["chart.ylabels.inside"]&&(f-=10,x="right",c=!0,p="rgba(255,255,255,0.5)")}if("center"==this.properties["chart.xaxispos"]){for(g=0;g<this.properties["chart.ylabels.specific"].length;++g){var m=this.gutterTop+this.grapharea/(2*this.properties["chart.ylabels.specific"].length)*g;if(d&&0<d){m=this.grapharea/2/(this.properties["chart.ylabels.specific"].length-(d?1:0))*g;m+=this.gutterTop}RGraph.Text(i,t,e,f,m,String(this.properties["chart.ylabels.specific"][g]),"center",x,c,0,p)}var y=RGraph.array_reverse(this.properties["chart.ylabels.specific"]);for(g=0;g<y.length;++g){m=this.grapharea/2+this.gutterTop+this.grapharea/(2*y.length)*(g+1);if(d&&0<d){m=this.grapharea/2/(y.length-(d?1:0))*g;m+=this.gutterTop,m+=this.grapharea/2}RGraph.Text(i,t,e,f,m,String(y[g]),"center",x,c,0,p)}}else if("top"==this.properties["chart.xaxispos"])for(y=RGraph.array_reverse(this.properties["chart.ylabels.specific"]),g=0;g<y.length;++g){m=this.grapharea/(y.length-(d?1:0))*(g+(d?0:1));m+=this.gutterTop,RGraph.Text(i,t,e,f,m,String(y[g]),"center",x,c,0,p)}else for(g=0;g<this.properties["chart.ylabels.specific"].length;++g){m=this.gutterTop+this.grapharea/(this.properties["chart.ylabels.specific"].length-(d?1:0))*g;RGraph.Text(i,t,e,f,m,String(this.properties["chart.ylabels.specific"][g]),"center",x,c,0,p)}}if(this.properties["chart.labels"]&&0<this.properties["chart.labels"].length){var b=5,v=!1,k=(p=null,0),T="top";x="center";this.properties["chart.xlabels.inside"]&&(b=-5,v=!0,p=this.properties["chart.xlabels.inside.color"],T="bottom"),"top"==this.properties["chart.xaxispos"]&&(T="bottom",b+=2),"number"==typeof this.properties["chart.text.angle"]&&0<this.properties["chart.text.angle"]&&(k=-1*this.properties["chart.text.angle"],T="center",x="right",b=10,"top"==this.properties["chart.xaxispos"]&&(b=10)),this.context.fillStyle=this.properties["chart.text.color"];var R=this.properties["chart.labels"].length;for(g=0;g<R;++g)if(this.properties["chart.labels"][g]){var G=(this.canvas.width-this.gutterLeft-this.gutterRight-2*this.properties["chart.hmargin"])/(R-1)*g;G+=this.gutterLeft+this.properties["chart.hmargin"],this.properties["chart.labels"].length!=this.data[0].length&&(G=this.gutterLeft+this.properties["chart.hmargin"]+(this.canvas.width-this.gutterLeft-this.gutterRight-2*this.properties["chart.hmargin"])*(g/(this.properties["chart.labels"].length-1))),G||(G=this.gutterLeft+this.properties["chart.hmargin"]),"top"==this.properties["chart.xaxispos"]&&0<this.properties["chart.text.angle"]&&(x="left"),RGraph.Text(i,t,e,G,"top"==this.properties["chart.xaxispos"]?this.gutterTop-b-(this.properties["chart.xlabels.inside"]?-22:0):this.canvas.height-this.gutterBottom+b,String(this.properties["chart.labels"][g]),T,x,v,k,p)}}this.context.stroke(),this.context.fill()},RGraph.Line.prototype.DrawLine=function(t,e,i,r,s,h){if(this.properties["chart.animation.unfold.y"]&&1!=this.properties["chart.animation.factor"])for(var a=0;a<t.length;++a)t[a]*=this.properties["chart.animation.factor"];var o=!1,c=null,p=0;this.context.lineWidth=1;var n=[];if(0<h)var l=this.coords2[h-1];var g=(this.canvas.width-2*this.properties["chart.hmargin"]-this.gutterLeft-this.gutterRight)/(t.length-1);for(a=0;a<t.length;a++){var u=t[a];c=this.canvas.height-(u-(0<u?this.properties["chart.ymin"]:-1*this.properties["chart.ymin"]))/(this.max-this.min)*this.grapharea,c=this.grapharea/(this.max-this.min)*(u-this.min),c=this.canvas.height-c,u==this.max&&(c=Math.round(c)),this.properties["chart.ylabels.invert"]&&(c-=this.gutterBottom,c-=this.gutterTop,c=this.canvas.height-c),"center"==this.properties["chart.xaxispos"]?(c=(c-this.gutterBottom-this.gutterTop)/2,c+=this.gutterTop):"top"==this.properties["chart.xaxispos"]?(c=this.grapharea/(this.max-this.min)*(Math.abs(u)-this.min),c+=this.gutterTop,this.properties["chart.ylabels.invert"]&&(c-=this.gutterTop,c=this.grapharea-c,c+=this.gutterTop)):"bottom"==this.properties["chart.xaxispos"]&&(c-=this.gutterBottom),(null==t[a]||"bottom"==this.properties["chart.xaxispos"]&&t[a]<this.min&&!this.properties["chart.outofbounds"]||"center"==this.properties["chart.xaxispos"]&&t[a]<-1*this.max&&!this.properties["chart.outofbounds"])&&(c=null),this.context.lineCap="round",this.context.lineJoin="round",0<a?p+=g:p=this.properties["chart.hmargin"]+this.gutterLeft,this.properties["chart.animation.unfold.x"]&&(p*=this.properties["chart.animation.factor"])<this.properties["chart.gutter.left"]&&(p=this.properties["chart.gutter.left"]),this.coords.push([p,c]),n.push([p,c])}this.context.stroke(),this.coords2[h]=n,RGraph.isOld()&&this.properties["chart.shadow"]&&this.DrawIEShadow(n,this.context.shadowColor),this.context.beginPath(),this.context.strokeStyle="rgba(0,0,0,0)",i&&(this.context.fillStyle=i);var x=this.properties["chart.stepped"],d=this.properties["chart.filled"];if("top"==this.properties["chart.xaxispos"])var f=this.gutterTop;else if("center"==this.properties["chart.xaxispos"])f=this.gutterTop+this.grapharea/2;else if("bottom"==this.properties["chart.xaxispos"])f=this.canvas.height-this.gutterBottom;for(a=0;a<n.length;++a){p=n[a][0],c=n[a][1];var m=n[a-1]?n[a-1][1]:null,y=a+1==n.length;(m<this.gutterTop||m>this.canvas.height-this.gutterBottom)&&(o=!0),0==a||o||!c||!m||m<this.gutterTop?(this.properties["chart.filled"]&&!this.properties["chart.filled.range"]?(this.context.moveTo(p+1,f),"top"==this.properties["chart.xaxispos"]&&this.context.moveTo(p+1,f),this.context.lineTo(p,c)):RGraph.isOld()&&null==c||this.context.moveTo(p+1,c),o=null==c):(x&&this.context.lineTo(p,n[a-1][1]),c>=this.gutterTop&&c<=this.canvas.height-this.gutterBottom||this.properties["chart.outofbounds"]?(y&&this.properties["chart.filled"]&&!this.properties["chart.filled.range"]&&"right"==this.properties["chart.yaxispos"]&&(p-=1),x&&y?x&&y&&this.context.lineTo(p,c):(this.context.lineTo(p,c),d&&n[a+1]&&null==n[a+1][1]&&this.context.lineTo(p,f)),o=!1):o=!0)}if(this.properties["chart.filled"]&&!this.properties["chart.filled.range"]&&!this.properties["chart.curvy"]){this.properties["chart.fillstyle"];if(0<h&&this.properties["chart.filled.accumulative"]){this.context.lineTo(p,l?l[a-1][1]:this.canvas.height-this.gutterBottom-1+("center"==this.properties["chart.xaxispos"]?(this.canvas.height-this.gutterTop-this.gutterBottom)/2:0));for(var b=a-1;0<=b;--b)this.context.lineTo(0==b?l[b][0]+1:l[b][0],l[b][1])}else if("top"==this.properties["chart.xaxispos"])this.context.lineTo(p,this.properties["chart.gutter.top"]+1),this.context.lineTo(n[0][0],this.properties["chart.gutter.top"]+1);else if("number"==typeof n[a-1][1]){var v="center"==this.properties["chart.xaxispos"]?(this.canvas.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop:this.canvas.height-this.gutterBottom;this.context.lineTo(p,v),this.context.lineTo(n[0][0],v)}this.context.fillStyle=i,this.context.fill(),this.context.beginPath()}if(navigator.userAgent.match(/Chrome/)&&this.properties["chart.shadow"]&&this.properties["chart.chromefix"]&&0<this.properties["chart.shadow.blur"])for(a=n.length-1;0<=a;--a)"number"!=typeof n[a][1]||"object"==typeof n[a+1]&&"number"!=typeof n[a+1][1]?this.context.moveTo(n[a][0],n[a][1]):this.context.lineTo(n[a][0],n[a][1]);this.context.stroke(),this.properties["chart.backdrop"]&&this.DrawBackdrop(n,e),this.context.save(),this.context.beginPath(),this.context.rect(this.properties["chart.gutter.left"],0,(this.canvas.width-this.gutterLeft-this.gutterRight)*this.Get("chart.animation.trace.clip")+this.gutterLeft,this.canvas.height),this.context.clip(),this.SetShadow(h),this.RedrawLine(n,e,r),this.context.stroke(),RGraph.NoShadow(this);for(a=0;a<n.length;++a)if(a=Number(a),this.context.strokeStyle=e,x&&a==n.length-1&&this.context.beginPath(),"endcircle"!=s&&"endsquare"!=s&&"filledendsquare"!=s&&"endtick"!=s&&"endtriangle"!=s&&"arrow"!=s&&"filledarrow"!=s||0==a&&"arrow"!=s&&"filledarrow"!=s||a==n.length-1){var k=a<=0?null:n[a-1][0];m=a<=0?null:n[a-1][1];this.DrawTick(t,n[a][0],n[a][1],e,!1,k,m,s,a)}this.context.restore(),this.context.beginPath(),this.context.arc(this.canvas.width+5e4,this.canvas.height+5e4,2,0,6.38,1)},RGraph.Line.prototype.DrawTick=function(t,e,i,r,s,h,a,o,c){if((!(null==i||i>this.canvas.height-this.gutterBottom||i<this.gutterTop)||this.properties["chart.outofbounds"])&&this.properties["chart.line.visible"]){this.context.beginPath();if(this.context.lineWidth=this.properties["chart.tickmarks.linewidth"]?this.properties["chart.tickmarks.linewidth"]:this.properties["chart.linewidth"],this.context.strokeStyle=s?this.properties["chart.shadow.color"]:this.context.strokeStyle,this.context.fillStyle=s?this.properties["chart.shadow.color"]:this.context.strokeStyle,"circle"==o||"filledcircle"==o||"endcircle"==o)"circle"!=o&&"filledcircle"!=o&&("endcircle"!=o||0!=c&&c!=t.length-1)||(this.context.beginPath(),this.context.arc(e+0,i+0,this.properties["chart.ticksize"],0,360/(180/PI),!1),this.context.fillStyle="filledcircle"==o?s?this.properties["chart.shadow.color"]:this.context.strokeStyle:s?this.properties["chart.shadow.color"]:"white",this.context.stroke(),this.context.fill());else if("halftick"==o)this.context.beginPath(),this.context.moveTo(Math.round(e),i),this.context.lineTo(Math.round(e),i+this.properties["chart.ticksize"]),this.context.stroke();else if("tick"==o)this.context.beginPath(),this.context.moveTo(Math.round(e),i-this.properties["chart.ticksize"]),this.context.lineTo(Math.round(e),i+this.properties["chart.ticksize"]),this.context.stroke();else if("endtick"!=o||0!=c&&c!=t.length-1)if("cross"==o){this.context.beginPath();var p=this.properties["chart.ticksize"];this.context.moveTo(e-p,i-p),this.context.lineTo(e+p,i+p),this.context.moveTo(e+p,i-p),this.context.lineTo(e-p,i+p),this.context.stroke()}else if("triangle"==o||"filledtriangle"==o||"endtriangle"==o&&(0==c||c==t.length-1))this.context.beginPath(),this.context.fillStyle="filledtriangle"==o?s?this.properties["chart.shadow.color"]:this.context.strokeStyle:"white",this.context.moveTo(Math.round(e-this.properties["chart.ticksize"]),i+this.properties["chart.ticksize"]),this.context.lineTo(Math.round(e),i-this.properties["chart.ticksize"]),this.context.lineTo(Math.round(e+this.properties["chart.ticksize"]),i+this.properties["chart.ticksize"]),this.context.closePath(),this.context.stroke(),this.context.fill();else if("borderedcircle"==o||"dot"==o)this.context.lineWidth=1,this.context.strokeStyle=this.properties["chart.tickmarks.dot.color"],this.context.fillStyle=this.properties["chart.tickmarks.dot.color"],this.context.beginPath(),this.context.arc(e,i,this.properties["chart.ticksize"],0,360/(180/PI),!1),this.context.closePath(),this.context.fill(),this.context.stroke(),this.context.beginPath(),this.context.fillStyle=r,this.context.strokeStyle=r,this.context.arc(e,i,this.properties["chart.ticksize"]-2,0,360/(180/PI),!1),this.context.closePath(),this.context.fill(),this.context.stroke();else if("square"==o||"filledsquare"==o||"endsquare"==o&&(0==c||c==t.length-1)||"filledendsquare"==o&&(0==c||c==t.length-1))this.context.fillStyle="white",this.context.strokeStyle=this.context.strokeStyle,this.context.beginPath(),this.context.rect(Math.round(e-this.properties["chart.ticksize"]),Math.round(i-this.properties["chart.ticksize"]),2*this.properties["chart.ticksize"],2*this.properties["chart.ticksize"]),"filledsquare"==o||"filledendsquare"==o?(this.context.fillStyle=s?this.properties["chart.shadow.color"]:this.context.strokeStyle,this.context.rect(Math.round(e-this.properties["chart.ticksize"]),Math.round(i-this.properties["chart.ticksize"]),2*this.properties["chart.ticksize"],2*this.properties["chart.ticksize"])):"square"!=o&&"endsquare"!=o||(this.context.fillStyle=s?this.properties["chart.shadow.color"]:"white",this.context.rect(Math.round(e-this.properties["chart.ticksize"]+1),Math.round(i-this.properties["chart.ticksize"]+1),2*this.properties["chart.ticksize"]-2,2*this.properties["chart.ticksize"]-2)),this.context.stroke(),this.context.fill();else if("filledarrow"==o){var n=Math.abs(e-h),l=Math.abs(i-a);if(i<a)var g=Math.atan(n/l)+1.57;else g=Math.atan(l/n)+3.14;this.context.beginPath(),this.context.moveTo(Math.round(e),Math.round(i)),this.context.arc(Math.round(e),Math.round(i),7,g-.5,g+.5,!1),this.context.closePath(),this.context.stroke(),this.context.fill()}else if("arrow"==o){n=Math.abs(e-h),l=Math.abs(i-a);var u=this.context.lineWidth;if(i<a)g=Math.atan(n/l)+1.57;else g=Math.atan(l/n)+3.14;this.context.beginPath(),this.context.moveTo(Math.round(e),Math.round(i)),this.context.arc(Math.round(e),Math.round(i),7,g-.5-(document.all?.1:.01),g-.4,!1),this.context.moveTo(Math.round(e),Math.round(i)),this.context.arc(Math.round(e),Math.round(i),7,g+.5+(document.all?.1:.01),g+.5,!0),this.context.stroke(),this.context.fill(),this.context.lineWidth=u}else"function"==typeof o&&o(this,t,t[c],c,e,i,r,h,a);else this.context.beginPath(),this.context.moveTo(Math.round(e),i-this.properties["chart.ticksize"]),this.context.lineTo(Math.round(e),i+this.properties["chart.ticksize"]),this.context.stroke()}},RGraph.Line.prototype.DrawRange=function(){if(this.properties["chart.filled.range"]&&this.properties["chart.filled"]){this.context.beginPath(),this.context.fillStyle=this.properties["chart.fillstyle"],this.context.lineWidth=1;for(var t=this.coords.length/2,e=0;e<t;++e)0==e?this.context.moveTo(this.coords[e][0],this.coords[e][1]):this.context.lineTo(this.coords[e][0],this.coords[e][1]);for(e=this.coords.length-1;t<=e;--e)this.context.lineTo(this.coords[e][0],this.coords[e][1]);this.context.fill()}},RGraph.Line.prototype.RedrawLine=function(t,e,i){if(!this.properties["chart.noredraw"])if(this.context.strokeStyle="object"==typeof e&&e&&-1==e.toString().indexOf("CanvasGradient")?e[0]:e,this.context.lineWidth=i,this.properties["chart.line.visible"]||(this.context.strokeStyle="rgba(0,0,0,0)"),this.properties["chart.curvy"]||this.properties["chart.spline"])this.DrawCurvyLine(t,this.properties["chart.line.visible"]?e:"transparent",i);else{this.context.beginPath();for(var r=t.length,s=this.canvas.width,h=this.canvas.height,a=!1,o=0;o<r;++o){t[o][0];var c=t[o][1];if(0<o)var p=t[o-1][0],n=t[o-1][1];!(0==o&&t[o]||c<this.gutterTop||n<this.gutterTop||c>h-this.gutterBottom||0<o&&p>s-this.gutterRight||0<o&&n>h-this.gutterBottom||null==n||1==a)||this.properties["chart.outofbounds"]&&null!=c&&null!=n?(this.properties["chart.stepped"]&&0<o&&this.context.lineTo(t[o][0],t[o-1][1]),this.context.lineTo(t[o][0],t[o][1])):RGraph.isOld()&&null==c||this.context.moveTo(t[o][0],t[o][1]),a=!1}if(this.properties["chart.colors.alternate"]&&"object"==typeof e&&e[0]&&e[1])for(o=1;o<r;++o){p=t[o-1][0];null!=(n=t[o-1][1])&&null!=t[o][1]&&(this.context.beginPath(),this.context.strokeStyle=e[t[o][1]<n?0:1],this.context.lineWidth=this.properties["chart.linewidth"],this.context.moveTo(p,n),this.context.lineTo(t[o][0],t[o][1]),this.context.stroke())}}},RGraph.Line.prototype.DrawIEShadow=function(t,e){var i=this.properties["chart.shadow.offsetx"],r=this.properties["chart.shadow.offsety"];this.context.lineWidth=this.properties["chart.linewidth"],this.context.strokeStyle=e,this.context.beginPath();for(var s=0;s<t.length;++s)0==s?this.context.moveTo(t[s][0]+i,t[s][1]+r):this.context.lineTo(t[s][0]+i,t[s][1]+r);this.context.stroke()},RGraph.Line.prototype.DrawBackdrop=function(t,e){var i=this.properties["chart.backdrop.size"];this.context.lineWidth=i,this.context.globalAlpha=this.properties["chart.backdrop.alpha"],this.context.strokeStyle=e,this.context.lineJoin="miter",this.context.beginPath(),this.context.moveTo(t[0][0],t[0][1]);for(var r=1;r<t.length;++r)this.context.lineTo(t[r][0],t[r][1]);this.context.stroke(),this.context.globalAlpha=1,this.context.lineJoin="round",RGraph.NoShadow(this)},RGraph.Line.prototype.GetLineWidth=function(t){var e=this.properties["chart.linewidth"];return"number"==typeof e?e:"object"==typeof e?e[t]?e[t]:e[0]:void 0},RGraph.Line.prototype.getShape=RGraph.Line.prototype.getPoint=function(t){t.target;var e=this,i=(e.context,RGraph.getMouseXY(t)),r=i[0],s=i[1];arguments[1]&&(e=arguments[1]);for(var h=0;h<e.coords.length;++h){var a=e.coords[h][0],o=e.coords[h][1];if(r<=a+e.properties["chart.tooltips.hotspot.size"]&&r>=a-e.properties["chart.tooltips.hotspot.size"]&&s<=o+e.properties["chart.tooltips.hotspot.size"]&&s>=o-e.properties["chart.tooltips.hotspot.size"]){if(RGraph.parseTooltipText)var c=RGraph.parseTooltipText(this.properties["chart.tooltips"],h);for(var p=0,n=h;n+1>this.data[p].length;)n-=this.data[p].length,p++;return{0:e,1:a,2:o,3:h,object:e,x:a,y:o,index:h,tooltip:c,dataset:p,index_adjusted:n}}if(1==e.properties["chart.tooltips.hotspot.xonly"]&&r<=a+e.properties["chart.tooltips.hotspot.size"]&&r>=a-e.properties["chart.tooltips.hotspot.size"])return{0:e,1:a,2:o,3:h,object:e,x:a,y:o,index:h,tooltip:c=RGraph.parseTooltipText(this.properties["chart.tooltips"],h)}}},RGraph.Line.prototype.DrawAboveLabels=function(){var t=this.context,e=this.properties["chart.labels.above.size"],i=this.properties["chart.text.font"],r=this.properties["chart.units.pre"],s=this.properties["chart.units.post"];t.beginPath();for(var h=0;h<this.coords.length;++h){var a=this.coords[h];RGraph.Text(t,i,e,a[0],a[1]-5-e,RGraph.number_format(this,this.data_arr[h],r,s),"center","center",!0,null,"rgba(255, 255, 255, 0.7)")}t.fill()},RGraph.Line.prototype.DrawCurvyLine=function(t,e,i){for(var r=[],s=0;s<t.length;++s)r.push(t[s][1]);this.properties["chart.filled"]&&(this.context.beginPath(),this.context.moveTo(t[0][0],this.canvas.height-this.gutterBottom),this.DrawSpline(this.context,r,e),this.context.lineTo(t[t.length-1][0],this.canvas.height-this.gutterBottom),this.context.fill()),this.context.beginPath(),this.DrawSpline(this.context,r,e),this.context.stroke()},RGraph.Line.prototype.getValue=function(t){if(2==t.length){t[0];var e=t[1]}else{var i=RGraph.getMouseXY(t);i[0],e=i[1]}var r=this,s=this.properties["chart.xaxispos"];if(e<r.properties["chart.gutter.top"])return"bottom"==s||"center"==s?this.max:this.min;if(e>r.canvas.height-r.properties["chart.gutter.bottom"])return"bottom"==s?this.min:this.max;if("center"==this.properties["chart.xaxispos"]){var h=(r.grapharea/2-(e-r.properties["chart.gutter.top"]))/r.grapharea*(r.max-r.min);return 0<(h*=2)?h+=this.min:h-=this.min,h}if("top"==this.properties["chart.xaxispos"]){h=(r.grapharea-(e-r.properties["chart.gutter.top"]))/r.grapharea*(r.max-r.min);return h=-1*Math.abs(r.max-h)}h=(r.grapharea-(e-r.properties["chart.gutter.top"]))/r.grapharea*(r.max-r.min);return h+=r.min},RGraph.Line.prototype.Highlight=function(t){this.properties["chart.tooltips.highlight"]&&RGraph.Highlight.Point(this,t)},RGraph.Line.prototype.getObjectByXY=function(t){var e=RGraph.getMouseXY(t);if(e[0]>this.properties["chart.gutter.left"]-5&&e[0]<this.canvas.width-this.properties["chart.gutter.right"]+5&&e[1]>this.properties["chart.gutter.top"]-5&&e[1]<this.canvas.height-this.properties["chart.gutter.bottom"]+5)return this},RGraph.Line.prototype.Adjusting_mousemove=function(t){if(RGraph.Registry.Get("chart.adjusting")&&RGraph.Registry.Get("chart.adjusting").uid==this.uid){var e=Number(this.getValue(t)),i=RGraph.Registry.Get("chart.adjusting.shape");i&&(RGraph.Registry.Set("chart.adjusting.shape",i),this.original_data[i.dataset][i.index_adjusted]=Number(e),RGraph.RedrawCanvas(t.target),RGraph.FireCustomEvent(this,"onadjust"))}},RGraph.Line.prototype.getYCoord=function(t){if("number"!=typeof t)return null;var e,i=this.properties["chart.xaxispos"];if(t>this.max&&(t=this.max),"top"==i)t<0&&(t=Math.abs(t)),e=(t-this.min)/(this.max-this.min)*this.grapharea,this.properties["chart.ylabels.invert"]&&(e=this.grapharea-e),e+=this.gutterTop;else if("center"==i)e=(t-this.min)/(this.max-this.min)*(this.grapharea/2),e=this.grapharea/2-e,e+=this.gutterTop;else{if(t<this.min||t>this.max)return null;e=(t-this.min)/(this.max-this.min)*this.grapharea,this.properties["chart.ylabels.invert"]&&(e=this.grapharea-e),e=this.canvas.height-this.gutterBottom-e}return e},RGraph.Line.prototype.positionTooltip=function(t,e,i,r,s){var h=t.coords[r.__index__][0],a=(t.coords[r.__index__][1],RGraph.getCanvasXY(t.canvas)),o=(t.properties["chart.gutter.left"],t.properties["chart.gutter.top"],r.offsetWidth);r.style.left=0,r.style.top=parseInt(r.style.top)-9+"px",r.style.overflow="";var c=new Image;c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC",c.style.position="absolute",c.id="__rgraph_tooltip_pointer__",c.style.top=r.offsetHeight-2+"px",r.appendChild(c),a[0]+h-o/2<10?(r.style.left=a[0]+h-.2*o+"px",c.style.left=.2*o-8.5+"px"):a[0]+h+o/2>document.body.offsetWidth?(r.style.left=a[0]+h-.8*o+"px",c.style.left=.8*o-8.5+"px"):(r.style.left=a[0]+h-.5*o+"px",c.style.left=.5*o-8.5+"px")},RGraph.Line.prototype.DrawSpline=function(t,e,i){var r=t,s=r.canvas,h=[],a=this.properties["chart.gutter.left"],o=this.properties["chart.gutter.right"],c=this.properties["chart.hmargin"],p=(s.width-(a+o)-2*c)/(e.length-1);this.context.strokeStyle=i;for(var n,l,g,u,x,d=[e[0]],f=0;f<e.length;++f)d.push(e[f]);d.push(e[e.length-1]+(e[e.length-1]-e[e.length-2]));for(var m=1;m<d.length-2;++m)for(var y=0;y<10;++y){var b=(n=y/10,l=d[m-1],g=d[m],u=d[m+1],x=d[m+2],.5*(2*g+(0-l+u)*n+(n*n*(2*l-5*g+4*u-x)+(0-l+3*g-3*u+x)*(n*n*n))));h.push((m-1)*p+y*(p/10)+a+c),r.lineTo(h[h.length-1],b)}r.lineTo((m-1)*p+a+c,d[m])},RGraph.Line.prototype.parseColors=function(){for(var t=0;t<this.properties["chart.colors"].length;++t)"object"==typeof this.properties["chart.colors"][t]&&this.properties["chart.colors"][t][0]&&this.properties["chart.colors"][t][1]?(this.properties["chart.colors"][t][0]=this.parseSingleColorForGradient(this.properties["chart.colors"][t][0]),this.properties["chart.colors"][t][1]=this.parseSingleColorForGradient(this.properties["chart.colors"][t][1])):this.properties["chart.colors"][t]=this.parseSingleColorForGradient(this.properties["chart.colors"][t]);if(this.properties["chart.fillstyle"])if("string"==typeof this.properties["chart.fillstyle"])this.properties["chart.fillstyle"]=this.parseSingleColorForGradient(this.properties["chart.fillstyle"],"vertical");else for(t=0;t<this.properties["chart.fillstyle"].length;++t)this.properties["chart.fillstyle"][t]=this.parseSingleColorForGradient(this.properties["chart.fillstyle"][t],"vertical");if(!RGraph.is_null(this.properties["chart.key.colors"]))for(t=0;t<this.properties["chart.key.colors"].length;++t)this.properties["chart.key.colors"][t]=this.parseSingleColorForGradient(this.properties["chart.key.colors"][t]);var e=["chart.background.barcolor1","chart.background.barcolor2","chart.background.grid.color","chart.text.color","chart.crosshairs.color","chart.annotate.color","chart.title.color","chart.title.yaxis.color","chart.key.background","chart.axis.color","chart.highlight.fill"];for(t=0;t<e.length;++t)this.properties[e[t]]=this.parseSingleColorForGradient(this.properties[e[t]])},RGraph.Line.prototype.parseSingleColorForGradient=function(t){var e=this.canvas,i=this.context;if(!t||"string"!=typeof t)return t;var r="string"==typeof arguments[1]?arguments[1]:"horizontal";if(t.match(/^gradient\((.*)\)$/i)){var s=RegExp.$1.split(":");if("horizontal"==r)var h=i.createLinearGradient(0,0,e.width,0);else h=i.createLinearGradient(0,0,0,e.height);var a=1/(s.length-1);h.addColorStop(0,RGraph.trim(s[0]));for(var o=1;o<s.length;++o)h.addColorStop(o*a,RGraph.trim(s[o]))}return h||t},RGraph.Line.prototype.SetShadow=function(t){if(this.properties["chart.shadow"]){var e=this.properties["chart.shadow.color"];"object"==typeof e&&e[t-1]?this.context.shadowColor=e[t]:"object"==typeof e?this.context.shadowColor=e[0]:"string"==typeof e&&(this.context.shadowColor=e),this.context.shadowBlur=this.properties["chart.shadow.blur"],this.context.shadowOffsetX=this.properties["chart.shadow.offsetx"],this.context.shadowOffsetY=this.properties["chart.shadow.offsety"]}};