<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3c.org/1999/xhtml"><head><title>D-LINK</title><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="expires" content="0"><meta http-equiv="X-UA-Compatible" content="IE=9"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Type" content="text/css"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/image/dlink-favicon.ico?v=1075792207"><link rel="shortcut icon" href="/image/favicon.ico?v=1075792207" type="image/x-icon"><link href="/js/bootstrap/css/bootstrap.min.css?v=5ddc58f35c" rel="stylesheet"><link href="/js/bootstrap/css/buttonv2.css?v=a64da69038" rel="stylesheet"><link rel="stylesheet" type="text/css" href="css/style_mobile.css?v=2db6930847" media="all"><script type="text/javascript" charset="utf-8" src="/js/initialJQ.js?v=49c1a6a518"></script><script type="text/javascript" charset="utf-8" src="/js/bootstrap/js/bootstrap.min.js?v=0885f05843"></script><script type="text/javascript" charset="utf-8" src="/js/initialJS.js?v=49978ee093"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPWanSettings.js?v=ab0e347b7a"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPFirmware.js?v=4ed81ba255"></script><script type="text/javascript">top!=self&&(top.location=self.location),null===sessionStorage.getItem("PrivateKey")&&window.location.replace("../info/MobileLogin.html");var Time_GetPollingFWDownload,Time_DownloadFail,Time_GetBackgroundPollingFWDownload,HNAP=new HNAP_XML,detectPopWindowAvailable=0;function adjustLayout(){var e=$(window).height(),o=$("body").height();e<o+50?($("#copyright").css("top",o+50),$(".black_overlay").css("height",o+50+20)):($("#copyright").css("top",e-20),$(".black_overlay").css("height",e))}function GetFwInfo(){var e=HNAP.GetXML("GetFirmwareSettings"),o=e.Get("GetFirmwareSettingsResponse/FirmwareVersion");document.getElementById("mobile_current_fwver").innerHTML=o;var n=e.Get("GetFirmwareSettingsResponse/FirmwareDate");n=n.replace("T"," "),document.getElementById("mobile_current_fwdate").innerHTML=n,document.getElementById("mobile_ckfw_btn").style.display="inline"}function getInternetStatus(e){var t=$.Deferred(),o=new SOAPGetCurrentInternetStatus,n=new SOAPAction;return o.InternetStatus=e,n.sendSOAPAction("GetCurrentInternetStatus",o,null).done(function(e){var o=e.GetCurrentInternetStatusResult;if("OK_CONNECTED"==o)t.resolve(o);else if(0<=o.indexOf("OK_DETECTING_")){var n=1e3*parseInt(o.substr(13));sleep(n).done(function(){getInternetStatus(!1).done(function(e){t.resolve(e)}).fail(function(){t.reject()})})}else t.reject(o)}).fail(function(){t.reject()}),t.promise()}function GetInternetConnectionStatus(){var e=$("#mobile_ckfw_btn");changeTimeoutAction(),e.addClass("active").prop("disabled",!0),document.getElementById("mobile_new_fwver").innerHTML="--",document.getElementById("mobile_new_fwdate").innerHTML="--",getInternetStatus(!0).done(function(e){checkNewFirmware()}).fail(function(){e.removeClass("active").prop("disabled",!1),e.html(I18N("j","Retry"))})}function checkNewFirmware(){var e=new SOAPGetFirmwareStatusResponse;(new SOAPAction).sendSOAPAction("GetFirmwareStatus",null,e).done(function(e){var o=e.CurrentFWVersion,n=e.LatestFWVersion;parseFloat(o)<parseFloat(n)?($("#mobile_newfw_info").show(),document.getElementById("mobile_new_fwver").innerHTML=n,document.getElementById("mobile_new_fwdate").innerHTML=e.LatestFWVersionDate,$("#mobile_ckfw_btn").html(I18N("j","Download New Firmware")).off("click").click(function(){downloadNewFirmware()})):$("#mobile_no_new_fw").show(),adjustLayout(),$("#mobile_ckfw_btn").removeClass("active").prop("disabled",!1)}).fail(function(){$("#mobile_ckfw_btn").removeClass("active").prop("disabled",!1)})}function downloadNewFirmware(){$("#mobile_ckfw_btn").addClass("active").prop("disabled",!0).html(I18N("j","Downloading")),document.getElementById("mobile_popalert").style.display="block",$("#mobile_download_status").html(I18N("j","Downloading")+"...0 %"),$("#mobile_download_icon").show(),detectPopWindowAvailable=1,(new SOAPAction).sendSOAPAction("StartFirmwareDownload",null,null).done(function(e){"OK"==e.StartFirmwareDownloadResult||"RESTART"==e.StartFirmwareDownloadResult?(Time_GetPollingFWDownload=self.setInterval("GetPollingFirmwareDownloadStatus()",3e3),Time_DownloadFail=self.setTimeout("downloadFail()",18e4)):downloadFail()}).fail(function(){downloadFail()})}function GetPollingFirmwareDownloadStatus(){var e=new SOAPPollingFirmwareDownloadResponse;(new SOAPAction).sendSOAPAction("PollingFirmwareDownload",null,e).done(function(e){if($("#mobile_download_status").html(I18N("j","Downloading")+"..."+e.DownloadPercentage+" %"),100<=e.DownloadPercentage){self.clearInterval(Time_GetPollingFWDownload),self.clearTimeout(Time_DownloadFail),$("#mobile_download_status").html(I18N("j","Upgrading")+"...0 %");var o=new SOAPGetFirmwareValidationResponse;(new SOAPAction).sendSOAPAction("GetFirmwareValidation",null,o).done(function(e){if("true"==e.IsValid){var o=1e3*parseInt(e.CountDown,10);self.setTimeout("fwUpgradeSuccess()",o);var n=(o-1)/100;self.setTimeout("updateProgress(0,"+n+")",n)}else downloadFail()}).fail(function(){downloadFail()})}})}function updateProgress(e,o){if(e<100){var n=e+1;$("#mobile_download_status").html(I18N("j","Upgrading")+"..."+n+" %"),self.setTimeout("updateProgress("+n+","+o+")",o)}}function downloadFail(){self.clearInterval(Time_GetPollingFWDownload),$("#mobile_download_status").html(I18N("j","Firmware Upgrade failed!")),$("#mobile_download_icon").hide(),$("#mobile_download_icon_fail").show(),$("#mobile_download_note").hide(),$("#mobile_download_btn").show(),$("#mobile_download_btn").off("click").click(function(){window.location.reload()})}function fwUpgradeSuccess(){$("#mobile_download_status").html(I18N("j","Firmware Upgrade success!")),$("#mobile_download_icon").hide(),$("#mobile_download_icon_success").show(),$("#mobile_download_note").hide(),$("#mobile_download_btn").show(),$("#mobile_download_btn").off("click").click(function(){location.href="/"})}function returnToHome(){location.href="/MobileHome.html"}$(window).on("orientationchange",function(){adjustLayout()}),$(document).ready(function(){$("#mobile_ckfw_btn").click(function(){GetInternetConnectionStatus()}),adjustLayout(),GetFwInfo()})</script></head><body><div style="position:absolute;top:13px"><button class="btn_home" onclick="returnToHome()"><script>I18N("h","Home")</script></button></div><div id="logo_padding" style="height:17px"></div><div class="form-group" style="text-align:center"><img src="/image/logo_2.png?v=6e86a2bf53" width="102px" height="20px"></div><hr><div class="container" style="text-align:center"><div style="text-align:left;height:50px"><img src="image/mobile_update_fw_on.png?v=92ccc8a971" width="60" height="45"> <b><span class="textnormal"><script>I18N("h","Firmware")</script></span></b></div><div class="list-group" style="text-align:left"><div class="list-group-item"><h5 class="list-group-item-heading titleBlock"><script>I18N("h","Current Firmware Version")</script>:</h5><span id="mobile_current_fwver" class="list-group-item-text"></span></div><div class="list-group-item"><h5 class="list-group-item-heading titleBlock"><script>I18N("h","Current Firmware Date")</script>:</h5><span id="mobile_current_fwdate" class="list-group-item-text"></span></div><div id="mobile_newfw_info" style="display:none"><div class="list-group-item"><h5 class="list-group-item-heading titleBlock"><script>I18N("h","New Firmware Version")</script>:</h5><span id="mobile_new_fwver" class="list-group-item-text"></span></div><div class="list-group-item"><h5 class="list-group-item-heading titleBlock"><script>I18N("h","New Firmware Date")</script>:</h5><span id="mobile_new_fwdate" class="list-group-item-text"></span></div></div><div id="mobile_no_new_fw" style="display:none"><div class="list-group-item"><h4 class="list-group-item-heading"><script>I18N("h","This firmware is the latest version.")</script></h4></div></div></div><div style="text-align:center"><button id="mobile_ckfw_btn" type="button" class="btn btn-lg btn-default" style="width:90%"><script>I18N("h","Check for New Firmware")</script></button></div></div><div id="mobile_popalert" class="black_overlay" style="display:none"><div class="popup_window_border"><div class="popup_window"><div id="mobile_download_status" class="popup_window-headline"></div><div style="position:relative;top:15%;margin:auto"><img id="mobile_download_icon" src="image/loading.gif?v=082200f467" width="62px" height="62px"> <img id="mobile_download_icon_success" src="image/connected.png?v=c3d3a4b979" width="62px" height="62px" style="display:none"> <img id="mobile_download_icon_fail" src="image/warning.png?v=f137f563d2" width="62px" height="62px" style="display:none"></div><div class="textsmall" style="position:absolute;bottom:20px;width:100%"><span id="mobile_download_note"><script>I18N("h","Please do not close the browser while the firmware is being downloaded!")</script></span><button id="mobile_download_btn" class="btn btn-default" style="position:relative;width:80%;display:none"><script>I18N("h","OK")</script></button></div></div></div></div><div id="copyright" class="copyright"><script>I18N("h","COPYRIGHT")</script></div></body></html><!-- svn info: $Revision: 850 $ $Date: 2018-06-07 17:08:57 +0800 (Thu, 07 Jun 2018) $ --> 
