<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3c.org/1999/xhtml"><head><title>D-LINK</title><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="expires" content="0"><link rel="icon" href="/image/dlink-favicon.ico?v=1075792207"><link rel="shortcut icon" href="/image/favicon.ico?v=1075792207" type="image/x-icon"><meta http-equiv="X-UA-Compatible" content="IE=9"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Type" content="text/css"><meta name="viewport" content="width=device-width,initial-scale=1maximum-scale=1,user-scalable=no"><link rel="stylesheet" type="text/css" href="/css/jquery.selectbox.css?v=a4d9b221f8"><script type="text/javascript" charset="utf-8" src="/js/initialJQ.js?v=72051ca6ec"></script><script type="text/javascript" charset="utf-8" src="/js/jquery-ui.custom.min.js?v=80cac799aa"></script><script type="text/javascript" charset="utf-8" src="/js/jquery.ui.selectable.js?v=ffd152d42a"></script><script type="text/javascript" charset="utf-8" src="/js/jquery.ui.touch-punch.min.js?v=b5cebdad31"></script><script type="text/javascript" charset="utf-8" src="/js/initialJS.js?v=49978ee093"></script><script type="text/javascript" charset="utf-8" src="/js/initialValidate.js?v=18ad6b1a1d"></script><script type="text/javascript" charset="utf-8" src="/js/initialCSS.js?v=668496d31b"></script><script type="text/javascript" charset="utf-8" src="/js/Schedule.js?v=3c6f4b7472"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPSchedule.js?v=ba1741dafe"></script><link rel="stylesheet" type="text/css" href="css/style_pop.css?v=ebdc1ea095" media="all"><script type="text/javascript" charset="utf-8" src="/js/popView.js?v=28d8d08a05"></script><style>.list{background-color:#fff}.week .ui-selecting{background:#feca40;color:#feca40}.week .ui-unselecting{background:#feffaf;color:#505050}.week .ui-selected{background:#fffa72;color:#fffa72}.week{list-style-type:none;margin:0;padding:0;width:820px;cursor:default}.week li{margin:4px 1px 3px 0;padding:1px;float:left;width:30px;height:25px;font-size:1em;text-align:center;color:#fff}</style><script>top!=self&&(top.location=self.location),null===sessionStorage.getItem("PrivateKey")&&window.location.replace("../info/Login.html");var HNAP=new HNAP_XML,_ReciprocalRebootNumber=100,Limit_Rules=10,datalist=new Datalist,currentRule=null;function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu(),initialDetectRouterConnection()}function waitSettingFinished(){window.location.reload()}function CheckConnectionStatus(){$.ajax({cache:!1,url:"./js/CheckConnection",timeout:5e3,type:"GET",success:function(e){SetXML()},error:function(){document.getElementById("DetectRouterConnection").style.display="inline"}})}function GetXML(){(new HNAP_XML).GetXMLAsync("GetScheduleSettings",null,"GetValue",function(e){GetResult_1st(e)})}function GetResult_1st(e){document.getElementById("calendar");if("OK"==e.Get("GetScheduleSettingsResponse/GetScheduleSettingsResult")){var t=e.Get("GetScheduleSettingsResponse/ScheduleInfoLists#");if(0!=t)for(var l=1;l<=t;l++){var n=new RuleObj;n.name=decode_char_text(e.Get("GetScheduleSettingsResponse/ScheduleInfoLists:"+l+"/ScheduleName"));for(var a=e.Get("GetScheduleSettingsResponse/ScheduleInfoLists:"+l+"/ScheduleInfo#"),c=0;c<a;c++){var i=new TimeSet;i.date=parseInt(e.Get("GetScheduleSettingsResponse/ScheduleInfoLists:"+l+"/ScheduleInfo:"+(c+1)+"/ScheduleDate"),10),i.start=parseInt(e.Get("GetScheduleSettingsResponse/ScheduleInfoLists:"+l+"/ScheduleInfo:"+(c+1)+"/ScheduleStartTimeInfo/TimeHourValue"),10),i.end=parseInt(e.Get("GetScheduleSettingsResponse/ScheduleInfoLists:"+l+"/ScheduleInfo:"+(c+1)+"/ScheduleEndTimeInfo/TimeHourValue"),10),n.push(i)}n.releaseAllWeek(),datalist.push(n),check_TotalRule(Limit_Rules,datalist.length())}}}function SetXML(){var e=I18N("j","Please wait")+" ...";PopView.show(e);var t=new SOAPAction,l=new SOAPSetScheduleSettingsResponse;if(0<datalist.length())for(var n=0;n<datalist.length();n++){rule=datalist.list[n];var a=new SOAPScheduleInfoLists;a.ScheduleName=encode_char_text(rule.name),l.push(a),rule.makeAllWeek();for(var c=0;c<rule.length();c++){var i="false";0==rule.list[c].start&&24==rule.list[c].end&&(i="true");var u=new SOAPScheduleInfo;u.ScheduleDate=rule.list[c].date,u.ScheduleAllDay=i,u.ScheduleTimeFormat="true",u.ScheduleStartTimeInfo.TimeHourValue=rule.list[c].start,u.ScheduleEndTimeInfo.TimeHourValue=rule.list[c].end,u.ScheduleStartTimeInfo.TimeMinuteValue="00",u.ScheduleStartTimeInfo.TimeMidDateValue="false",u.ScheduleEndTimeInfo.TimeMinuteValue="00",u.ScheduleEndTimeInfo.TimeMidDateValue="false",l.ScheduleInfoLists[n].push(u)}}else l=new SOAPSetScheduleSettingsResponse_null;t.sendSOAPAction("SetScheduleSettings",l,null).done(function(e){switch(e.SetScheduleSettingsResult.toUpperCase()){case"OK":case"RESTART":Start_reciprocal_Number_RestoreConfiguration(!1);break;case"REBOOT":Start_reciprocal_Number_RestoreConfiguration(!0);break;case"ERROR":case"ERROR_BAD_SCHEDULEINFO":default:window.location.reload()}})}function Start_reciprocal_Number_RestoreConfiguration(e){var t=I18N("j","Please wait")+" ...",l=I18N("j","The new settings have been saved."),n=currentDevice.okcount,a=new SOAPAction;1==e&&(t=I18N("j","Your changes are being saved, and the device will need to reboot."),n=currentDevice.rebootcount,a.sendSOAPAction("Reboot",null,null)),PopView.showWithCountdown(t,n).always(function(){PopView.showConfirm(l).done(function(){location.reload()})})}function addRuleButton(){changeTimeoutAction(),createScheduleTable(null),currentRule=new RuleObj,document.getElementById("createPop").style.display="inline",$("#createButton").attr("class","styled_button_dis").prop("disabled",!0)}function editData(e){changeTimeoutAction(),document.getElementById("createPop").style.display="inline",$("#createButton").attr("class","styled_button_dis").prop("disabled",!0),currentRule=new RuleObj;var t=datalist.getData(e);$.extend(currentRule,t),$("#schedule_name").val(currentRule.name);for(var l=0;l<currentRule.length();l++)for(var n=currentRule.list[l].start;n<currentRule.list[l].end;n++)currentRule.timeArray[currentRule.list[l].date-1][n]=1;createScheduleTable(currentRule)}function deleteData(e){datalist.deleteData(e),check_TotalRule(Limit_Rules,datalist.length()),save_button_changed()}function DisplayTime(){var e=document.createElement("div");return e.className="display",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width="90px",e.style.height="27px",e.style.lineHeight="27px",e.style.background="#FFFA72",e.style.color="#505050",e.style.zIndex="1000",e}function SpriteBtn(){var e=document.createElement("div");return e.className="sprite",e.style.position="absolute",e.style.top="4px",e.style.left="6px",e.style.width="20px",e.style.height="20px",e.style.backgroundImage="url('image/closeBtn.png?v=110d43e127')",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.cursor="pointer",e.style.backgroundSize="contain",e.title=I18N("j","Delete"),e}function createScheduleTable(e){for(var t=0,l=0;l<7;l++){for(var n="",a=0;a<24;a++){var c="list";null!=e&&1==e.timeArray[l][a]&&(c="list ui-selected click-selected-locked"),n+="<li class='"+c+"' style='position:relative' value="+t+"></li>",t++}document.getElementById("calendar").children[l].children[0].innerHTML=n,null!=e&&e.showTimeRange(l)}}$(function(){$("input").keydown(function(){save_button_changed()})});var unselectArray=null,selectStack=null;function createSelectorTrigger(){$(function(){$(".week").bind("mousedown",function(e){e.metaKey=!0,changeTimeoutAction()}).selectable({start:function(e,t){unselectArray=new Array,selectStack=new Array},selecting:function(e,t){if("DIV"!=t.selecting.tagName&&(selectStack.push(t.selecting),null==currentRule.tmpDate)){var l=Math.floor(t.selecting.value/24),n=t.selecting.value%24,a=$(t.selecting);if(currentRule.tmpDate=l,1==currentRule.timeArray[l][n])for(;0<n;){if(n--,1!=currentRule.timeArray[l][n]||0==n){0==n&&(a=a.prev()),a.children(".display").remove();break}a=a.prev()}}},selected:function(e,t){if("DIV"!=t.selected.tagName){$(t.selected).addClass("click-selected-locked");var l=Math.floor(t.selected.value/24),n=t.selected.value%24;currentRule.timeArray[l][n]=1}},unselecting:function(e,t){0<selectStack.length&&selectStack.pop()},unselected:function(e,t){unselectArray.push(t.unselected),$(t.unselected).addClass("ui-selected")},stop:function(e,t){if(1==unselectArray.length){var l=$(unselectArray[0]),n=Math.floor(l.val()/24);if(23==(i=l.val()%24)||1!=currentRule.timeArray[n][i+1]){for(var a=0,c=i;0<=c&&1==currentRule.timeArray[n][c];c--)currentRule.timeArray[n][c]=0,a++;l.children(".sprite").remove();for(c=0;c<a;c++)l.removeClass("ui-selected click-selected-locked ui-unselecting"),c==a-1?l.children(".display").remove():l=l.prev()}else currentRule.showTimeRange(currentRule.tmpDate)}else if(0<selectStack.length&&0<$(selectStack[0]).children(".sprite").length&&selectStack[0].value>selectStack[1].value){$(selectStack[0]).children(".sprite").remove();for(c=0;c<selectStack.length;c++){l=$(selectStack[c]);n=Math.floor(l.val()/24);var i=l.val()%24;currentRule.timeArray[n][i]=0,l.removeClass("ui-selected click-selected-locked ui-unselecting")}currentRule.showTimeRange(currentRule.tmpDate)}else currentRule.showTimeRange(currentRule.tmpDate);currentRule.tmpDate=null}})})}function clearCreateRulePOP(){changeTimeoutAction(),$("#schedule_form input").removeClass("error"),$("label.error").hide(),document.getElementById("createPop").style.display="none",document.getElementById("schedule_name").value="",$("li").removeClass("ui-selected click-selected-locked ui-unselecting"),$("li .sprite").remove(),$("li .display").remove(),check_TotalRule(Limit_Rules,datalist.length()),currentRule=null}function closeCreateRulePOP(){var e=!1;currentRule.setName($("#schedule_name").val()),currentRule.makeTimeSet(),e=null!=currentRule.rowid?datalist.editData(currentRule.rowid,currentRule):datalist.push(currentRule),check_TotalRule(Limit_Rules,datalist.length()),1==e&&clearCreateRulePOP()}function save_button_changed(){document.getElementById("Save_Disable_btn").style.display="none",document.getElementById("Save_btn").style.display="block",changeFlag=!0,changeTimeoutAction()}function check_TotalRule(e,t){var l=e-t;0==(document.getElementById("RemainingRules").innerHTML=l)?$("#createButton").attr("class","styled_button_dis").prop("disabled",!0):$("#createButton").attr("class","styled_button_s").prop("disabled",!1)}$(document).ready(function(){Load_HTML(),Initial(),setMenu("menu_Management"),createSelectorTrigger(),GetXML(),startTimeout(),currentDevice.featureNewTime?($("#time_link").hide(),$("#time2_link").show()):($("#time_link").show(),$("#time2_link").hide())})</script></head><body><div id="wrapper"><div id="header"></div><div id="menu"></div><div id="menu_edge"></div><div id="content"><div id="info"><div id="FunctionName"><script>I18N("h","Schedule")</script></div><div id="wallimage"><img src="image/page_Schedule.png?v=64234ad306" alt="" width="195" height="119"></div><div id="directions"><script>I18N("h","Some features, such as the firewall and website filters, can be turned on or off based on a schedule. One common use of schedules is to control access to the Internet by a specified device during specified time periods.")</script></div></div><div id="funcBar"><div id="pagePath"><script>I18N("h","Management")</script>&gt;&gt;<script>I18N("h","Schedule")</script></div><ul id="rightFunc"><li style="display:block"><div id="Save_btn" onclick="CheckConnectionStatus(),changeTimeoutAction()" style="cursor:pointer;display:none"><script>I18N("h","Save")</script></div></li><li style="display:block"><div id="Save_Disable_btn"><script>I18N("h","Save")</script></div></li><li id="time_link" style="display:block"><a href="javascript:CheckHTMLStatus('Time');" style="text-decoration:none" onclick="return confirmExit()"><div id="page_btn"><script>I18N("h","Time")</script></div></a></li><li id="time2_link" style="display:none"><a href="javascript:CheckHTMLStatus('Time2');" style="text-decoration:none" onclick="return confirmExit()"><div id="page_btn"><script>I18N("h","Time")</script></div></a></li></ul></div><div id="main"><table class="mainTable" border="1" cellspacing="0" rules="rows" id="tblSchedule"><thead><tr><th><script>I18N("h","Name")</script></th><th><script>I18N("h","Schedule")</script></th><th><script>I18N("h","Edit")</script></th><th><script>I18N("h","Delete")</script></th></tr></thead><tbody></tbody></table><table class="mainTable" border="0" cellspacing="0" rules="rows" id="tblSchedule2" style="display:none"><thead><tr></tr></thead><tbody></tbody></table><br><br><button type="button" name="createButton" id="createButton" class="styled_button_s" onclick="addRuleButton()"><script>I18N("h","Add a Schedule")</script></button> &nbsp;&nbsp;<script>I18N("h","Remaining")</script>:&nbsp;<label id="RemainingRules">10</label></div><div id="createPop" style="display:none" onselectstart="return!1"><div id="popRect3" class="dialogBox" style="width:850px"><form role="form" name="schedule_form" id="schedule_form" method="POST" action=""><input id="sumbit_ScheduleData" class="submit" type="submit" value="Submit" style="display:none"><table class="myCreatePop3_table" border="0" cellspacing="0" id="tblSchedule3" style="text-align:left"><tbody><td><script>I18N("h","Name")</script>:&nbsp;&nbsp;<input class="styled-text" type="text" name="schedule_name" size="15" id="schedule_name" maxlength="15"></td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td width="30px"><div id="closeCreatePopBtn" onclick="clearCreateRulePOP()"></div></td></tbody></table><div id="border" style="position:relative;top:20px;left:0;height:280px;width:860px;background:url(image/scheduleTable.png?v=6693363dcd) left top no-repeat"><div id="calendar" style="position:relative;top:33px;left:56px"><div id="Monday"><ul class="week"></ul></div><div id="Tuesday"><ul class="week"></ul></div><div id="Wednesday"><ul class="week"></ul></div><div id="Thursday"><ul class="week"></ul></div><div id="Friday"><ul class="week"></ul></div><div id="Saturday"><ul class="week"></ul></div><div id="Sunday"><ul class="week"></ul></div></div></div><br><table class="myCreatePop3_table" border="0" cellspacing="0" style="height:30px"><tbody><td id="save_td" colspan="4" style="width:850px"><center><button type="button" class="styled_button_s" onclick='document.getElementById("sumbit_ScheduleData").click(),save_button_changed()'><script>I18N("h","Apply")</script></button></center></td></tbody></table></form></div></div><div id="CreatePopAlertMessage" style="display:none"><div id="AlertPopRect"><div id="AlertPopBody"><table class="myAlertPop_table" id="REBOOT" border="0" cellspacing="0" style="display:none"><tbody><tr><td><center><div id="Loading_pop_image"></div></center></td></tr><tr><td><label id="reciprocal_Number_Reboot"></label></td></tr><tr><td id="dialog_msg_black2"><script>I18N("h","Your changes are being saved.")</script></td></tr></tbody></table><table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0"><tbody><tr><td><center><div id="Loading_pop_image"></div></center></td></tr><tr><td><label id="reciprocal_Number"></label></td></tr><tr><td id="dialog_msg_black2"><script>I18N("h","Your changes are being saved.")</script></td></tr></tbody></table></div></div></div><div id="DetectRouterConnection" style="display:none"></div><div id="footer"><div id="copyright"><script>I18N("h","COPYRIGHT")</script></div></div></div></div><div id="popalert" class="black_overlay" style="display:none"><div class="popup_window_border" style="position:relative;top:15%"><div class="popup_window"><div id="popalert_circle"><img src="image/loading.gif?v=082200f467" width="62px" height="62px"></div><div id="popalert_countdown"></div><div id="popalert_title" style="display:none"></div><div id="popalert_InformationIMG" style="display:none"></div><div id="popalert_desc"></div><div id="popalert_buttons" class="btn-group" role="group" aria-label="..."><button type="button" id="popalert_ok" class="btn btn-default"><script>I18N("h","OK")</script></button> <button type="button" id="popalert_cancel" class="btn btn-default"><script>I18N("h","Cancel")</script></button></div></div></div></div><script>$(document).ready(function(){$.validator.addMethod("trimWhiteSpace",function(e,a){var d=!0;return e!=e.trim()&&(d=!1),d},I18N("j","Invalid %s. Only A-Z, a-z, 0-9, “-”, “_”, and spaces are allowed.",I18N("j","Name"))),$.validator.addMethod("checkGenName",function(e,a){var d=!0;return""!=e&&(d=COMM_ValidName(e)),d},I18N("j","Invalid %s. Only A-Z, a-z, 0-9, “-”, “_”, and spaces are allowed.",I18N("j","Name"))),$.validator.addMethod("checkReservedName",function(e,a){var d=!0;return"always"==e.toLowerCase()&&(d=!1),d},I18N("j","The name is reserved. Please assign another name for the schedule.")),$("#schedule_form").validate({rules:{schedule_name:{trimWhiteSpace:!0,checkGenName:!0,checkReservedName:!0}},submitHandler:function(e){closeCreateRulePOP()}})})</script></body></html><!-- svn info: $Revision: 1066 $ $Date: 2018-08-22 11:19:23 +0800 (Wed, 22 Aug 2018) $ --> 
