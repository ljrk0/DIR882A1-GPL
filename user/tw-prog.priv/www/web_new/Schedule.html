<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3c.org/1999/xhtml"><head><title>D-LINK</title><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="expires" content="0"><link rel="icon" href="/image/dlink-favicon.ico?v=1075792207"><link rel="shortcut icon" href="/image/favicon.ico?v=1075792207" type="image/x-icon"><meta http-equiv="X-UA-Compatible" content="IE=9"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Type" content="text/css"><meta name="viewport" content="width=device-width,initial-scale=1maximum-scale=1,user-scalable=no"><link rel="stylesheet" type="text/css" href="/css/jquery.selectbox.css?v=1a58d5229c"><link rel="stylesheet" type="text/css" href="/css/jquery.checkbox.css?v=d4c74ef61d"><script type="text/javascript" charset="utf-8" src="/js/initialJQ.js?v=72051ca6ec"></script><script type="text/javascript" charset="utf-8" src="/js/jquery-ui.custom.min.js?v=68f67c6fc6"></script><script type="text/javascript" charset="utf-8" src="/js/jquery.ui.selectable.js?v=ffd152d42a"></script><script type="text/javascript" charset="utf-8" src="/js/jquery.ui.touch-punch.min.js?v=b5cebdad31"></script><script type="text/javascript" charset="utf-8" src="/js/initialJS.js?v=49978ee093"></script><script type="text/javascript" charset="utf-8" src="/js/initialValidate.js?v=18ad6b1a1d"></script><script type="text/javascript" charset="utf-8" src="/js/initialCSS.js?v=668496d31b"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPSchedule.js?v=484b768c81"></script><link rel="stylesheet" type="text/css" href="css/style_pop.css?v=ebdc1ea095" media="all"><script type="text/javascript" charset="utf-8" src="/js/popView.js?v=28d8d08a05"></script><link href="css/style_Schedule.css?v=36959f9a97" type="text/css" rel="stylesheet"><script type="text/javascript" charset="utf-8" src="/js/Schedule.js?v=89df118b3b"></script><script>function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu(),initialDetectRouterConnection()}function waitSettingFinished(){window.location.reload()}function CheckConnectionStatus(){$.ajax({cache:!1,url:"./js/CheckConnection",timeout:5e3,type:"GET",success:function(e){SetXML()},error:function(){document.getElementById("DetectRouterConnection").style.display="inline"}})}function save_button_changed(){document.getElementById("Save_Disable_btn").style.display="none",document.getElementById("Save_btn").style.display="block",changeFlag=!0,changeTimeoutAction()}function GetXML(){var e=new SOAPAction,t=new SOAPGetScheduleSettingsResponse,i=new SOAPGetScheduleBitmapSettingsResponse;currentDevice.featureBitMapSchedule?e.sendSOAPAction("GetScheduleBitmapSettings",null,i).done(function(e){scheduleSelectableUI.init({page:"schedule",timeFormat:currentDevice.featureScheduleRuleSlotInterval,hnapName:"GetScheduleBitmapSettings"}).getData(i)}):e.sendSOAPAction("GetScheduleSettings",null,t).done(function(){scheduleSelectableUI.init({page:"schedule",timeFormat:currentDevice.featureScheduleRuleSlotInterval}).getData(t)})}function SetXML(){var e=I18N("j","Please wait")+" ...";PopView.show(e);var t=new SOAPAction,i=scheduleTableUI.setScheduleXML(),n="SetScheduleSettings";currentDevice.featureBitMapSchedule&&(n="SetScheduleBitmapSettings"),t.sendSOAPAction(n,i,null).done(function(e){switch(currentDevice.featureBitMapSchedule?e.SetScheduleBitmapSettingsResult.toUpperCase():e.SetScheduleSettingsResult.toUpperCase()){case"OK":case"RESTART":Start_reciprocal_Number_RestoreConfiguration(!1);break;case"REBOOT":Start_reciprocal_Number_RestoreConfiguration(!0);break;case"ERROR":case"ERROR_BAD_SCHEDULEINFO":default:window.location.reload()}})}function Start_reciprocal_Number_RestoreConfiguration(e){var t=I18N("j","Please wait")+" ...",i=I18N("j","The new settings have been saved."),n=currentDevice.okcount,a=new SOAPAction;1==e&&(t=I18N("j","Your changes are being saved, and the device will need to reboot."),n=currentDevice.rebootcount,a.sendSOAPAction("Reboot",null,null)),PopView.showWithCountdown(t,n).always(function(){PopView.showConfirm(i).done(function(){location.reload()})})}top!=self&&(top.location=self.location),null===sessionStorage.getItem("PrivateKey")&&window.location.replace("../info/Login.html"),$(function(){Load_HTML(),Initial(),setMenu("menu_Management"),GetXML(),startTimeout(),currentDevice.featureNewTime?($("#time_link").hide(),$("#time2_link").show()):($("#time_link").show(),$("#time2_link").hide()),$("input").keydown(function(){save_button_changed()})}),function(e){var m,S,t=0;function a(){}function i(){this.list=new Array,this.maxrowid=0}a.prototype={setRowid:function(e){this.rowid=e},showName:function(){return HTMLEncode(this.name)},addRowToHTML:function(e){var t;t="<tr id='tr"+this.rowid+"'></tr>",$("#"+e+"> tbody").append(t),this.setDataToRow($("#tr"+this.rowid))},setDataToRow:function(e){var t;t="<td>"+this.showName()+"</td>",t+="<td>"+this.showSchedule()+"</td>",t+="<td><img src='image/edit_btn.png?v=2fc10c4616' width=28 height=28 style='cursor:pointer' onclick='scheduleTableUI.edit("+this.rowid+")'/></td>",t+="<td><img src='image/trash.png?v=8fee37bb10' width=41 height=41 style='cursor:pointer' onclick='scheduleTableUI.delete("+this.rowid+")'/></td>",e.html(t)},showSchedule:function(){var e="",t="",i="",n=0;this.list=this.list.sort(function(e,t){return e.date>t.date?1:-1});for(var a=0;a<this.list.length;a++){var l="",s="";if(i==this.list[a].date)e+=", ";else{switch(0<a&&(e+="<br>"),this.list[a].date){case 1:t="Monday";break;case 2:t="Tuesday";break;case 3:t="Wednesday";break;case 4:t="Thursday";break;case 5:t="Friday";break;case 6:t="Saturday";break;case 7:t="Sunday"}e+=I18N("j",t)+" : ",i=this.list[a].date}0==this.list[a].start&&this.list[a].end==m.totalColumn?(e+=I18N("j","All Day"),n++):(l=0==this.list[a].startMin?":00 - ":":"+this.list[a].startMin+" - ",s=0==this.list[a].endMin?":00":":"+this.list[a].endMin,e+=this.list[a].start+l+this.list[a].end+s)}return 7==n&&(e=I18N("j","All Week")),e}},i.prototype={getData:function(e){var t,i;for(t=0;t<this.list.length&&(i=this.list[t]).rowid!=e;t++);return i},getRowNum:function(e){var t=0;for(t=0;t<this.list.length&&e!=this.list[t].rowid;t++);return t},editData:function(e,t){var i=this.getRowNum(e),n=new a;return $.extend(n,t),0!=this.checkData(n,i)&&(n.setRowid(e),this.list.splice(i,1,n),n.setDataToRow($("#tr"+n.rowid)),!0)},push:function(e){var t=new a;return $.extend(t,e),0!=this.checkData(t,null)&&(t.setRowid(this.maxrowid),this.list.push(t),this.maxrowid++,"H24-UH1xLTJa7O"!=e.name&&"H5-UH1xLTJa7O"!=e.name&&"H52-UH1xLTJa7O"!=e.name&&"G24-UH1xLTJa7O"!=e.name&&"G5-UH1xLTJa7O"!=e.name&&"G52-UH1xLTJa7O"!=e.name&&t.addRowToHTML("tblSchedule"),!0)},checkData:function(e,t){var i,n,a,l=/_[0-9]$/,s=0;for(""==e.name.replace(/\s/g,"")&&(e.name="NewRule",a=e.name,s=1),i=0;i<this.list.length;i++)if(i!=t)if(n=this.list[i].name,l.test(n)){var r=n.split("_");a=r[0];var o=parseInt(r[1],10);if(e.name==a)s<=o&&(s=o+1);else if(l.test(e.name)){var c=e.name.split("_");c[0]==a&&o==(s=parseInt(c[1],10))&&s++}}else e.name==n&&(a=e.name,s=1);return"NewRule"!=e.name&&"Always"!=e.name||(e.name=a+"_"+s,0==s&&s++),0<s&&(e.name=a+"_"+s),!0},deleteData:function(e){var t=this.getRowNum(e);this.list.splice(t,1),$("#tr"+e).remove()}};var n={init:function(){S=new i},setConfig:function(e){m=e,$("#createButton").on("click",function(){scheduleSelectableUI.addData()})},edit:function(e,t){changeTimeoutAction();var i=new Object,n=S.getData(e);if($.extend(i,n),60==m.timeFormat)for(var a=0;a<i.list.length;a++)for(var l=i.list[a].start;l<i.list[a].end;l++)i.timeArray[i.list[a].date-1][l]=1;else for(a=0;a<i.list.length;a++){var s=2*i.list[a].start,r=2*i.list[a].end;30==i.list[a].startMin&&(s+=1),30==i.list[a].endMin&&(s+=1);for(l=s;l<r;l++)i.timeArray[i.list[a].date-1][l]=1}null==t&&scheduleSelectableUI.editData(i,i.name)},delete:function(e){S.deleteData(e),this.check_TotalRule(),save_button_changed()},editData:function(e,t){return S.editData(e,t)},pushData:function(e){return S.push(e)},setWirelessScheduleNum:function(e){t=e,this.check_TotalRule()},check_TotalRule:function(){var e=10-S.list.length+t;0==(document.getElementById("RemainingRules").innerHTML=e)?$("#createButton").attr("class","styled_button_dis").prop("disabled",!0):$("#createButton").attr("class","styled_button_s").prop("disabled",!1)},setScheduleXML:function(){var e=new SOAPSetScheduleSettingsResponse,t=new SOAPSetScheduleBitmapSettings,i=-1,n=-1,a=-1,l=-1,s="";if("GetScheduleSettings"==m.hnapName){if(0<S.list.length)for(i=0;i<S.list.length;i++){var r=this.makeAllWeek(S.list[i]),o=new SOAPScheduleInfoLists;o.ScheduleName=r.name,e.push(o);for(n=0;n<r.list.length;n++){var c="false";0==r.list[n].start&&24==r.list[n].end&&(c="true");var u=new SOAPScheduleInfo;u.ScheduleDate=r.list[n].date,u.ScheduleAllDay=c,u.ScheduleTimeFormat="true",u.ScheduleStartTimeInfo.TimeHourValue=r.list[n].start,u.ScheduleEndTimeInfo.TimeHourValue=r.list[n].end,60==m.timeFormat?(u.ScheduleStartTimeInfo.TimeMinuteValue="00",u.ScheduleEndTimeInfo.TimeMinuteValue="00"):(0==r.list[n].startMin?u.ScheduleStartTimeInfo.TimeMinuteValue="00":u.ScheduleStartTimeInfo.TimeMinuteValue="30",0==r.list[n].endMin?u.ScheduleEndTimeInfo.TimeMinuteValue="00":u.ScheduleEndTimeInfo.TimeMinuteValue="30"),u.ScheduleStartTimeInfo.TimeMidDateValue="false",u.ScheduleEndTimeInfo.TimeMidDateValue="false",e.ScheduleInfoLists[i].push(u)}}else e=new SOAPSetScheduleSettingsResponse_null;return e}if(0<S.list.length)for(i=0;i<S.list.length;i++){var d=new SOAPScheduleBitmapLists,h=new Array;for(this.edit(S.list[i].rowid,!0),a=0;a<S.list[i].timeArray.length;a++)if(30==m.timeFormat)for(l=0;l<S.list[i].timeArray[a].length-1;l+=2)null==S.list[i].timeArray[a][l]&&(S.list[i].timeArray[a][l]=0),null==S.list[i].timeArray[a][l+1]&&(S.list[i].timeArray[a][l+1]=0),s=(S.list[i].timeArray[a][l].toString()+S.list[i].timeArray[a][l+1].toString()).replace(/00/g,"0").replace(/11/g,"F").replace(/10/g,"3").replace(/01/g,"C"),h.push(s);else for(l=0;l<S.list[i].timeArray[a].length;l++)null==S.list[i].timeArray[a][l]&&(S.list[i].timeArray[a][l]=0),s=S.list[i].timeArray[a][l].toString().replace(/1/g,"F"),h.push(s);d.ScheduleName=S.list[i].name,d.Bitmap=h.toString().replace(/,/g,""),d.Interval=currentDevice.featureScheduleRuleSlotInterval,t.push(d)}else t=new Object;return t},makeAllWeek:function(e){for(var t=0;t<e.list.length;t++){var i=e.list[t],n=0;if(1==i.date){for(var a=0,l=e.list.length;a<l;a++)i.start==e.list[a].start&&i.end==e.list[a].end&&n++;if(7==n){for(a=0;a<e.list.length;)e.list[a]!=i&&i.start==e.list[a].start&&i.end==e.list[a].end?e.list.splice(a,1):a++;t=i.date=0}}}return e},test:function(){console.log(S),console.log(m)}};n.init(),e.scheduleTableUI=n}(window)</script></head><body><div id="wrapper"><div id="header"></div><div id="menu"></div><div id="menu_edge"></div><div id="content"><div id="info"><div id="FunctionName"><script>I18N("h","Schedule")</script></div><div id="wallimage"><img src="image/page_Schedule.png?v=64234ad306" alt="" width="195" height="119"></div><div id="directions"><script>I18N("h","When creating a schedule and applying it to a connected client/parental control, select the times when the device will NOT have internet access.")</script></div></div><div id="funcBar"><div id="pagePath"><script>I18N("h","Management")</script>&gt;&gt;<script>I18N("h","Schedule")</script></div><ul id="rightFunc"><li style="display:block"><div id="Save_btn" onclick="CheckConnectionStatus(),changeTimeoutAction()" style="cursor:pointer;display:none"><script>I18N("h","Save")</script></div></li><li style="display:block"><div id="Save_Disable_btn"><script>I18N("h","Save")</script></div></li><li id="time_link" style="display:block"><a href="javascript:CheckHTMLStatus('Time');" style="text-decoration:none" onclick="return confirmExit()"><div id="page_btn"><script>I18N("h","Time")</script></div></a></li><li id="time2_link" style="display:none"><a href="javascript:CheckHTMLStatus('Time2');" style="text-decoration:none" onclick="return confirmExit()"><div id="page_btn"><script>I18N("h","Time")</script></div></a></li></ul></div><div id="main"><table class="mainTable" border="1" cellspacing="0" rules="rows" id="tblSchedule"><thead><tr><th><script>I18N("h","Name")</script></th><th><script>I18N("h","Schedule")</script></th><th><script>I18N("h","Edit")</script></th><th><script>I18N("h","Delete")</script></th></tr></thead><tbody></tbody></table><table class="mainTable" border="0" cellspacing="0" rules="rows" id="tblSchedule2" style="display:none"><thead><tr></tr></thead><tbody></tbody></table><br><br><button type="button" name="createButton" id="createButton" class="styled_button_s"><script>I18N("h","Add a Schedule")</script></button> &nbsp;&nbsp;<script>I18N("h","Remaining")</script>:&nbsp;<label id="RemainingRules">10</label></div><div id="scheduleSelectPop" style="display:none;position:fixed;z-index:500;top:0;left:0;width:100%;height:100%;background:url(../image/black_bg.png?v=8be4a64d6c);text-align:center" onselectstart="return!1"><div id="popRect3" class="dialogBox" style="width:850px"><form role="form" name="schedule_form" id="schedule_form" method="POST" action=""><input id="sumbit_ScheduleData" class="submit" type="submit" value="Submit" style="display:none"><table class="myCreatePop3_table" border="0" cellspacing="0" id="tblSchedule3" style="text-align:left"><tbody><td><script>I18N("h","Name")</script>:&nbsp;&nbsp;<input class="styled-text" type="text" name="schedule_name" size="15" id="schedule_name" maxlength="15"></td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td width="30px"><div id="closeCreatePopBtn"></div></td></tbody></table><div id="border" style="position:relative;top:20px;left:0;height:280px;width:860px;background:url(image/scheduleTable.png?v=6693363dcd) left top no-repeat"><div id="calendar" style="position:relative;top:33px;left:56px"><div id="Monday"><ul class="week"></ul></div><div id="Tuesday"><ul class="week"></ul></div><div id="Wednesday"><ul class="week"></ul></div><div id="Thursday"><ul class="week"></ul></div><div id="Friday"><ul class="week"></ul></div><div id="Saturday"><ul class="week"></ul></div><div id="Sunday"><ul class="week"></ul></div></div></div><br><table class="myCreatePop3_table" border="0" cellspacing="0" style="height:30px"><tbody><td id="save_td" colspan="4" style="width:850px"><center><button type="button" class="styled_button_s" onclick='document.getElementById("sumbit_ScheduleData").click(),save_button_changed()'><script>I18N("h","Apply")</script></button></center></td></tbody></table></form></div></div><div id="DetectRouterConnection" style="display:none"></div><div id="footer"><div id="copyright"><script>I18N("h","COPYRIGHT")</script></div></div></div></div><div id="popalert" class="black_overlay" style="display:none"><div class="popup_window_border" style="position:relative;top:15%"><div class="popup_window"><div id="popalert_circle"><img src="image/loading.gif?v=082200f467" width="62px" height="62px"></div><div id="popalert_countdown"></div><div id="popalert_title" style="display:none"></div><div id="popalert_InformationIMG" style="display:none"></div><div id="popalert_desc"></div><div id="popalert_buttons" class="btn-group" role="group" aria-label="..."><button type="button" id="popalert_ok" class="btn btn-default"><script>I18N("h","OK")</script></button> <button type="button" id="popalert_cancel" class="btn btn-default"><script>I18N("h","Cancel")</script></button></div></div></div></div></body></html><!-- svn info: $Revision: 1438 $ $Date: 2019-05-09 10:56:11 +0800 (Thu, 09 May 2019) $ --> 
