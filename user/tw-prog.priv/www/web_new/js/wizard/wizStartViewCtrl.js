/* svn info: $Revision: 1404 $ $Date: 2019-04-23 11:10:34 +0800 (Tue, 23 Apr 2019) $ */
define(["wizPath/wizardModel","wizPath/wizardView"],function(o,a){var t,r;function i(e){if(t=$.Deferred(),r=e,$("#wizard_title").html(I18N("j","Welcome")),$("#topology").show(),$("#autoUpgrade_icon").hide(),$("#Wizard1").show(),$("#wizButton_back").hide(),$("#wizButton_next").show().off("click").on("click",function(){a.lockBtn($(this)),function(){var e;$("#language_table").hide();var i=InitInfo(),n=o.getWizDeviceInfo(r);$.when(i,n).done(function(){r.hasInternet?(e="wifi",r.opMode="","WLAN"==r.uplink.toUpperCase()&&($("#RT_to_DUT_Wired").hide(),$("#RT_to_DUT_Wireless").show())):currentDevice.featureWizardWPS_ea?e="wps":(r.opMode="WirelessRepeaterExtender",$("#RT_to_DUT_Wired").hide(),$("#RT_to_DUT_Wireless").show(),e="sitesurvey"),t.resolve(e)})}()}),"true"==localStorage.getItem("RunningWizard")?$("#language_table").show():$("#language_table").hide(),$("#closeWizBtn").off("vclick").on("vclick",function(){t.reject()}),currentDevice.featureNewTime){if(function(){var e=$.client.browser,i=$.client.version;"Mozilla"==e&&"11"==i&&(e="Explorer");var n=!0;switch(e){case"Chrome":i<28&&(n=!1);break;case"Explorer":case"Edge":n=!1;break;case"Safari":i<10&&(n=!1);break;case"Firefox":i<52&&(n=!1);break;default:n=!1}return n}()){r.ianaTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,null!=r.ianaTimeZone&&""!=r.ianaTimeZone||(r.ianaTimeZone="Europe/London");for(var i=!1,n=0;n<countryCity.length;n++)if(r.ianaTimeZone==countryCity[n]){i=!0;break}1!=i&&(countryCity.push(r.ianaTimeZone),countryCity.sort())}else r.ianaTimeZone=get_timezone_id(),null!=r.ianaTimeZone&&""!=r.ianaTimeZone||(r.ianaTimeZone="Europe/London");(new TimeZoneSearch).searchEvent(),$("#timeZone_Search").val(r.ianaTimeZone)}return t.promise()}return{init:function(e){return i(e)}}});