/* svn info: $Revision: 1478 $ $Date: 2019-06-13 18:13:54 +0800 (Thu, 13 Jun 2019) $ */
var getDeviceSettings=new SOAPGetDeviceSettingsResponse,deviceinfo_type={};function ModelInfo(e,r,t){this.modelName=e,this.hwVer=r,this.fwVer=t}function getDeviceInfo(){var s=$.Deferred();return(new SOAPAction).sendSOAPAction("GetDeviceSettings",null,getDeviceSettings).done(function(e,r){var t=e.LatestFirmwareVersion;""!=t&&"."!=t||(t=0);var n=new ModelInfo(e.ModelName,e.HardwareVersion,e.FirmwareVersion);sessionStorage.setItem("modelInfomation",JSON.stringify(n)),sessionStorage.setItem("currentFWVersion",e.FirmwareVersion),sessionStorage.setItem("newFWVersion",t),sessionStorage.setItem("FWRegion",e.FirmwareRegion),sessionStorage.setItem("RequireLevel",e.RequireLevel),sessionStorage.setItem("DCS",e.DCS);var i=e.Type?e.Type:"WirelessRouter";if(sessionStorage.setItem("currentMode",i),r){var o=e.BackOff;getDeviceSettings.BackOff=parseInt(o)>parseInt(r)?o:r}s.resolve()}).fail(function(){s.reject()}),s.promise()}function setLang(){var e=new Array("en-us","zh-tw","zh-cn","ko-kr","fr-fr","pt-br","es-es","it-it","de-de","ru-ru");try{var r=localStorage.getItem("language");if(null==r){r="en-us";var t=null;t=(t="Netscape"==navigator.appName?navigator.language:navigator.browserLanguage).toLowerCase();for(var n=0;n<e.length;n++)t==e[n]&&(r=t);localStorage.setItem("language",r)}InitLANG(r)}catch(e){throw e.code===DOMException.QUOTA_EXCEEDED_ERR&&0===localStorage.length&&alert(I18N("j","The Private Browsing feature of Safari is incompatible with this device's interface. You will need to disable Private Browsing to log in.")),e}}function detectBrowserVersion(){var e=$.client.browser,r=parseInt($.client.version);"Mozilla"==e&&"11"==r&&(e="Explorer");var t=!0;switch(e){case"Chrome":r<28&&(t=!1);break;case"Explorer":r<10&&(t=!1);break;case"Edge":r<12&&(t=!1);break;case"Safari":r<6&&(t=!1);break;case"Firefox":r<28&&(t=!1)}return t}function initEnv(){var e=$.Deferred();if(!detectBrowserVersion())return alert(I18N("j","The system doesn't support your browser.")),e.reject();var r=getDeviceInfo();return $.when(r).done(function(){e.resolve()}).fail(function(){e.reject()}),setLang(),e.promise()}function deviceinfoConfig(){var r=$.Deferred();return $.getScript("/config/deviceinfo.js?v=388a1737af",function(){DeviceInfo.prototype=new CommonDeviceInfo;var e=new DeviceInfo;deviceinfo_type=new DeviceInfo,sessionStorage.setItem("currentDevice",$.stringify(e)),r.resolve()}),r.promise()}