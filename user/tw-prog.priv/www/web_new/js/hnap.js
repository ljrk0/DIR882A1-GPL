/* svn info: $Revision: 847 $ $Date: 2018-06-06 18:37:11 +0800 (Wed, 06 Jun 2018) $ */
function changText(e){for(var t=e.split(""),o=0;o<t.length;o++)65<=t[o].charCodeAt(0)&&t[o].charCodeAt(0)<=90?t[o]=t[o].toLowerCase():t[o]=t[o].toUpperCase();e="";for(o=0;o<t.length;o++)e+=t[o];return e}function HNAP_XML(){}HNAP_XML.prototype={XML_hnap:null,GetXML:function(o,n){var a=this;(r=GetAjaxObj("GetXML")).createRequest(),r.onCallback=function(e){if(r.release(),e.AnchorNode=e.XDoc.getElementsByTagName("soap:Body")[0],null!=e.AnchorNode&&null!=e.AnchorNode||(e.AnchorNode=e.XDoc.getElementsByTagName("Body")[0]),null!=n)for(var t=0;t<n.length;t+=2)e.Set(o+"/"+n[t],n[t+1]);a.XML_hnap=e};var e=sessionStorage.getItem("Cookie");if($.cookie("uid",e,{expires:1,path:"/"}),r.setHeader("Content-Type","text/xml"),r.requestMethod="GET",r.requestAsyn=!1,r.sendRequest("/hnap/"+o+".xml"),"Get"==o.substr(0,3)&&"GetMultipleHNAPs"!=o){var r;(r=GetAjaxObj("GetXMLFromHNAP")).createRequest(),r.onCallback=function(e){r.release(),e.AnchorNode=e.XDoc.getElementsByTagName("soap:Body")[0],null!=e.AnchorNode&&null!=e.AnchorNode||(e.AnchorNode=e.XDoc.getElementsByTagName("Body")[0]),a.XML_hnap=e},r.requestAsyn=!1,r.clearAllHeaders();e=sessionStorage.getItem("Cookie");$.cookie("uid",e,{expires:1,path:"/"}),r.setHeader("Content-Type","text/xml"),r.setHeader("Accept","text/xml"),r.setHeader("SOAPACTION",'"http://purenetworks.com/HNAP1/'+o+'"');var t=sessionStorage.getItem("PrivateKey");null==t&&(t="withoutloginkey");var s=(new Date).getTime();s=Math.floor(s)%2e12;var l='"http://purenetworks.com/HNAP1/'+o+'"',c=hex_hmac_md5(t,s.toString()+l);return c=changText(c),r.setHeader("HNAP_AUTH",c+" "+s),r.sendRequest("/HNAP1/",this.XML_hnap.XDoc),this.XML_hnap}return this.XML_hnap},GetXMLAsync:function(o,n,a,r){var s=this,l=GetAjaxObj("GetXMLAsync");l.createRequest(),l.onCallback=function(e){if(l.release(),e.AnchorNode=e.XDoc.getElementsByTagName("soap:Body")[0],null!=e.AnchorNode&&null!=e.AnchorNode||(e.AnchorNode=e.XDoc.getElementsByTagName("Body")[0]),null!=n)for(var t=0;t<n.length;t+=2)e.Set(o+"/"+n[t],n[t+1]);switch(s.XML_hnap=e,a){case"GetXML":r(e);break;case"GetValue":!function(e,o,n,a){var r=this,s=GetAjaxObj("GetXMLAsync");s.createRequest(),s.onCallback=function(e){if(s.release(),e.AnchorNode=e.XDoc.getElementsByTagName("soap:Body")[0],null!=e.AnchorNode&&null!=e.AnchorNode||(e.AnchorNode=e.XDoc.getElementsByTagName("Body")[0]),null!=n)for(var t=0;t<n.length;t+=2)e.Set(o+"/"+n[t],n[t+1]);r.XML_hnap=e,a(e)},s.requestAsyn=!0,s.clearAllHeaders();var t=sessionStorage.getItem("Cookie");$.cookie("uid",t,{expires:1,path:"/"}),s.setHeader("Content-Type","text/xml"),s.setHeader("Accept","text/xml"),s.setHeader("SOAPACTION",'"http://purenetworks.com/HNAP1/'+o+'"');var l=sessionStorage.getItem("PrivateKey");null==l&&(l="withoutloginkey");var c=(new Date).getTime();c=Math.floor(c)%2e12;var h='"http://purenetworks.com/HNAP1/'+o+'"',A=hex_hmac_md5(l,c.toString()+h);A=changText(A),s.setHeader("HNAP_AUTH",A+" "+c),s.sendRequest("/HNAP1/",e.XDoc)}(s.XML_hnap,o,n,r)}};var e=sessionStorage.getItem("Cookie");$.cookie("uid",e,{expires:1,path:"/"}),l.setHeader("Content-Type","text/xml"),l.requestMethod="GET",l.requestAsyn=!0,l.sendRequest("/hnap/"+o+".xml")},SetXML:function(e,t){var o=this,n=GetAjaxObj("SetXML");n.createRequest(),n.onCallback=function(e){n.release(),e.AnchorNode=e.XDoc.getElementsByTagName("soap:Body")[0],null!=e.AnchorNode&&null!=e.AnchorNode||(e.AnchorNode=e.XDoc.getElementsByTagName("Body")[0]),o.XML_hnap=e},n.requestAsyn=!1,n.clearAllHeaders();var a=sessionStorage.getItem("Cookie");$.cookie("uid",a,{expires:1,path:"/"}),n.setHeader("Content-Type","text/xml"),n.setHeader("Accept","text/xml"),n.setHeader("SOAPACTION",'"http://purenetworks.com/HNAP1/'+e+'"');var r=sessionStorage.getItem("PrivateKey");null==r&&(r="withoutloginkey");var s=(new Date).getTime();s=Math.floor(s)%2e12;var l='"http://purenetworks.com/HNAP1/'+e+'"',c=hex_hmac_md5(r,s.toString()+l);return c=changText(c),n.setHeader("HNAP_AUTH",c+" "+s),n.sendRequest("/HNAP1/",t.XDoc),this.XML_hnap},SetXMLAsync:function(e,t,o){var n=GetAjaxObj("SetXMLAsync");n.createRequest(),n.onCallback=function(e){n.release(),e.AnchorNode=e.XDoc.getElementsByTagName("soap:Body")[0],null!=e.AnchorNode&&null!=e.AnchorNode||(e.AnchorNode=e.XDoc.getElementsByTagName("Body")[0]),o(e)},n.requestAsyn=!0,n.clearAllHeaders();var a=sessionStorage.getItem("Cookie");$.cookie("uid",a,{expires:1,path:"/"}),n.setHeader("Content-Type","text/xml"),n.setHeader("Accept","text/xml"),n.setHeader("SOAPACTION",'"http://purenetworks.com/HNAP1/'+e+'"');var r=sessionStorage.getItem("PrivateKey");null==r&&(r="withoutloginkey");var s=(new Date).getTime();s=Math.floor(s)%2e12;var l='"http://purenetworks.com/HNAP1/'+e+'"',c=hex_hmac_md5(r,s.toString()+l);c=changText(c),n.setHeader("HNAP_AUTH",c+" "+s),n.sendRequest("/HNAP1/",t.XDoc)}};