/* svn info: $Revision: 1086 $ $Date: 2018-09-03 17:05:38 +0800 (Mon, 03 Sep 2018) $ */
var Slideshow=function(t){this.parentDiv=document.getElementById(t),this.parentDiv.style.fontSize="0",this.itemContainer,this.itemContainerId,this.pageDotsContainer,this.itemWidth=200,this.width=900,this.height=100,this.slidePos=0,this.slideStep,this.isSliding=!1,this.itemPerPage=4,this.nowPage=0,this.nextBtn,this.prevBtn,this.btnWidth=50,this.itemArray=new Array,this.dataArray=new Array,this.pageDotArray=new Array,this.container=document.createElement("div"),this.container.style.position="relative",this.container.style.margin="0",this.container.style.display="inline-block",this.container.style.width=this.width-2*this.btnWidth+"px",this.container.style.height=this.height+"px",this.container.style.verticalAlign="top",this.container.style.overflow="hidden",this.itemContainer=document.createElement("div"),this.itemContainer.style.position="absolute",this.itemContainer.style.top="0",this.itemContainer.style.left="0",this.itemContainer.style.margin="0",this.itemContainer.style.padding="0",this.itemContainer.dislay="inline-block",this.itemContainerId="ss_itemContainer",this.itemContainer.setAttribute("id",this.itemContainerId),this.container.appendChild(this.itemContainer),this.nextBtn=document.createElement("div"),this.nextBtn.style.margin="0",this.nextBtn.style.display="inline-block",this.nextBtn.style.cursor="pointer",this.nextBtn.style.width=this.btnWidth+"px",this.nextBtn.style.height=this.height+"px",this.nextBtn.style.backgroundImage="url('image/slidebtn_next.png?v=8abe3cabcb')",this.nextBtn.style.backgroundRepeat="no-repeat",this.nextBtn.style.backgroundSize="contain";var i=this;this.nextBtn.onclick=function(){i.nextPage()},this.prevBtn=document.createElement("div"),this.prevBtn.style.margin="0",this.prevBtn.style.display="inline-block",this.prevBtn.style.cursor="pointer",this.prevBtn.style.width=this.btnWidth+"px",this.prevBtn.style.height=this.height+"px",this.prevBtn.style.backgroundImage="url('image/slidebtn_prev.png?v=8a9395fd72')",this.prevBtn.style.backgroundRepeat="no-repeat",this.prevBtn.style.backgroundSize="contain";i=this;this.prevBtn.onclick=function(){i.prevPage()},this.pagedotDiv=document.createElement("div"),this.pagedotDiv.style.display="inline-block",this.pagedotDiv.style.width=this.width+"px",this.pagedotDiv.style.minHeight="6px",this.pagedotDiv.style.textAlign="center",this.parentDiv.appendChild(this.prevBtn),this.parentDiv.appendChild(this.container),this.parentDiv.appendChild(this.nextBtn),this.parentDiv.appendChild(this.pagedotDiv)};Slideshow.prototype.addItem=function(t){var i=t.element;i.style.display="inline-block",this.itemArray.push(i),this.dataArray.push(t),this.itemContainer.appendChild(i),this.itemContainer.style.width=this.itemArray.length*this.itemWidth+"px";for(var e=0,n=0;n<this.dataArray.length;n++)e+=this.itemWidth;var h=this.width-2*this.btnWidth;if(Math.floor((e-1)/h)+1>this.pageDotArray.length){var a=document.createElement("div");a.style.display="inline-block",a.style.backgroundImage="url('image/slideshow_pagedot.png?v=dc8a8c7d37')",a.style.width="6px",a.style.margin="0 5px",a.style.height="6px",this.pageDotArray.push(a),this.pagedotDiv.appendChild(a)}this.update()},Slideshow.prototype.update=function(){for(var t=0,i=0;i<this.dataArray.length;i++)"none"==this.dataArray[i].priority&&(t+=this.itemWidth);var e=this.width-2*this.btnWidth,n=Math.floor((t-1)/e)+1;for(i=0;i<this.pageDotArray.length;i++)this.pageDotArray[i].style.display=i<=n-1?"inline-block":"none";this.updatePageDotPageBtn()},Slideshow.prototype.updatePageDotPageBtn=function(){for(var t=0;t<this.pageDotArray.length;t++)t==this.nowPage?this.pageDotArray[t].style.opacity="1":this.pageDotArray[t].style.opacity="0.3";this.nowPage<=0?this.prevBtn.style.opacity="0.5":this.prevBtn.style.opacity="1";var i=0;for(t=0;t<this.dataArray.length;t++)"none"==this.dataArray[t].priority&&(i+=this.itemWidth);var e=this.width-2*this.btnWidth,n=Math.floor((i-1)/e);this.nowPage>=n?this.nextBtn.style.opacity="0.5":this.nextBtn.style.opacity="1"},Slideshow.prototype.getAllChildWidth=function(){for(var t=0,i=0;i<this.itemArray.length;i++)t+=parseInt(this.itemArray[i].style.width.replace("px",""));return t},Slideshow.prototype.nextPage=function(){var t=this.getAllChildWidth(),i=this.width-2*this.btnWidth,e=Math.floor((t-1)/i),n=0-this.nowPage*i;if(this.nowPage<e){this.nowPage++;n=0-this.nowPage*i;$(this.itemContainer).stop(),$(this.itemContainer).animate({left:n},800)}else{var h=this;$("#"+this.itemContainerId).animate({left:n-25},100,function(){$("#"+h.itemContainerId).animate({left:n},400)})}this.updatePageDotPageBtn()},Slideshow.prototype.putAndSlideToLast=function(t,i){if(-1!=this.itemArray.indexOf(t)){this.itemContainer.appendChild(t);for(var e=0,n=0;n<this.dataArray.length;n++)"none"==this.dataArray[n].priority&&(e+=this.itemWidth);var h=this.width-2*this.btnWidth,a=Math.floor((e-1)/h);if(this.nowPage!=a){this.nowPage=a;var s=0-this.nowPage*h;$(this.itemContainer).stop(),$(this.itemContainer).animate({left:s},800,i)}else i();this.update()}},Slideshow.prototype.updateToLastPage=function(){for(var t=0,i=0;i<this.dataArray.length;i++)"none"==this.dataArray[i].priority&&(t+=this.itemWidth);var e=this.width-2*this.btnWidth,n=Math.floor((t-1)/e);if(this.nowPage>n&&0<=n){this.nowPage=n;var h=0-this.nowPage*e;$(this.itemContainer).stop(),$(this.itemContainer).animate({left:h},800)}this.update()},Slideshow.prototype.prevPage=function(){var t=this.getAllChildWidth(),i=this.width-2*this.btnWidth,e=(Math.floor(t/i),0-this.nowPage*i);if(0<this.nowPage){this.nowPage--;e=0-this.nowPage*i;$(this.itemContainer).stop(),$(this.itemContainer).animate({left:e},800)}else{var n=this;$("#"+this.itemContainerId).animate({left:e+25},100,function(){$("#"+n.itemContainerId).animate({left:e},400)})}this.updatePageDotPageBtn()};