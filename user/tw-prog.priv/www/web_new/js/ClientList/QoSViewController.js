/* svn info: $Revision: 847 $ $Date: 2018-06-06 18:37:11 +0800 (Wed, 06 Jun 2018) $ */
require.config({paths:{Websocket:"/js/SOAP/Websocket"}}),define("QoSViewController",["QoSView","Websocket"],function(i,e){function t(e,t){this.baseDOM=e,this.qosView=new i,this.model=t,this.querying=!1}t.prototype.showQoS=function(e,t){this.startQoSQuery();var i=this.qosView.generateQoSHTML(e),o=50+250*t;i.children("img.qos_pointer").css("left",o+"px"),i.find(".QoS_more_icon").off("click").click(function(){$("body").css("overflow","hidden"),$("#qosPop").show()}),this.baseDOM.append(i)},t.prototype.hideQoS=function(){this.baseDOM.children(".QoS").remove(),this.querying&&this.stopQoSQuery()},t.prototype.receiveData=function(e){e.MacAddress==this.model.MacAddress&&this.qosView.updateHTML(e)},t.prototype.startQoSQuery=function(){var t=this,i={Command:"GetSpecificClientStatistics",MacAddress:this.model.MacAddress,Action:"start"};initWebsocket(e).done(function(e){e.register(i,o,t),t.querying=!0})},t.prototype.stopQoSQuery=function(){var t=this,i={Command:"GetSpecificClientStatistics",MacAddress:this.model.MacAddress,Action:"stop"};initWebsocket(e).done(function(e){e.register(i,o,t),t.querying=!1})};var o=function(e,t){t.receiveData(e)};return t});