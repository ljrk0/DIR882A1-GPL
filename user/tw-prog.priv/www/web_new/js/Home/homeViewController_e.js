/* svn info: $Revision: 1406 $ $Date: 2019-04-23 16:05:37 +0800 (Tue, 23 Apr 2019) $ */
var Time_GetConnectionUpTime=null,homeDeviceInfo=null;function events(){var e="click";isTouch()&&(e="touchstart"),$("#internetIcon, #routerIcon, #clientIcon").on(e,function(){$(".sectionInfo").hide(),changeTimeoutAction()}),$("#internetIcon").on(e,function(){ToggleCircle("uplink_circle"),$("#UplinkDeviceSection").show()}),$("#routerIcon").on(e,function(){ToggleCircle("router_circle"),$("#DeviceSection").show()}),$("#clientIcon").on(e,function(){ToggleCircle("client_circle"),$("#ClientSection").show()}),isTouch()&&(e="touchend"),$("#goto_wizard").on(e,function(){$(".sectionInfo").hide(),ToggleCircle(null),initWizard(!1),clearInterval(hometimer),clearInterval(hometimer2),hometimer=null,hometimer2=null})}function showUplinkDeviceInfo(e){switch(e.uplink.UplinkInterface.toUpperCase()){case"WLAN":case"WLAN_2.4GHZ":case"WLAN_5GHZ":$("#UplinkConnType").html(I18N("j","Wi-Fi"));var n=e.apcSettings.SSID;""==n&&(n=I18N("j","Not Available")),$("#WiFiSSID").html(HTMLEncode(n));var t=e.apcSettings.Key;""==t&&(t=I18N("j","Not Available")),$("#WiFiKey").html(HTMLEncode(t)),$("#Uplink_SSID_Row, #Uplink_PWD_Row").show();break;default:$("#UplinkConnType").html(I18N("j","Ethernet")),$("#Uplink_SSID_Row, #Uplink_PWD_Row").hide()}e.hasInternet?(GetConnectionUpTime(),show_uplink_connected(e),CheckNewFirmware()):(clearInterval(Time_GetConnectionUpTime),$("#UpTime").html(I18N("j","Not Available")),show_uplink_disconnected(e))}function showRuntimeLanInfo(e){var n=e.lanSettings;$("#MacAddress").html(n.MacAddress.toUpperCase());var t=n.IPAddr;""==t&&(t=I18N("j","Not Available")),$("#IPAddress").html(t);var i=n.SubnetMask;""==i&&(i=I18N("j","Not Available")),$("#SubnetMask").html(i);var o=n.Gateway;""==o&&(o=I18N("j","Not Available")),$("#Gateway").html(o);var a=n.PrimaryDNS;""==a&&(a=I18N("j","Not Available")),$("#PrimaryDNS").html(a);var l=n.SecondaryDNS;""==l&&(l=I18N("j","Not Available")),$("#SecondaryDNS").html(l)}function show_ipv6_info(e){var n,t=e.ipv6settings,i=!1;switch(t.IPv6_ConnectionType.toUpperCase()){case"IPV6_STATIC":n=I18N("j","Static IPv6");break;case"IPV6_AUTOCONFIGURATION":n=I18N("j","Auto Configuration (SLAAC/DHCPv6)");break;default:n=I18N("j","Local Connectivity Only"),i=!0}if($("#IPv6Mode").html(n),$("#IPv6LinkLocal").html(t.IPv6_LinkLocalAddress.toUpperCase()),i)$("#line_v6addr, #line_v6gw, #line_v6dns1, #line_v6dns2").hide();else{var o=t.IPv6_Address;""==o&&(o=I18N("j","Not Available")),$("#IPv6Address").html(o);var a=t.IPv6_DefaultGateway;""==a&&(a=I18N("j","Not Available")),$("#IPv6Gateway").html(a);var l=t.IPv6_PrimaryDNS;""==l&&(l=I18N("j","Not Available")),$("#IPv6DNSServer").html(l);var r=t.IPv6_SecondaryDNS;""==r&&(r=I18N("j","Not Available")),$("#IPv6DNSServer2").html(r),$("#line_v6addr, #line_v6gw, #line_v6dns1, #line_v6dns2").show()}}function GetConnectionUpTime(){var n=new SOAPGetInternetConnUpTimeResponse;(new SOAPAction).sendSOAPAction("GetInternetConnUpTime",null,n).done(function(e){ipv4_connTime=parseInt(n.UpTime,10),clearInterval(Time_GetConnectionUpTime),Time_GetConnectionUpTime=setInterval("runConnUpTime()",1e3)}).fail(function(){$("#UpTime").html(I18N("j","Not Available"))})}function runConnUpTime(){var e=0,n=0,t=0,i=0,o=ipv4_connTime;0<o&&(e=o%60,n=Math.floor(o/60)%60,t=Math.floor(o/3600)%24,i=Math.floor(o/86400),o++),t<10&&(t="0"+t.toString()),n<10&&(n="0"+n.toString()),e<10&&(e="0"+e.toString());var a=i+" "+I18N("j","Day")+",&nbsp;&nbsp;"+t+" : "+n+" : "+e;$("#UpTime").html(a),ipv4_connTime=o}function show_ap_info(e){for(var n in e.wifi_datalist){var t=wifi_datalist[n];e.smartconnect&&"24"!=t.band||show_wireless_info(t.band,t.setting,t.security)}(e.smartconnect||e.covrwifi)&&($("#Wi-Fi_24_show").html(I18N("j","Wi-Fi")),$("#Wi-Fi_5").hide())}function show_wireless_info(e,n,t){var i,o=COMM_ToBOOL(n.Enabled);if($("#ExtendWiFiStatus_"+e).html(o),"false"==n.Enabled||"false"==n.RadioEnabled){if(i=I18N("j","Disabled"),"false"==n.Enabled)return $("#ExtendWiFiStatus_"+e).html(i),$("#ExtendWiFiSSID_"+e).html(I18N("j","Not Available")),void $("#ExtendWiFiKey_"+e).html(I18N("j","Not Available"))}else i=I18N("j","Enabled");$("#ExtendWiFiStatus_"+e).html(i),$("#ExtendWiFiSSID_"+e).html(HTMLEncode(n.SSID)).attr("title",n.SSID),$("#ExtendWiFiKey_"+e).html(HTMLEncode(t.Key)),"false"==t.Enabled?($("#ExtendWiFiKey_"+e).html('"'+I18N("j","Unsecured")+'"').attr("class","alertInfo_label").on("click",function(){self.location.href="Extender_e.html"}),$("#alert_Info_"+e).css("display","inline")):$("#ExtendWiFiKey_"+e).html(HTMLEncode(t.Key)).attr("title",t.Key)}function CheckNewFirmware(){var e=sessionStorage.getItem("currentFWVersion"),n=sessionStorage.getItem("newFWVersion"),t="";if(null!=homeDeviceInfo&&null!=homeDeviceInfo.lanSettings){var i=homeDeviceInfo.lanSettings.MacAddress.toUpperCase().split(":");t=i[4]+i[5]}return parseFloat(n)>parseFloat(e)&&(currentDevice.featureRequireLevel&&("1"==sessionStorage.getItem("RequireLevel")?(sessionStorage.setItem("FirmwareRequireLevel","1"),$("#dialog_msg_black2").html(I18N("j","An essential update with new improvements and fixes is available for your device(s). To continue using the device(s), please upgrade now.")),$(".firmwareBtnIngore").hide()):(sessionStorage.setItem("FirmwareRequireLevel","0"),$("#dialog_msg_black2").html(I18N("j","A new firmware is available! Do you want to download and upgrade the firmware?")),$(".firmwareBtnIngore").show())),$("#map_fw_info").delay(200).fadeIn(1500),(currentDevice.featureRequireLevel&&"1"==sessionStorage.getItem("RequireLevel")||localStorage.getItem("ignoreFW"+t)!=sessionStorage.getItem("newFWVersion"))&&ShowNewFWSection(e.split("."),n.split("."))),""}function goto_UpgradeFW(){currentDevice.featureMultiFirmware?self.location.href="UpdateFirmware_Multi.html":self.location.href="UpdateFirmware.html"}function ShowNewFWSection(e,n){var t=!1;parseInt(n[0])>parseInt(e[0])?t=!0:parseInt(n[0])==parseInt(e[0])&&parseInt(n[1])>parseInt(e[1])&&(t=!0),t&&($("#NewFWSection").show(),$("#CreatePopAlertMessage").show())}function IngoreNewFWMsg(){var e="";if(null!=homeDeviceInfo&&null!=homeDeviceInfo.lanSettings){var n=homeDeviceInfo.lanSettings.MacAddress.toUpperCase().split(":");e=n[4]+n[5]}localStorage.setItem("ignoreFW"+e,sessionStorage.getItem("newFWVersion")),$("#CreatePopAlertMessage").hide()}function initHomeViewController(e){e&&(events(),LoadMap(null),setTimeout(function(){$("#uplink_circle").trigger("click")},1500)),getDeviceInfo(homeDeviceInfo).done(function(e){showUplinkDeviceInfo(homeDeviceInfo=e),showRuntimeLanInfo(e),show_ipv6_info(e)})}