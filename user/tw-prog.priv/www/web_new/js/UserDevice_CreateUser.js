/* svn info: $Revision: 1273 $ $Date: 2019-01-29 15:21:11 +0800 (Tue, 29 Jan 2019) $ */
var a,b,c,d,e,f,g,h,m,tmp_Iteration,tmp_UserName,tmp_UserPassword,tmp_SAMBA_Permission,tmp_FTP_Permission,tmp_SAMBA_Status,tmp_FTP_Status,tmp_VPN_Status,tmp_ID,ROW_BASE=1,IsLoaded=!1,TABLE_NAME="tblUserList",USER_NAME="username_",USER_PASSWORD="userpassword_",Enable_Status="status_",status_samba="status_SAMBA",status_ftp="status_FTP",status_vpn="status_VPN",EDIT_ICON="editicon_",DELETE_ICON="delicon_",DOWNLOAD_ICON="downloadicon_",samba_folder="samba_folder",ftp_folder="ftp_folder",passwordAry=[];IsLoaded=!0;function GetHNAPInformatiom(t,s,i,n,o,r,l,_,u){a=t,b=s,c=i,d=n,e=o,f=r,g=l,h=_,m=u}function myRowObject(e,t,d,s,i,n,o,r,l,a,c){this.one=e,this.two=t,this.three=d,this.four=s,this.five=i,this.six=n,this.seven=o,this.eight=r,this.nine=l,this.ten=a,this.eleven=c}function addRowToTable(e,t,d,s,i,n,o,r,l,a){if(IsLoaded){var c=document.getElementById(TABLE_NAME),m=c.tBodies[0].rows.length,_=m+ROW_BASE,u=d;null==e?e=m:_=e+ROW_BASE;var A=c.tBodies[0].insertRow(e),h=A.insertCell(0),E=document.createElement("input");E.setAttribute("id",Enable_Status+_),E.setAttribute("type","checkbox"),E.checked="true"==r,E.onclick=function(){save_button_changed()},0==e&&(E.checked=!0,E.style.display="none"),h.appendChild(E);var B=A.insertCell(1),b=document.createElement("label");b.setAttribute("id",USER_NAME+_),b.setAttribute("size","10"),b.innerHTML=0==e?"Admin":XMLEncode(u),B.appendChild(b);var N=A.insertCell(2),p=document.createElement("label");p.setAttribute("id",status_samba+_),p.setAttribute("size","10"),p.innerHTML=0==e?I18N("j","Read/Write"):"2"==i?I18N("j","Read/Write"):"1"==i?I18N("j","Read Only"):"-",N.appendChild(p),currentDevice.featureUsbPort||(N.style.display="none");var T=A.insertCell(3),y=document.createElement("label");y.setAttribute("id",status_ftp+_),y.setAttribute("size","10"),y.innerHTML=0==e?I18N("j","Read/Write"):"2"==n?I18N("j","Read/Write"):"1"==n?I18N("j","Read Only"):"-",T.appendChild(y),currentDevice.featureFTPServer&&currentDevice.featureUsbPort||(T.style.display="none");var I=A.insertCell(4),P=document.createElement("label");P.setAttribute("id",status_vpn+_),P.setAttribute("size","10"),P.innerHTML="Enabled"==o?I18N("j","Enabled"):"-",I.appendChild(P);var w,g=A.insertCell(5);if("Enabled"==o)(w=document.createElement("img")).setAttribute("src","image/download_btn.png?v=3d976675db"),w.setAttribute("width","28"),w.setAttribute("height","28"),w.setAttribute("id",DOWNLOAD_ICON+_),w.setAttribute("style","cursor:pointer"),w.onclick=function(){downloadData(u)};else(w=document.createElement("label")).innerHTML="-";g.appendChild(w);var M=A.insertCell(6),v=document.createElement("img");v.setAttribute("src","image/edit_btn.png?v=2fc10c4616"),v.setAttribute("width","28"),v.setAttribute("height","28"),v.setAttribute("id",EDIT_ICON+_),v.setAttribute("style","cursor:pointer"),v.onclick=function(){editData(_)},0==e?M.innerHTML="-":M.appendChild(v);var f=A.insertCell(7),S=document.createElement("img");S.setAttribute("src","image/trash.png?v=8fee37bb10"),S.setAttribute("width","41"),S.setAttribute("height","41"),S.setAttribute("id",DELETE_ICON+_),S.setAttribute("style","cursor:pointer"),S.onclick=function(){deleteCurrentRow(this,u)},0==e?f.innerHTML="-":f.appendChild(S);var L=A.insertCell(8),R=document.createElement("label");R.setAttribute("id",USER_PASSWORD+_),R.setAttribute("size","10"),R.innerHTML=s,passwordAry.push(s),R.setAttribute("style","display:none"),L.appendChild(R),L.style.display="none";var F=A.insertCell(9),U=document.createElement("label");U.setAttribute("id",samba_folder+_),U.setAttribute("size","10"),U.innerHTML=l,U.setAttribute("style","display:none"),F.appendChild(U),F.style.display="none";var C=A.insertCell(10),O=document.createElement("label");O.setAttribute("id",ftp_folder+_),O.setAttribute("size","10"),O.innerHTML=a,O.setAttribute("style","display:none"),C.appendChild(O),C.style.display="none",A.myRow=new myRowObject(E,b,p,y,P,w,v,S,R,U,O),a=l=r=o=n=i=s=d=null}}function AddRowToIndex(){for(var t=document.getElementById(TABLE_NAME),s=document.getElementById("shareport_UserName").value,i=1;i<=Total_User;i++)if(s===t.rows[i].childNodes[1].childNodes[0].innerHTML)return alert("Username can not be the same"),"Error";return""==s?(alert("Username can not be null"),"Error"):(b=document.getElementById("shareport_UserName").value,c=document.getElementById("shareport_Password").value,d=$("#status_SAMBA").prop("checked")?"1"==document.getElementById("SAMBA_Permission").value?"1":"2":"-",e=$("#status_FTP").prop("checked")?"1"==document.getElementById("FTP_Permission").value?"1":"2":"-",f=$("#status_VPN").prop("checked")?"Enabled":"Disabled",g="true",h=document.getElementById("SAMBA_Folder").value,m=document.getElementById("FTP_Folder").value,addRowToTable(null,"",b,c,d,e,f,g,h,m),Total_User+=1,check_TotalUser(Limit_TotalUser,Total_User),document.getElementById("shareport_UserName").value="",document.getElementById("shareport_Password").value="",document.getElementById("status_SAMBA").checked=!0,document.getElementById("SAMBA_Permission").value="1",document.getElementById("SAMBA_Folder").value="",document.getElementById("status_FTP").checked=!1,document.getElementById("FTP_Permission").value="1",document.getElementById("FTP_Folder").value="",document.getElementById("status_VPN").checked=!1,"Success")}function editDataGet(e){var t=document.getElementById(TABLE_NAME),d=t.rows[e].childNodes[1].childNodes[0].innerHTML,s=passwordAry[e-1],i=t.rows[e].childNodes[9].childNodes[0].innerHTML,n=t.rows[e].childNodes[2].childNodes[0].innerHTML,o=t.rows[e].childNodes[10].childNodes[0].innerHTML,r=t.rows[e].childNodes[3].childNodes[0].innerHTML,l=t.rows[e].childNodes[5].childNodes[0].innerHTML;document.getElementById("edit_UserName").value=d,document.getElementById("edit_Password").value=s,document.getElementById("edit_SAMBA_Folder").value=i,document.getElementById("edit_FTP_Folder").value=o,"-"==n?(document.getElementById("edit_status_SAMBA").checked=!1,$("#edit_SAMBA_Permission").selectbox(),$("#edit_SAMBA_Permission").selectbox("disable"),document.getElementById("edit_SAMBA_Folder").disabled=!0,tmp_SAMBA_Status="false",tmp_SAMBA_Permission="-"):(n==I18N("j","Read Only")?(document.getElementById("edit_status_SAMBA").checked=!0,$("#edit_SAMBA_Permission").selectbox("detach"),$("#edit_SAMBA_Permission").val("1"),$("#edit_SAMBA_Permission").selectbox("attach"),$("#edit_SAMBA_Permission").selectbox("enable"),document.getElementById("edit_SAMBA_Folder").disabled=!1,tmp_SAMBA_Permission="1"):(document.getElementById("edit_status_SAMBA").checked=!0,$("#edit_SAMBA_Permission").selectbox("detach"),$("#edit_SAMBA_Permission").val("2"),$("#edit_SAMBA_Permission").selectbox("attach"),$("#edit_SAMBA_Permission").selectbox("enable"),document.getElementById("edit_SAMBA_Folder").disabled=!1,tmp_SAMBA_Permission="2"),tmp_SAMBA_Status="true"),"-"==r?(document.getElementById("edit_status_FTP").checked=!1,$("#edit_FTP_Permission").selectbox(),$("#edit_FTP_Permission").selectbox("disable"),document.getElementById("edit_FTP_Folder").disabled=!0,tmp_FTP_Status="false",tmp_FTP_Permission="-"):(r==I18N("j","Read Only")?(document.getElementById("edit_status_FTP").checked=!0,$("#edit_FTP_Permission").selectbox("detach"),$("#edit_FTP_Permission").val("1"),$("#edit_FTP_Permission").selectbox("attach"),$("#edit_FTP_Permission").selectbox("enable"),document.getElementById("edit_FTP_Folder").disabled=!1,tmp_FTP_Permission="1"):(document.getElementById("edit_status_FTP").checked=!0,$("#edit_FTP_Permission").selectbox("detach"),$("#edit_FTP_Permission").val("2"),$("#edit_FTP_Permission").selectbox("attach"),$("#edit_FTP_Permission").selectbox("enable"),document.getElementById("edit_FTP_Folder").disabled=!1,tmp_FTP_Permission="2"),tmp_FTP_Status="true"),"-"==l?(document.getElementById("edit_status_VPN").checked=!1,tmp_VPN_Status="false"):(document.getElementById("edit_status_VPN").checked=!0,tmp_VPN_Status="true"),tmp_UserName=d,tmp_Password=s,setIteration(e),tmp_ID=e}function assignRowToIndex(e){var t=document.getElementById(TABLE_NAME),d=document.getElementById("edit_UserName").value;if(""!=d)for(var s=2;s<=Total_User;s++)if(d===t.rows[s].childNodes[1].childNodes[0].innerHTML){if(tmp_ID==s)continue;return"Error"}return t.rows[e].childNodes[1].childNodes[0].innerHTML=document.getElementById("edit_UserName").value,document.getElementById("edit_status_SAMBA").checked?"1"==$("#edit_SAMBA_Permission").val()?t.rows[e].childNodes[2].childNodes[0].innerHTML=I18N("j","Read Only"):"2"==$("#edit_SAMBA_Permission").val()&&(t.rows[e].childNodes[2].childNodes[0].innerHTML=I18N("j","Read/Write")):t.rows[e].childNodes[2].childNodes[0].innerHTML="-",document.getElementById("edit_status_FTP").checked?"1"==$("#edit_FTP_Permission").val()?t.rows[e].childNodes[3].childNodes[0].innerHTML=I18N("j","Read Only"):"2"==$("#edit_FTP_Permission").val()&&(t.rows[e].childNodes[3].childNodes[0].innerHTML=I18N("j","Read/Write")):t.rows[e].childNodes[3].childNodes[0].innerHTML="-",document.getElementById("edit_status_VPN").checked?(t.rows[e].childNodes[4].childNodes[0].innerHTML=I18N("j","Enabled"),t.rows[e].childNodes[5].innerHTML='<img src="image/download_btn.png?v=3d976675db" width="28" height="28" style="cursor:pointer;" onclick="downloadData(\''+document.getElementById("edit_UserName").value+'\')" id="'+DOWNLOAD_ICON+e+'">'):(t.rows[e].childNodes[4].childNodes[0].innerHTML="-",t.rows[e].childNodes[5].innerHTML="<label>-</label>"),t.rows[e].childNodes[8].childNodes[0].innerHTML=document.getElementById("edit_Password").value,passwordAry[e-1]=document.getElementById("edit_Password").value,t.rows[e].childNodes[9].childNodes[0].innerHTML=document.getElementById("edit_SAMBA_Folder").value,t.rows[e].childNodes[10].childNodes[0].innerHTML=document.getElementById("edit_FTP_Folder").value,check_TotalUser(Limit_TotalUser,Total_User),tmp_ID}function deleteCurrentRow(e,t){if(IsLoaded){for(i=0;i<userList.length;i++)this.userList[i]==t&&delUserList.push(t);var d=e.parentNode.parentNode,s=d.parentNode.parentNode,n=d.sectionRowIndex;deleteRows(new Array(d)),reorderRows(s,n),Total_User-=1,check_TotalUser(Limit_TotalUser,Total_User),save_button_changed()}}function OnChangeUserName(e){tmp_UserName=e}function OnChangeFolder(e){tmp_AccessPath=e}function OnChangePermission(e){tmp_UserPromission=e}function deleteRows(e){if(IsLoaded)for(var t=0;t<e.length;t++){var d=e[t].sectionRowIndex;e[t].parentNode.deleteRow(d)}}function changeRowIndex(e){document.getElementById(TABLE_NAME).rows[e].childNodes[6].childNodes[0].onclick=function(){editData(e)}}function reorderRows(e,t){e=document.getElementById(TABLE_NAME);if(IsLoaded&&(passwordAry.splice(t,1),e.tBodies[0].rows[t]))for(var d=t+ROW_BASE,s=t;s<e.tBodies[0].rows.length;s++)e.tBodies[0].rows[s].myRow.one.id=Enable_Status+d,e.tBodies[0].rows[s].myRow.two.id=USER_NAME+d,e.tBodies[0].rows[s].myRow.three.id=status_samba+d,e.tBodies[0].rows[s].myRow.four.id=status_ftp+d,e.tBodies[0].rows[s].myRow.five.id=status_vpn+d,e.tBodies[0].rows[s].myRow.six.id=DOWNLOAD_ICON+d,e.tBodies[0].rows[s].myRow.seven.id=EDIT_ICON+d,e.tBodies[0].rows[s].myRow.eight.id=DELETE_ICON+d,e.tBodies[0].rows[s].myRow.nine.id=USER_PASSWORD+d,e.tBodies[0].rows[s].myRow.ten.id=samba_folder+d,e.tBodies[0].rows[s].myRow.eleven.id=ftp_folder+d,changeRowIndex(d),d++}function check_TotalUser(e,t){var d=e-t;document.getElementById("RemainingRules").innerHTML=d,document.getElementById("createButton").disabled=0==d}