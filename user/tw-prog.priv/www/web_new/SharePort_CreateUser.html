<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3c.org/1999/xhtml"><head><title>D-LINK</title><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="expires" content="0"><link rel="icon" href="/image/dlink-favicon.ico?v=1075792207"><link rel="shortcut icon" href="/image/favicon.ico?v=1075792207" type="image/x-icon"><meta http-equiv="X-UA-Compatible" content="IE=9"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Type" content="text/css"><link rel="stylesheet" type="text/css" href="/css/jquery.selectbox.css?v=1a58d5229c"><link rel="stylesheet" type="text/css" href="/css/jquery.checkbox.css?v=d4c74ef61d"><script type="text/javascript" charset="utf-8" src="/js/initialJQ.js?v=72051ca6ec"></script><script type="text/javascript" charset="utf-8" src="/js/initialJS.js?v=49978ee093"></script><script type="text/javascript" charset="utf-8" src="/js/initialCSS.js?v=668496d31b"></script><script type="text/javascript" charset="utf-8" src="/js/initialValidate.js?v=18ad6b1a1d"></script><script type="text/javascript" charset="utf-8" src="/js/SharePort_CreateUser.js?v=901d20c120"></script><script type="text/javascript">top!=self&&(top.location=self.location),null===sessionStorage.getItem("PrivateKey")&&window.location.replace("../info/Login.html");var set_Iteration,HNAP=new HNAP_XML,counter=1,counter2=1,Total_User=0,Limit_TotalUser=9,IsOpenFolder=0,IsOpenFolder2=0,Name_CheckList=[],DefaultDirectory_Path="",DefaultDirectory_Name="",DefaultDirectory_RootN="",DefaultDirectory_RootP="";function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu(),initialDetectRouterConnection()}function setIteration(e){set_Iteration=e}function createUserButton(){changeTimeoutAction(),document.getElementById("shareport_Folder").value=I18N("j","root"),document.getElementById("createPop").style.display="inline",document.getElementById("createButton").disabled=!0,$("#shareport_Permission").selectbox("detach"),$("#shareport_Permission").val("1"),$("#shareport_Permission").selectbox("attach")}function closeCreateUserPOP(){changeTimeoutAction(),"Success"==AddRowToIndex()&&(document.getElementById("createPop").style.display="none",document.getElementById("createButton").disabled=!1,$("#shareport_Permission").selectbox("detach"),$("#shareport_Permission").val("1"),$("#shareport_Permission").selectbox("attach"),check_TotalUser(Limit_TotalUser,Total_User))}function clearCreateRulePOP(){changeTimeoutAction(),document.getElementById("createPop").style.display="none",document.getElementById("createButton").disabled=!1,document.getElementById("shareport_UserName").value="",document.getElementById("shareport_Password").value="",$("#shareport_Permission").selectbox("detach"),$("#shareport_Permission").val("1"),$("#shareport_Permission").selectbox("attach"),document.getElementById("shareport_Folder").value=I18N("j","root"),$("#shareport_c1_form").validate().resetForm()}function editData(e){changeTimeoutAction(),document.getElementById("editPop").style.display="inline",document.getElementById("createButton").disabled=!0,editDataGet(e)}function closeEditUserPOP(e){changeTimeoutAction();var t=assignRowToIndex(e);"Success"==t?(document.getElementById("editPop").style.display="none",document.getElementById("createButton").disabled=!1):"Error"==t?alert("Name cannot be the same."):"NameNull"==t?alert("Name cannot be null."):document.getElementById("editPop").style.display="none"}function clearEditRulePOP(){changeTimeoutAction(),document.getElementById("editPop").style.display="none",document.getElementById("createButton").disabled=!1,$("#shareport_c2_form").validate().resetForm()}function closeTreeViewPOP(){document.getElementById("createPop").style.display="inline",document.getElementById("treeViewPop").style.display="none",document.getElementById("partitionView").innerHTML="",document.getElementById("FolderTreeView").innerHTML=""}function closeTreeView2POP(){document.getElementById("editPop").style.display="inline",document.getElementById("treeViewPop2").style.display="none",document.getElementById("partitionView2").innerHTML="",document.getElementById("FolderTreeView2").innerHTML=""}function GetEditDirectoryList(){var e=HNAP.GetXML("GetListDirectory"),t=e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo#"),o=document.getElementById("partitionView2"),r=document.getElementById("FolderTreeView2"),n="";if(o.innerHTML="",r.innerHTML="",document.getElementById("editPop").style.display="none",document.getElementById("treeViewPop2").style.display="inline",1<t){for(var i=1;i<=t;i++){n='<li><a href="javascript:GetDirectory_EditPartition('+i+')" id="editpartition_'+i+'" style="font-size:16px;line-height:35px;color:#4598aa;"></a></li>',o.innerHTML+=n,s=(s=e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+i+"/DirectoryName")).replace(":",""),document.getElementById("editpartition_"+i).innerHTML=s}e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:1/DirectoryPath");GetDirectory_EditPartition(1)}else{n='<li><a href="javascript:GetDirectory_EditPartition(1)" id="editpartition_1" style="font-size:16px;line-height:35px;color:#4598aa;"></a></li>',o.innerHTML+=n;var s=e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:1/DirectoryName");e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:1/DirectoryPath");s=s.replace(":",""),document.getElementById("editpartition_1").innerHTML=s,GetDirectory_EditPartition(1)}}function GetEditSubFolderList(e){if(0==IsOpenFolder){var t=HNAP.GetXML("GetListDirectory",new Array("ListDirectoryPath",e)),o=t.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo#"),r=document.getElementById("FolderTreeView2"),n=1;r.innerHTML+="<br />";for(var i=0;i<o;i++){var s=t.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/DirectoryName"),l=t.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/DirectoryPath"),d=t.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/SubDirectory"),c=s;r.innerHTML+="true"==d?"<div id=subfolder_"+counter+'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:Get_SubFolderList2('+counter+');"><img src="image/folder_open.png?v=2c0ebed2b2" border="0"><a href="javascript:Return_Back2('+counter+');">'+c+"</a><label></label><label></label><label></label></div>":"<div id=subfolder_"+counter+'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:Get_SubFolderList2('+counter+');"><a href="javascript:Return_Back2('+counter+');">'+c+"</a><label></label><label></label><label></label></div>",document.getElementById("subfolder_"+counter).childNodes[3].innerHTML=l,document.getElementById("subfolder_"+counter).childNodes[3].style.display="none",document.getElementById("subfolder_"+counter).childNodes[4].innerHTML=d,document.getElementById("subfolder_"+counter).childNodes[4].style.display="none",document.getElementById("subfolder_"+counter).childNodes[5].innerHTML=0,document.getElementById("subfolder_"+counter).childNodes[5].style.display="none",counter++,n++}IsOpenFolder=1}}function Get_SubFolderList2(e){if(0==document.getElementById("subfolder_"+e).childNodes[5].innerHTML){if("true"==document.getElementById("subfolder_"+e).childNodes[4].innerHTML){document.getElementById("subfolder_"+e).childNodes[5].innerHTML=1;var t=document.getElementById("subfolder_"+e).childNodes[3].innerHTML,o=HNAP.GetXML("GetListDirectory",new Array("ListDirectoryPath",t)),r=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo#"),n=1,i=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/SubDirectory");document.getElementById("subfolder_"+e).childNodes[1].childNodes[0].src="./image/folder_close.png?v=ed04e0d8c1";for(var s=document.getElementById("subfolder_"+e),l=0;l<r;l++){var d=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/DirectoryName"),c=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/DirectoryPath"),a=(i=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/SubDirectory"),0),u={trueFolderName:d},y=c.match(/\//g),m="";m+="<div id=subfolder_"+counter+">";for(var p=1;p<y.length;p++)m+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";m+="true"==i?'<a href="javascript:Get_SubFolderList2('+counter+');"><img src="image/folder_open.png?v=2c0ebed2b2" border="0"><a href="javascript:Return_Back2('+counter+');"></a><label></label><label></label><label></label></div>':'&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:Get_SubFolderList2('+counter+');"><a href="javascript:Return_Back2('+counter+');"></a><label></label><label></label><label></label></div>',s.innerHTML+=m,document.getElementById("subfolder_"+counter).childNodes[2].innerHTML=u.trueFolderName,document.getElementById("subfolder_"+counter).childNodes[3].innerHTML=c,document.getElementById("subfolder_"+counter).childNodes[3].style.display="none",document.getElementById("subfolder_"+counter).childNodes[4].innerHTML=i,document.getElementById("subfolder_"+counter).childNodes[4].style.display="none",document.getElementById("subfolder_"+counter).childNodes[5].innerHTML=a,document.getElementById("subfolder_"+counter).childNodes[5].style.display="none",counter++,n++}}else document.getElementById("subfolder_"+e).childNodes[1].childNodes[0].src="/image/folder_close.png?v=ed04e0d8c1"}else{i=document.getElementById("subfolder_"+e).childNodes[4].innerHTML,c=document.getElementById("subfolder_"+e).childNodes[3].innerHTML,t=document.getElementById("subfolder_"+e).childNodes[2].innerHTML;var g=document.getElementById("subfolder_"+e);for(u={trueFolderName:t},y=c.match(/\//g),m="",p=1;p<y.length;p++)m+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";g.innerHTML=m+'<a href="javascript:Get_SubFolderList2('+e+');" id=subfolder_'+e+'><img src="image/folder_open.png?v=2c0ebed2b2" border="0"></a><a href="javascript:Return_Back2('+e+');"></a><label></label><label></label><label></label></div>';a=0;document.getElementById("subfolder_"+e).childNodes[2].innerHTML=u.trueFolderName,document.getElementById("subfolder_"+e).childNodes[3].innerHTML=c,document.getElementById("subfolder_"+e).childNodes[3].style.display="none",document.getElementById("subfolder_"+e).childNodes[4].innerHTML=i,document.getElementById("subfolder_"+e).childNodes[4].style.display="none",document.getElementById("subfolder_"+e).childNodes[5].innerHTML=a,document.getElementById("subfolder_"+e).childNodes[5].style.display="none"}}function GetDirectoryList(){var e=HNAP.GetXML("GetListDirectory"),t=e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo#"),o=document.getElementById("partitionView"),r=document.getElementById("FolderTreeView"),n="";if(o.innerHTML="",r.innerHTML="",document.getElementById("createPop").style.display="none",document.getElementById("treeViewPop").style.display="inline",1<t){for(var i=1;i<=t;i++){n='<li><a href="javascript:GetDirectory_Partition('+i+')" id="partition_'+i+'" style="font-size:16px;line-height:35px;color:#4598aa;"></a></li>',o.innerHTML+=n,s=(s=e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+i+"/DirectoryName")).replace(":",""),document.getElementById("partition_"+i).innerHTML=s}e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:1/DirectoryPath");GetDirectory_Partition(1)}else{n='<li><a href="javascript:GetDirectory_Partition(1)" id="partition_1" style="font-size:16px;line-height:35px;color:#4598aa;"></a></li>',o.innerHTML+=n;var s=e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:1/DirectoryName");e.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:1/DirectoryPath");s=s.replace(":",""),document.getElementById("partition_1").innerHTML=s,GetDirectory_Partition(1)}}function GetDirectory_Partition(e){document.getElementById("FolderTreeView").innerHTML="",setTimeout("GetDirectory_Partition_Append("+e+")",100)}function GetDirectory_Partition_Append(e){var t=HNAP.GetXML("GetListDirectory").Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+e+"/DirectoryPath");document.getElementById("FolderTreeView").innerHTML+='<a href="javascript:ReturnBack();" id="rootName" style="margin: 0 0 0 10px;"></a>',document.getElementById("rootName").innerHTML=t,IsOpenFolder=0,GetSubFolderList(t)}function GetDirectory_EditPartition(e){document.getElementById("FolderTreeView2").innerHTML="",setTimeout("GetDirectory_EditPartition_Append("+e+")",100)}function GetDirectory_EditPartition_Append(e){var t=HNAP.GetXML("GetListDirectory").Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+e+"/DirectoryPath");document.getElementById("FolderTreeView2").innerHTML+='<a href="javascript:ReturnBack2();" id="rootName2" style="margin: 0 0 0 10px;"></a>',document.getElementById("rootName2").innerHTML=t,IsOpenFolder=0,GetEditSubFolderList(t)}function Get_SubFolderList(e){if(0==document.getElementById("subfolder_"+e).childNodes[5].innerHTML){if("true"==document.getElementById("subfolder_"+e).childNodes[4].innerHTML){document.getElementById("subfolder_"+e).childNodes[5].innerHTML=1;var t=document.getElementById("subfolder_"+e).childNodes[3].innerHTML,o=HNAP.GetXML("GetListDirectory",new Array("ListDirectoryPath",t)),r=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo#"),n=1,i=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/SubDirectory");document.getElementById("subfolder_"+e).childNodes[1].childNodes[0].src="./image/folder_close.png?v=ed04e0d8c1";for(var s=document.getElementById("subfolder_"+e),l=0;l<r;l++){var d=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/DirectoryName"),c=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/DirectoryPath"),a=(i=o.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/SubDirectory"),0),u={trueFolderName:d},y=c.match(/\//g),m="";m+="<div id=subfolder_"+counter+">";for(var p=1;p<y.length-1;p++)m+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";m+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",m+="true"==i?'<a href="javascript:Get_SubFolderList('+counter+');"><img src="image/folder_open.png?v=2c0ebed2b2" border="0"><a href="javascript:Return_Back('+counter+');"></a><label></label><label></label><label></label></div>':'&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:Get_SubFolderList('+counter+');"><a href="javascript:Return_Back('+counter+');"></a><label></label><label></label><label></label></div>',s.innerHTML+=m,document.getElementById("subfolder_"+counter).childNodes[2].innerHTML=u.trueFolderName,document.getElementById("subfolder_"+counter).childNodes[3].innerHTML=c,document.getElementById("subfolder_"+counter).childNodes[3].style.display="none",document.getElementById("subfolder_"+counter).childNodes[4].innerHTML=i,document.getElementById("subfolder_"+counter).childNodes[4].style.display="none",document.getElementById("subfolder_"+counter).childNodes[5].innerHTML=a,document.getElementById("subfolder_"+counter).childNodes[5].style.display="none",counter++,n++}}else document.getElementById("subfolder_"+e).childNodes[1].childNodes[0].src="/image/folder_close.png?v=ed04e0d8c1"}else{i=document.getElementById("subfolder_"+e).childNodes[4].innerHTML,c=document.getElementById("subfolder_"+e).childNodes[3].innerHTML,t=document.getElementById("subfolder_"+e).childNodes[2].innerHTML;var g=document.getElementById("subfolder_"+e);for(u={trueFolderName:t},y=c.match(/\//g),m="",p=1;p<y.length;p++)m+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";g.innerHTML=m+'<a href="javascript:Get_SubFolderList('+e+');" id=subfolder_'+e+'><img src="image/folder_open.png?v=2c0ebed2b2" border="0"></a><a href="javascript:Return_Back('+e+');"></a><label></label><label></label><label></label></div>';a=0;document.getElementById("subfolder_"+e).childNodes[2].innerHTML=u.trueFolderName,document.getElementById("subfolder_"+e).childNodes[3].innerHTML=c,document.getElementById("subfolder_"+e).childNodes[3].style.display="none",document.getElementById("subfolder_"+e).childNodes[4].innerHTML=i,document.getElementById("subfolder_"+e).childNodes[4].style.display="none",document.getElementById("subfolder_"+e).childNodes[5].innerHTML=a,document.getElementById("subfolder_"+e).childNodes[5].style.display="none"}}function GetSubFolderList(e){if(0==IsOpenFolder){var t=HNAP.GetXML("GetListDirectory",new Array("ListDirectoryPath",e)),o=t.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo#"),r=document.getElementById("FolderTreeView"),n=1;r.innerHTML+="<br />";for(var i=0;i<o;i++){var s=t.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/DirectoryName"),l=t.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/DirectoryPath"),d=t.Get("GetListDirectoryResponse/DirectoryList/ListDirectoryInfo:"+n+"/SubDirectory"),c=s;r.innerHTML+="true"==d?"<div id=subfolder_"+counter+'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:Get_SubFolderList('+counter+');"><img src="image/folder_open.png?v=2c0ebed2b2" border="0"><a href="javascript:Return_Back('+counter+');">'+c+"</a><label></label><label></label><label></label></div>":"<div id=subfolder_"+counter+'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:Get_SubFolderList('+counter+');"><a href="javascript:Return_Back('+counter+');">'+c+"</a><label></label><label></label><label></label></div>",document.getElementById("subfolder_"+counter).childNodes[3].innerHTML=l,document.getElementById("subfolder_"+counter).childNodes[3].style.display="none",document.getElementById("subfolder_"+counter).childNodes[4].innerHTML=d,document.getElementById("subfolder_"+counter).childNodes[4].style.display="none",document.getElementById("subfolder_"+counter).childNodes[5].innerHTML=0,document.getElementById("subfolder_"+counter).childNodes[5].style.display="none",counter++,n++}IsOpenFolder=1}}function ReturnBack(){document.getElementById("shareport_Folder").value=document.getElementById("rootName").innerHTML,document.getElementById("createPop").style.display="inline",document.getElementById("treeViewPop").style.display="none"}function Return_Back(e){document.getElementById("shareport_Folder").value=document.getElementById("subfolder_"+e).childNodes[3].innerHTML,document.getElementById("createPop").style.display="inline",document.getElementById("treeViewPop").style.display="none"}function ReturnBack2(){document.getElementById("edit_Folder").value=document.getElementById("rootName2").innerHTML,document.getElementById("editPop").style.display="inline",document.getElementById("treeViewPop2").style.display="none"}function Return_Back2(e){document.getElementById("edit_Folder").value=document.getElementById("subfolder_"+e).childNodes[3].innerHTML,document.getElementById("editPop").style.display="inline",document.getElementById("treeViewPop2").style.display="none"}function GetXML(){HNAP.GetXMLAsync("GetMultipleHNAPs",null,"GetXML",function(e){GetResult_1st(e)})}function GetResult_1st(e){null!=e?(e.Set("GetMultipleHNAPs/GetUSBStorageSettings"),e.Set("GetMultipleHNAPs/GetListDirectory"),e.Set("GetMultipleHNAPs/GetUSBStorageDevice"),HNAP.SetXMLAsync("GetMultipleHNAPs",e,function(e){GetResult_2nd(e)})):1==DebugMode&&alert("[!!GetXML Error!!] Function: GetResult_1st")}function GetResult_2nd(e){var t=e.Get("GetMultipleHNAPsResponse/GetMultipleHNAPsResult");if("OK"==t||"RESTART"==t){for(var o=1;o<=Limit_TotalUser&&""!=e.Get("GetMultipleHNAPsResponse/GetUSBStorageSettingsResponse/StorageUserInfoLists/StorageUser:"+o+"/UserName");o++)Total_User+=1;for(var r=1;r<=Total_User;r++){var n=e.Get("GetMultipleHNAPsResponse/GetUSBStorageSettingsResponse/StorageUserInfoLists/StorageUser:"+r+"/UserName"),i=e.Get("GetMultipleHNAPsResponse/GetUSBStorageSettingsResponse/StorageUserInfoLists/StorageUser:"+r+"/Password"),s=e.Get("GetMultipleHNAPsResponse/GetUSBStorageSettingsResponse/StorageUserInfoLists/StorageUser:"+r+"/AccessPath"),l=e.Get("GetMultipleHNAPsResponse/GetUSBStorageSettingsResponse/StorageUserInfoLists/StorageUser:"+r+"/Promission");s=s.replace(":",""),GetHNAPInformatiom(Total_User,n,i,s,l),addRowToTable(null)}document.getElementById("createButton").disabled=!1;var d=Limit_TotalUser-Total_User;switch(0==(document.getElementById("RemainingRules").innerHTML=d)&&(document.getElementById("createButton").disabled=!0),$("#shareport_Permission").selectbox({width:170}),$("#edit_Permission").selectbox({width:170}),e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice#")){case 0:document.getElementById("index_USBDeviceName").innerHTML=I18N("j","Not Available"),document.getElementById("usbDeviceSpace_Status").style.display="none",document.getElementById("usbDeviceSpace_Information").style.display="none",document.getElementById("usbDeviceSpace_PercentValue").style.display="none",document.getElementById("usbDeviceSpace_Information").style.display="none",document.getElementById("usbDeviceSpace_Status").style.display="none",document.getElementById("usbDeviceSpace_PercentValue").style.display="none",document.getElementById("usbport_2").style.display="none",document.getElementById("searchFolder").disabled=!0,document.getElementById("search_Edit_Folder").disabled=!0;break;case 1:document.getElementById("searchFolder").disabled=!1,document.getElementById("search_Edit_Folder").disabled=!1;var c=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:1/Device"),a="MB",u="MB",y=p=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:1/TotalSpace"),m=g=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:1/FreeSpace");document.getElementById("index_USBDeviceName").innerHTML=c,1024<=p&&(y=parseFloat(y/1024).toFixed(2),a="GB",1048576<=p&&(y=parseFloat(y/1024).toFixed(2),a="TB")),1024<=g&&(m=parseFloat(m/1024).toFixed(2),u="GB",1048576<=g&&(m=parseFloat(m/1024).toFixed(2),u="TB")),document.getElementById("index_USBDeviceTotalSpace").innerHTML=y+a,document.getElementById("index_USBDeviceFreeSpace").innerHTML=m+u,UsbDevice_getSpace=parseInt((p-g)/p*300),.9*p<=p-g?(document.getElementById("usb_progressBar").style.border="1px solid red",document.getElementById("usb_DeviceSpace").style.background="red"):(document.getElementById("usb_progressBar").style.border="1px solid #4598aa",document.getElementById("usb_DeviceSpace").style.background="#4598aa"),document.getElementById("usb_DeviceSpace").style.width=UsbDevice_getSpace+"px",document.getElementById("percent_Value").innerHTML=parseInt(UsbDevice_getSpace/3)+"%",90<=UsbDevice_getSpace/3?document.getElementById("percent_Value").style.color="#FFF":document.getElementById("percent_Value").style.color="#000",document.getElementById("usbDeviceSpace_Information").style.display="table-row",document.getElementById("usbDeviceSpace_Status").style.display="table-row",document.getElementById("usbDeviceSpace_PercentValue").style.display="table-row",document.getElementById("usbport_2").style.display="none";break;default:document.getElementById("searchFolder").disabled=!1,document.getElementById("search_Edit_Folder").disabled=!1;c=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:1/Device");var p=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:1/TotalSpace"),g=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:1/FreeSpace"),b=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:2/Device"),D=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:2/TotalSpace"),_=e.Get("GetMultipleHNAPsResponse/GetUSBStorageDeviceResponse/StorageDeviceInfoLists/StorageDevice:2/FreeSpace"),I=(a="MB",u="MB","MB"),L="MB",B=(y=p,m=g,D),f=_;document.getElementById("index_USBDeviceName").innerHTML=c,document.getElementById("index_USBDeviceName2").innerHTML=b,1024<=p&&(y=parseFloat(y/1024).toFixed(2),a="GB",1048576<=p&&(y=parseFloat(y/1024).toFixed(2),a="TB")),1024<=g&&(m=parseFloat(m/1024).toFixed(2),u="GB",1048576<=g&&(m=parseFloat(m/1024).toFixed(2),u="TB")),1024<=D&&(B=parseFloat(B/1024).toFixed(2),I="GB",1048576<=D&&(B=parseFloat(B/1024).toFixed(2),I="TB")),1024<=_&&(f=parseFloat(f/1024).toFixed(2),L="GB",1048576<=_&&(f=parseFloat(f/1024).toFixed(2),L="TB")),document.getElementById("index_USBDeviceTotalSpace").innerHTML=y+a,document.getElementById("index_USBDeviceFreeSpace").innerHTML=m+u,document.getElementById("index_USBDeviceTotalSpace2").innerHTML=B+I,document.getElementById("index_USBDeviceFreeSpace2").innerHTML=f+L,UsbDevice_getSpace=parseInt((p-g)/p*300),UsbDevice_getSpace2=parseInt((D-_)/D*300),.9*p<=p-g?(document.getElementById("usb_progressBar").style.border="1px solid red",document.getElementById("usb_DeviceSpace").style.background="red"):(document.getElementById("usb_progressBar").style.border="1px solid #4598aa",document.getElementById("usb_DeviceSpace").style.background="#4598aa"),.9*D<=D-_?(document.getElementById("usb_progressBar2").style.border="1px solid red",document.getElementById("usb_DeviceSpace2").style.background="red"):(document.getElementById("usb_progressBar2").style.border="1px solid #4598aa",document.getElementById("usb_DeviceSpace2").style.background="#4598aa"),document.getElementById("usb_DeviceSpace").style.width=UsbDevice_getSpace+"px",document.getElementById("percent_Value").innerHTML=parseInt(UsbDevice_getSpace/3)+"%",document.getElementById("usb_DeviceSpace2").style.width=UsbDevice_getSpace2+"px",document.getElementById("percent_Value2").innerHTML=parseInt(UsbDevice_getSpace2/3)+"%",90<=UsbDevice_getSpace/3?document.getElementById("percent_Value").style.color="#FFF":document.getElementById("percent_Value").style.color="#000",90<=UsbDevice_getSpace2/3?document.getElementById("percent_Value2").style.color="#FFF":document.getElementById("percent_Value2").style.color="#000",document.getElementById("usbDeviceSpace_Information").style.display="table-row",document.getElementById("usbDeviceSpace_Status").style.display="table-row",document.getElementById("usbDeviceSpace_PercentValue").style.display="table-row",document.getElementById("usbport_2").style.display="table-row"}DefaultDirectory_Name=e.Get("GetMultipleHNAPsResponse/GetListDirectoryResponse/DirectoryList/ListDirectoryInfo/DirectoryName"),DefaultDirectory_Path=e.Get("GetMultipleHNAPsResponse/GetListDirectoryResponse/DirectoryList/ListDirectoryInfo/DirectoryPath"),DefaultDirectory_RootN=DefaultDirectory_Name;var E=DefaultDirectory_Path.replace("/","");DefaultDirectory_RootP=E+":",document.getElementById("shareport_Folder").value=I18N("j","root"),document.getElementById("main").style.display="inline"}else 1==DebugMode&&alert("[!!GetXML Error!!] Function: GetResult_2nd")}function CheckConnectionStatus(){$.ajax({cache:!1,url:"./js/CheckConnection",timeout:5e3,type:"GET",success:function(e){SetXML()},error:function(){document.getElementById("DetectRouterConnection").style.display="inline"}})}function SetXML(){document.getElementById("CreatePopAlertMessage").style.display="inline",HNAP.GetXMLAsync("SetStorageUsers",null,"GetXML",function(e){SetResult_1st(e)})}function SetResult_1st(e){if(null!=e){var t=document.getElementById(TABLE_NAME),o=0,r=0;array2Dv=new Array2DVar(Total_User,4);for(var n=2;n<=Total_User+1;n++){array2Dv[o][0]=t.rows[n].childNodes[0].childNodes[0].innerHTML;var i=t.rows[n].childNodes[1].childNodes[0].innerHTML,s=DefaultDirectory_Path.replace("/","");"root"==(i=i.replace(DefaultDirectory_Path,DefaultDirectory_RootP))||i==I18N("j","root")||i==DefaultDirectory_RootP?array2Dv[o][1]="root":(-1==i.search(":")&&(i=i.replace(s,DefaultDirectory_RootP)),array2Dv[o][1]=i),t.rows[n].childNodes[2].childNodes[0].innerHTML==I18N("j","Read/Write")?array2Dv[o][2]="true":array2Dv[o][2]="false",array2Dv[o][3]=t.rows[n].childNodes[5].childNodes[0].innerHTML,o++}for(var l=1;l<=Total_User;l++)e.Set("SetStorageUsers/StorageUserInfoLists/StorageUser:"+l+"/UserName",array2Dv[r][0]),e.Set("SetStorageUsers/StorageUserInfoLists/StorageUser:"+l+"/AccessPath",array2Dv[r][1]),e.Set("SetStorageUsers/StorageUserInfoLists/StorageUser:"+l+"/Permission",array2Dv[r][2]),e.Set("SetStorageUsers/StorageUserInfoLists/StorageUser:"+l+"/Password",array2Dv[r][3]),r++;HNAP.SetXMLAsync("SetStorageUsers",e,function(e){SetResult_2nd(e)})}else 1==DebugMode&&alert("[!!SetXML Error!!] Function: SetResult_1st")}function SetResult_2nd(e){var t=e.Get("SetStorageUsersResponse/SetStorageUsersResult");"OK"!=t&&"RESTART"!=t||setTimeout("waitSettingFinished()",1e3),"ERROR"==t&&(1==DebugMode&&alert("[!!SetXML Error!!] Function: SetResult_2nd"),setTimeout("waitSettingFinished()",1e3))}function waitSettingFinished(){window.location.reload()}function Array2DVar(e,t){this.length=e,this.x=e,this.y=t;for(var o=0;o<this.length;o++)this[o]=new Array(t)}</script><script language="JavaScript">function focusToFirstIndex(e){"save_buttonFocus"==e.id&&9==window.event.keyCode&&document.getElementById("shareport_UserName").focus(),"save_buttonFocus2"==e.id&&9==window.event.keyCode&&document.getElementById("edit_UserName").focus()}</script><script language="JavaScript">function save_button_changed(){document.getElementById("Save_Disable_btn").style.display="none",document.getElementById("Save_btn").style.display="block",changeFlag=!0,changeTimeoutAction()}$(function(){$("select").change(function(){save_button_changed()}),$("input").keydown(function(){save_button_changed()})})</script><style>#createPop{display:none}#editPop{display:none}.progressBar{background-color:#fff;height:30px;width:300px;border:1px solid #4598aa;color:#222}.progressBar .bar{background-color:#4598aa;height:30px;width:0}</style></head><body><div id="wrapper"><div id="header"></div><div id="menu"></div><div id="menu_edge"></div><div id="content"><div id="info"><div id="FunctionName"><script>I18N("h","SharePort")</script></div><div id="wallimage"><img src="image/page_shareport.png?v=c99f30116e" alt="" width="195" height="119"></div><div id="directions"><script>I18N("h",'"Create User" manage access to your storage devices or use the Guest account (guest/guest) to access the Guest Folder. After plugging in an SD card or USB storage drive, the new device will appear in the list with a link to it. You can then use this link to connect the drive and login with a user account.')</script></div></div><div id="funcBar"><div id="pagePath">&nbsp;<script>I18N("h","Settings")</script>&nbsp;&gt;&gt;&nbsp;<script>I18N("h","SharePort")</script>&nbsp;&gt;&gt;&nbsp;<script>I18N("h","Create User")</script></div><ul id="rightFunc"><li style="display:block"><div id="Save_btn" onclick="CheckConnectionStatus(),changeTimeoutAction()" style="cursor:pointer;display:none"><script>I18N("h","Save")</script></div></li><li style="display:block"><div id="Save_Disable_btn"><script>I18N("h","Save")</script></div></li><li style="display:block"><a href="javascript:CheckHTMLStatus('SharePort');" style="text-decoration:none" onclick="return confirmExit()"><div id="page_btn" class="linkstyle_1"><script>I18N("h","SharePort")</script></div></a></li></ul></div><div id="main" style="display:none"><table class="myTable2" border="0" cellspacing="0" id="tblUserList"><thead><tr><th><script>I18N("h","User Name")</script></th><th><script>I18N("h","Access Path")</script></th><th><script>I18N("h","Permission")</script></th><th><script>I18N("h","Edit")</script></th><th><script>I18N("h","Delete")</script></th><th style="display:none"><script>I18N("h","Password")</script></th></tr></thead><tbody><tr><td>Admin</td><td><script>I18N("h","root")</script></td><td><script>I18N("h","Read/Write")</script></td><td>--</td><td>--</td><td></td></tr></tbody></table><br><br><button type="button" name="createButton" id="createButton" class="styled_button_s" onclick="createUserButton()"><script>I18N("h","Create User")</script></button> &nbsp;&nbsp;<script>I18N("h","Remaining")</script>:&nbsp;<label id="RemainingRules">9</label><br><hr><div id="usb_1" style="position:relative"><div id="usbport_1"><table class="inforTableTitle" border="0"><tbody><tr><td><img src="image/usb_Icon.png?v=ce4192db02" alt="" width="28" height="28"></td><th><script>I18N("h","USB Port")</script>:</th><td><div><label id="index_USBDeviceName"><script>I18N("h","Not Available")</script></label></div></td></tr></tbody></table><table class="myTable_index" border="0" id="usbDeviceSpace_Information" style="display:none"><tbody><tr><th><div><script>I18N("h","Available Space")</script>:</div></th><td><div><label id="index_USBDeviceFreeSpace"><script>I18N("h","Not Available")</script></label></div></td></tr><tr><th><div><script>I18N("h","Total Space")</script>:</div></th><td><div><label id="index_USBDeviceTotalSpace"><script>I18N("h","Not Available")</script></label></div></td></tr></tbody></table><table class="myTable_index" border="0" id="usbDeviceSpace_Status" style="display:none"><tbody><tr><td><div class="progressBar" id="usb_progressBar"><div class="bar" id="usb_DeviceSpace"></div></div></td></tr></tbody></table><table class="myTable_index" border="0" id="usbDeviceSpace_PercentValue" style="display:none"><tbody><tr><td><div><label id="percent_Value"></label></div></td></tr></tbody></table></div><div id="usbport_2" style="display:none"><table class="inforTableTitle" border="0"><tbody><tr><td><img src="image/usb_Icon.png?v=ce4192db02" alt="" width="28" height="28"></td><th><script>I18N("h","USB Port")</script>:</th><td><div><label id="index_USBDeviceName2"><script>I18N("h","Not Available")</script></label></div></td></tr></tbody></table><table class="myTable_index" border="0" id="usbDeviceSpace_Information"><tbody><tr><th><div><script>I18N("h","Available Space")</script>:</div></th><td><div><label id="index_USBDeviceFreeSpace2"><script>I18N("h","Not Available")</script></label></div></td></tr><tr><th><div><script>I18N("h","Total Space")</script>:</div></th><td><div><label id="index_USBDeviceTotalSpace2"><script>I18N("h","Not Available")</script></label></div></td></tr></tbody></table><table class="myTable_index" border="0" id="usbDeviceSpace_Status"><tbody><tr><td><div class="progressBar" id="usb_progressBar2"><div class="bar" id="usb_DeviceSpace2"></div></div></td></tr></tbody></table><table class="myTable_index" border="0" id="usbDeviceSpace_PercentValue2"><tbody><tr><td><div><label id="percent_Value2"></label></div></td></tr></tbody></table></div></div></div><div id="treeViewPop" style="display:none"><div class="dialogBox" style="width:550px;height:400px"><div id="closeCreatePopBtn" onclick="closeTreeViewPOP()" style="cursor:pointer"></div><table class="myCreatePop_table_left" style="width:200px" border="0" cellspacing="0" id="tblTreeView1"><tbody><tr><td><div class="popTitle_s"><script>I18N("h","Disk Name")</script></div></td></tr><td><div id="partitionView" style="overflow:auto;height:350px;width:175px;text-align:left;margin:0 0 0 10px;white-space:nowrap"></div></td></tbody></table><table class="myCreatePop_table_right" style="width:350px" border="0" cellspacing="0" id="tblTreeView2"><tbody><tr><td><div class="popTitle_s"><script>I18N("h","Select Folder")</script></div></td></tr><td><div id="FolderTreeView" style="overflow:auto;height:350px;width:340px;text-align:left;line-height:25px;border-style:groove;white-space:nowrap"><a href="javascript:ReturnBack();" id="rootName" style="margin:0 0 0 10px"></a></div></td></tbody></table></div></div><div id="treeViewPop2" style="display:none"><div class="dialogBox" style="width:550px;height:400px"><div id="closeCreatePopBtn" onclick="closeTreeView2POP()" style="cursor:pointer"></div><table class="myCreatePop_table_left" style="width:200px" border="0" cellspacing="0" id="tblTreeView3"><tbody><tr><td><div class="popTitle_s"><script>I18N("h","Disk Name")</script></div></td></tr><td><div id="partitionView2" style="overflow:auto;height:350px;text-align:left;margin:0 0 0 10px"></div></td></tbody></table><table class="myCreatePop_table_right" style="width:350px" border="0" cellspacing="0" id="tblTreeView4"><tbody><tr><td><div class="popTitle_s"><script>I18N("h","Select Folder")</script></div></td></tr><td><div id="FolderTreeView2" style="overflow:auto;height:350px;width:340px;text-align:left;line-height:25px;border-style:groove;white-space:nowrap"><a href="javascript:ReturnBack2();" id="rootName2" style="margin:0 0 0 10px"></a></div></td></tbody></table></div></div><form name="shareport_c1_form" id="shareport_c1_form" action=""><input id="sumbit_CheckData" class="submit" type="submit" value="Submit" style="display:none"><div id="createPop" style="display:none"><div class="dialogBox" style="width:550px"><div id="closeCreatePopBtn" onclick="clearCreateRulePOP()" style="cursor:pointer"></div><table class="myCreatePop_table" border="0" cellspacing="0" id="tblUserList2"><tbody><tr><td colspan="3"><div class="popTitle"><script>I18N("h","Create New User")</script></div></td></tr><tr><th><script>I18N("h","User Name")</script>:</th><td colspan="2"><input class="styled-text required" type="text" name="shareport_UserName" size="27" maxlength="20" id="shareport_UserName" tabindex="1"></td></tr><tr><th><script>I18N("h","Password")</script>:</th><td colspan="2"><input class="styled-text" type="text" name="shareport_Password" size="27" maxlength="32" id="shareport_Password" tabindex="2"></td></tr><tr><th><script>I18N("h","Permission")</script>:</th><td colspan="2"><div class="styled-select"><select style="width:80px" name="shareport_PermissionSelect" id="shareport_Permission"><option value="1">Read Only</option><option value="2">Read/Write</option></select></div></td></tr><tr><th><script>I18N("h","Folder")</script>:</th><td style="width:150px"><input class="styled-text" type="text" name="shareport_Folder" size="27" id="shareport_Folder" readonly="true"></td><td><button type="button" name="searchFolder" id="searchFolder" class="styled_button_ss" tabindex="3" onclick="GetDirectoryList()"><script>I18N("h","Browse")</script></button></td></tr><tr><td id="save_td" colspan="3"><center><button type="button" class="styled_button_s" id="save_buttonFocus" tabindex="4" onkeyup="focusToFirstIndex(this)" onclick='document.getElementById("sumbit_CheckData").click()'><script>I18N("h","OK")</script></button></center></td></tr></tbody></table></div></div></form><form name="shareport_c2_form" id="shareport_c2_form" action=""><input id="sumbit_CheckData2" class="submit" type="submit" value="Submit" style="display:none"><div id="editPop" style="display:none"><div class="dialogBox" style="width:616px"><div id="closeCreatePopBtn" onclick="clearEditRulePOP()" style="cursor:pointer"></div><table class="myCreatePop_table" border="0" cellspacing="0" id="tblUserList3"><tbody><tr><td colspan="3"><div class="popTitle"><script>I18N("h","Edit User Profile")</script></div></td></tr><tr><th><script>I18N("h","User Name")</script>:</th><td colspan="2"><input class="styled-text required" type="text" name="edit_UserName" size="27" maxlength="20" id="edit_UserName" tabindex="5" onchange="OnChangeUserName(this.value)" disabled="disabled"></td></tr><tr><th><script>I18N("h","Password")</script>:</th><td colspan="2"><input class="styled-text" type="text" name="edit_Password" size="27" maxlength="32" id="edit_Password" tabindex="2"></td></tr><tr><th><script>I18N("h","Permission")</script>:</th><td colspan="2"><div class="styled-select"><select style="width:80px" name="edit_PermissionSelect" id="edit_Permission" onchange="OnChangePermission(this.value)"><option value="1">Read Only</option><option value="2">Read/Write</option></select></div></td></tr><tr><th><script>I18N("h","Folder")</script>:</th><td style="width:150px"><input class="styled-text" type="text" name="edit_Folder" size="27" id="edit_Folder" readonly="true" onchange="OnChangeFolder(this.value)"></td><td><button type="button" name="search_Edit_Folder" id="search_Edit_Folder" class="styled_button_ss" tabindex="6" onclick="GetEditDirectoryList()"><script>I18N("h","Browse")</script></button></td></tr><tr><td id="save_td" colspan="3"><center><button type="button" class="styled_button_s" id="save_buttonFocus2" tabindex="7" onkeyup="focusToFirstIndex(this)" onclick='document.getElementById("sumbit_CheckData2").click()'><script>I18N("h","OK")</script></button></center></td></tr></tbody></table></div></div></form></div><div id="CreatePopAlertMessage" style="display:none"><div id="AlertPopRect"><div id="AlertPopBody"><table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0"><tbody><tr><td><center><div id="Loading_pop_image2"></div></center></td></tr><tr><td><label id="reciprocal_Number"></label></td></tr><tr><td id="dialog_msg_black2"><script>I18N("h","Your changes are being saved.")</script></td></tr></tbody></table></div></div></div><div id="DetectRouterConnection" style="display:none"></div><div id="footer"><div id="copyright"><script>I18N("h","COPYRIGHT")</script></div></div></div><script type="text/javascript" charset="utf-8">$(document).ready(function(){$.validator.addMethod("checkHEXChar",function(e,r){return!!/^[a-zA-Z0-9_-]+$/.test(e)},jQuery.validator.messages.check_IllegalChar),$("#shareport_c1_form, #shareport_c2_form").each(function(e,r){$(r).validate({rules:{shareport_UserName:{required:!0,checkHEXChar:!0},edit_UserName:{required:!0,checkHEXChar:!0}},messages:{shareport_UserName:{required:jQuery.validator.messages.check_UserName},edit_UserName:{required:jQuery.validator.messages.check_UserName}},submitHandler:function(e){"shareport_c1_form"==e.id&&closeCreateUserPOP(),"shareport_c2_form"==e.id&&(closeEditUserPOP(set_Iteration),save_button_changed())},debug:!0})})})</script><script type="text/javascript">Load_HTML(),Initial(),setMenu("menu_Settings"),GetXML(),startTimeout()</script></body></html><!-- svn info: $Revision: 1186 $ $Date: 2018-11-27 17:17:02 +0800 (Tue, 27 Nov 2018) $ --> 
