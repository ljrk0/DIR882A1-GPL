<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3c.org/1999/xhtml"><head><title>D-LINK</title><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="expires" content="0"><link rel="icon" href="/image/dlink-favicon.ico?v=1075792207"><link rel="shortcut icon" href="/image/favicon.ico?v=1075792207" type="image/x-icon"><meta http-equiv="X-UA-Compatible" content="IE=9"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Type" content="text/css"><link rel="stylesheet" type="text/css" href="/css/jquery.selectbox.css?v=1a58d5229c"><link rel="stylesheet" type="text/css" href="/css/jquery.checkbox.css?v=d4c74ef61d"><link rel="stylesheet" type="text/css" href="/css/style_h_test.css?v=ed86f7536c" media="all"><script type="text/javascript" charset="utf-8" src="/js/initialJQ.js?v=72051ca6ec"></script><script type="text/javascript" charset="utf-8" src="/js/initialJS.js?v=49978ee093"></script><script type="text/javascript" charset="utf-8" src="/js/initialCSS.js?v=668496d31b"></script><script type="text/javascript" charset="utf-8" src="/js/initialValidate.js?v=18ad6b1a1d"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPAction.js?v=10137dfbc9"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPQoS.js?v=d99ab74b44"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPTriggerWANBW.js?v=e1b131e773"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPNetworkSettings.js?v=7f32ed9643"></script><link rel="stylesheet" type="text/css" href="css/style_pop.css?v=ebdc1ea095" media="all"><script type="text/javascript" charset="utf-8" src="/js/popView.js?v=28d8d08a05"></script><script type="text/javascript">top!=self&&(top.location=self.location),null===sessionStorage.getItem("PrivateKey")&&window.location.replace("../info/Login.html");var arrayQoS2Dv,array2Dv,downLoadBW,upLoadBW,speedLimit,HNAP=new HNAP_XML,_ReciprocalRebootNumber=80,macList="",deviceMAC="";function LoadMACList(){$.ajax({url:"/js/MacList.json",type:"GET",dataType:"json",success:function(e){macList=e,GetXML()}})}function Base92(e){function t(e){return e+35==92?"!":String.fromCharCode(e+35)}var o=Math.floor(e/92),n=e%92,a="";return a+=92<=o?Base92(o):t(o),a+=t(n)}function getVendor(e){var t,o="Unknown Vendor";if(void 0===macList||""==macList)return o;try{var n=e.split(":"),a=Base92(parseInt(n[0],16)),s=Base92(parseInt(n[1]+n[2],16));void 0===(t=macList[a][s])&&(t=o)}catch(e){t=o}return decode_char_text(t)}function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu(),initialDetectRouterConnection()}LoadMACList();var Total_Clients=0,Total_QoSClients=0,ClientNumber=0;function GetXML(){currentDevice.featureSpeedTest&&getSpeedTestInformation(),getQoSStatus(),HNAP.GetXMLAsync("GetMultipleHNAPs",null,"GetXML",function(e){GetResult_1st(e)})}function GetResult_1st(e){null!=e?(e.Set("GetMultipleHNAPs/GetQoSSettings"),e.Set("GetMultipleHNAPs/GetClientInfo"),e.Set("GetMultipleHNAPs/GetAdvNetworkSettings"),HNAP.SetXMLAsync("GetMultipleHNAPs",e,function(e){GetResult_2nd(e)})):1==DebugMode&&alert("[!!GetXML Error!!] Function: GetResult_1st")}function GetResult_2nd(e){var t=e.Get("GetMultipleHNAPsResponse/GetMultipleHNAPsResult");if("OK"==t||"RESTART"==t){speedLimit="AUTO"==(speedLimit=e.Get("GetMultipleHNAPsResponse/GetAdvNetworkSettingsResponse/WANPortSpeed")).toUpperCase()?1==currentDevice.featureWANSpeed10?1e4:currentDevice.featureWANSpeed5?5e3:currentDevice.featureWANSpeed2point5?2500:1e3:speedLimit.replace(/Mbps/g,"");var o=0;Total_QoSClients=e.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo#"),arrayQoS2Dv=new Array2D_Var(Total_QoSClients,6);for(var n=1;n<=Total_QoSClients;n++){switch(arrayQoS2Dv[o][0]=e.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo:"+n+"/Hostname"),arrayQoS2Dv[o][1]=e.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo:"+n+"/IPAddress"),arrayQoS2Dv[o][2]=e.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo:"+n+"/MACAddress"),e.Get("GetMultipleHNAPsResponse/GetQoSSettingsResponse/QoSInfoList/QoSInfo:"+n+"/Priority")){case"":case"0":arrayQoS2Dv[o][3]="none";break;case"1":arrayQoS2Dv[o][3]="medium";break;case"2":arrayQoS2Dv[o][3]="high";break;case"3":arrayQoS2Dv[o][3]="highest"}arrayQoS2Dv[o][4]="Unknown Vendor",arrayQoS2Dv[o][5]=arrayQoS2Dv[o][0],o++}var a=0,s=0;Total_Clients=e.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo#"),array2Dv=new Array2DVar(Total_Clients,7);for(var i=1;i<=Total_Clients;i++){array2Dv[a][0]=e.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+i+"/DeviceName"),array2Dv[a][1]=decode_char_text(e.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+i+"/NickName")),array2Dv[a][6]=e.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+i+"/Type"),""==array2Dv[a][1]&&(""==array2Dv[a][0]?(array2Dv[a][0]="Unknown",array2Dv[a][1]="Unknown"):array2Dv[a][1]=array2Dv[a][0]),array2Dv[a][2]=e.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+i+"/IPv4Address"),array2Dv[a][3]=e.Get("GetMultipleHNAPsResponse/GetClientInfoResponse/ClientInfoLists/ClientInfo:"+i+"/MacAddress");var r=getVendor(array2Dv[a][3]);19<r.length&&(r=r.substr(0,16)+"..."),array2Dv[a][4]=r;for(var d=0;d<Total_QoSClients;d++){arrayQoS2Dv[d][2]==array2Dv[a][3]&&(arrayQoS2Dv[d][4]=array2Dv[a][4],""==array2Dv[a][0]&&""==array2Dv[a][1]||(arrayQoS2Dv[d][5]=array2Dv[a][1]),setTimeout("addDevice_List("+d+")",100))}array2Dv[a][5]="none";for(var l=0;l<Total_QoSClients;l++)array2Dv[a][3]==arrayQoS2Dv[l][2]&&(s=1);1!=s&&array2Dv[a][6].indexOf("Extender")<0&&setTimeout("addDevice_List2("+a+")",100),s=0,a++}initValidate(),document.getElementById("main").style.display="block"}else 1==DebugMode&&alert("[!!GetXML Error!!] Function: GetResult_2nd")}function addDevice_List(e){addDevice(arrayQoS2Dv[e][5],arrayQoS2Dv[e][4],arrayQoS2Dv[e][1],arrayQoS2Dv[e][3],arrayQoS2Dv[e][2],arrayQoS2Dv[e][0])}function addDevice_List2(e){addDevice(array2Dv[e][1],array2Dv[e][4],array2Dv[e][2],array2Dv[e][5],array2Dv[e][3],array2Dv[e][0])}function Array2DVar(e,t){this.length=e,this.x=e,this.y=t;for(var o=0;o<this.length;o++)this[o]=new Array(t)}function Array2D_Var(e,t){this.length=e,this.x=e,this.y=t;for(var o=0;o<this.length;o++)this[o]=new Array(t)}function save_button_changed(){document.getElementById("Save_Disable_btn").style.display="none",document.getElementById("Save_btn").style.display="block",changeFlag=!0,changeTimeoutAction()}function getQoSStatus(){var e=new SOAPAction;if(1==currentDevice.featureQoSMgmtType){var t=new SOAPGetQoSManagementType;e.sendSOAPAction("GetQoSManagementType",null,t).done(function(e){if($("#id_MGMT_TYPE").selectbox("detach"),1==currentDevice.featureQosManageByApp)switch(e.QoSManagementType){case"Off":document.getElementById("id_MGMT_TYPE").options[0].selected=!0;break;case"ByApplication":document.getElementById("id_MGMT_TYPE").options[1].selected=!0;break;case"ByDevice":document.getElementById("id_MGMT_TYPE").options[2].selected=!0;break;default:document.getElementById("id_MGMT_TYPE").options[0].selected=!0}else switch(e.QoSManagementType){case"Off":document.getElementById("id_MGMT_TYPE").options[0].selected=!0;break;case"ByDevice":document.getElementById("id_MGMT_TYPE").options[1].selected=!0;break;default:document.getElementById("id_MGMT_TYPE").options[0].selected=!0}$("#id_MGMT_TYPE").selectbox("attach")}).fail(function(e){$("#id_MGMT_TYPE").selectbox("detach"),document.getElementById("id_MGMT_TYPE").selectedIndex="0",$("#id_MGMT_TYPE").selectbox("attach")})}var o=new SOAPGetQoSSettings;e.sendSOAPAction("GetQoSSettings",null,o).done(function(e){-1!=e.UploadBandwidth&&(document.getElementById("QoS_UploadSpeed").value=e.UploadBandwidth),-1!=e.DownloadBandwidth&&(document.getElementById("QoS_DownloadSpeed").value=e.DownloadBandwidth)}).fail(function(e){})}function getSpeedTestInformation(){var e=new SOAPAction,t=new SOAPGetNetworkSettingsResponse;e.sendSOAPAction("GetNetworkSettings",null,t).done(function(e){deviceMAC=e.MacAddress.toUpperCase().split(":").join(""),$("#speedCheckupMessage").show(),$("#speedCheckup").show()})}function popupIDialog(){document.getElementById("createPop").style.display="inline"}function closeIDialog(){document.getElementById("createPop").style.display="none"}function openSpeedTestDialog(){null!=$.cookie("speedtestMAC"+deviceMAC)&&RunTest(!0),changeTimeoutAction(),$("#speedTestPop").show()}function RunTest(e){changeTimeoutAction(),null==$.cookie("speedtestMAC"+deviceMAC)&&$.cookie("speedtestMAC"+deviceMAC,"yes",{path:"/",expires:14});var t=new SOAPSetTriggerWANBW,s=new SOAPSetTriggerWANBWResponse,o=new SOAPAction;t.TriggerWANBW=e;var n=o.sendSOAPAction("SetTriggerWANBW",t,s);1==e&&($("#speedTestErrorDialog").hide(),$("#speedTestResultDialog").hide(),$("#privacyNotice").hide(),$("#speedTestWaitDialog").show(),$("#closeSpeedTestPop").hide()),n.done(function(e){if(0<=e.SetTriggerWANBWResult.indexOf("OK_D")){var t=e.SetTriggerWANBWResult.split("_"),o=3;void 0!==t[2]&&(o=parseInt(t[2]),1==isNaN(o)&&(o=3)),setTimeout("RunTest(false)",1e3*o)}else switch(e.SetTriggerWANBWResult){case"OK":var n=parseInt(s.InterfaceBandwidthList.BandwidthRecord[0].UploadBandwidth),a=parseInt(s.InterfaceBandwidthList.BandwidthRecord[0].DownloadBandwidth);upLoadBW=Math.floor(n/1024*100)/100,downLoadBW=Math.floor(a/1024*100)/100,$("#downLoadSpeed").html(downLoadBW),$("#upLoadSpeed").html(upLoadBW),$("#speedTestErrorDialog").hide(),$("#speedTestWaitDialog").hide(),$("#closeSpeedTestPop").show(),$("#speedTestResultDialog").show(),$("#speedTestPop").show();break;case"ERROR_WANLINKDOWN":$("#speedTestErrorDialog").show(),$("#speedTestWaitDialog").hide(),$("#closeSpeedTestPop").show(),$("#speedTestResultDialog").hide(),$("#speedTestPop").show()}}).fail(function(){$("#speedTestErrorDialog").show(),$("#speedTestWaitDialog").hide(),$("#closeSpeedTestPop").show(),$("#speedTestResultDialog").hide(),$("#speedTestPop").show()})}function clearCreateRulePOP(){changeTimeoutAction(),$("#speedTestPop").hide(),$("#privacyNotice").show(),$("#speedTestErrorDialog").hide(),$("#speedTestWaitDialog").hide(),$("#speedTestResultDialog").hide()}function insertBWInfo(){$("#QoS_DownloadSpeed").val(Math.floor(downLoadBW)),$("#QoS_UploadSpeed").val(Math.floor(upLoadBW)),clearCreateRulePOP(),save_button_changed()}$(function(){$("select").change(function(){save_button_changed()}),$("input").keydown(function(){save_button_changed()})})</script><style>#slideshow{margin:0}#itemInstance{width:188px;height:86px;background-image:url(image/qos_itemBg.png?v=fdd083a953);z-index:10}.dataElement{position:relative;background-image:url(image/qos_itemBg.png?v=fdd083a953)}.dataElement_deviceName{position:absolute;top:18px;left:30px;color:#4598aa;font-size:13px;width:140px;overflow:hidden}.dataElement_vendor{position:absolute;text-transform:uppercase;top:38px;left:30px;color:#888;width:140px;overflow:hidden;font-size:12px}.dataElement_ip{position:absolute;top:55px;left:30px;color:#666;width:140px;overflow:hidden;font-size:12px}.dataElement_mac{position:absolute;display:none;top:55px;left:30px;color:#666;width:140px;overflow:hidden;font-size:12px}.dataElement_deviceNameReal{position:absolute;display:none;top:55px;left:30px;color:#666;width:140px;overflow:hidden;font-size:12px}.qos_label{font-size:16px;color:#888;text-align:center}#qos_label_alldevices{margin:18px 0 8px 0}#qos_label_priority{margin:25px 0 20px 0;font-size:12px}#prioity{width:825px;height:400px;margin:0 auto}#prioity_highest{position:relative;display:inline-block;margin:0 2px;width:200px;height:116px;vertical-align:top}#prioity_highest_bg{position:absolute;width:100%;height:100%;background-image:url(image/qos_priority_highest.png?v=1196da81ce);background-size:contain}#prioity_high_bg{position:absolute;width:100%;height:100%;background-image:url(image/qos_priority_high.png?v=2d99876d30);background-size:contain}#prioity_medium_bg{position:absolute;width:100%;height:100%;background-image:url(image/qos_priority_medium.png?v=3f92d75db9);background-size:contain}#prioity_high_label,#prioity_highest_label,#prioity_medium_label{position:absolute;top:4px;left:0;text-align:center;width:100%;color:#fff;font-size:14px}#prioity_high_container,#prioity_highest_container,#prioity_medium_container{position:relative;top:22px;left:6px}#prioity_highest_hitarea{position:absolute;top:0;left:0;width:200px;height:116px;background-color:#00f;z-index:500;opacity:0}#prioity_high{position:relative;display:inline-block;margin:0 2px;width:200px;height:202px;vertical-align:top}#prioity_high_hitarea{position:absolute;top:0;left:0;width:200px;height:202px;background-color:#00f;z-index:500;opacity:0}#prioity_medium{position:relative;display:inline-block;margin:0 2px;width:388px;height:374px;vertical-align:top}#prioity_medium_hitarea{position:absolute;top:0;left:0;width:388px;height:374px;background-color:#00f;z-index:500;opacity:0}.closeCreatePopBtn{cursor:pointer;position:absolute;top:0;right:0;width:26px;height:26px;margin:20px;padding:0;background:url(../image/closeDialog3.png?v=2e2861041a) left top no-repeat;z-index:100;background-size:contain}.downLoadImg{vertical-align:bottom;-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);transform:rotate(90deg)}.upLoadImg{vertical-align:bottom;-ms-transform:rotate(-90deg);-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}</style></head><body onselectstart="return!1" ondragstart="return!1"><form name="qosBandwidth_form" id="qosBandwidtht_form" method="POST" action=""><div id="wrapper"><div id="header"></div><div id="menu"></div><div id="menu_edge"></div><div id="content"><div id="info"><div id="FunctionName">&nbsp;<script>I18N("h","QoS Engine")</script></div><div id="wallimage"><img src="image/page_QoS.png?v=f4322ad5a6" alt="" width="195" height="119"></div><div id="directions"><script>I18N("h","Connected clients can be assigned Internet access priority. Click and drag client cards into open slots.")</script></div></div><div id="funcBar"><div id="pagePath"><script>I18N("h","Advanced")</script>&gt;&gt;<script>I18N("h","QoS Engine")</script></div><ul id="rightFunc"><li style="display:block"><div id="Save_btn" onclick='document.getElementById("sumbit_CheckData").click(),changeTimeoutAction()' style="cursor:pointer;display:none"><script>I18N("h","Save")</script></div></li><input id="sumbit_CheckData" class="submit" type="submit" value="Submit" style="display:none"><li style="display:block"><div id="Save_Disable_btn"><script>I18N("h","Save")</script></div></li></ul></div><div id="div_qosMgmtType" style="margin:20px 0 20px 0"><table class="block" border="0" style="height:0"><tbody><tr id="speedCheckup" style="display:none"><th><script>I18N("h","Internet Speed Checkup")</script>:</th><td><button type="button" class="styled_button_s" onclick="openSpeedTestDialog()" style="width:132px"><script>I18N("h","Check Speed")</script></button></td></tr><tr id="tr_qosMgmtType" style="display:none"><th><script>I18N("h","Management Type")</script>:</th><td><div class="styled-select"><select name="id_MGMT_TYPE" id="id_MGMT_TYPE"><option value="Off">Off</option><option value="ByDevice">Manage By Device</option></select></div></td></tr><tr id="tr_qosDownloadSpeed" style="display:none"><th><script>I18N("h","Download Speed (Mbps)")</script>:</th><td><div><input class="styled-text" style="width:120px" type="text" name="QoS_DownloadSpeed" size="27" maxlength="8" id="QoS_DownloadSpeed"> <img style="height:20px;width:20px;vertical-align:middle" src="/image/Infor2.png?v=966b819ac4" border="0" onclick="popupIDialog()"></div></td></tr><tr id="tr_qosUploadSpeed" style="display:none"><th><script>I18N("h","Upload Speed (Mbps)")</script>:</th><td><div><input class="styled-text" style="width:120px" type="text" name="QoS_UploadSpeed" size="27" maxlength="8" id="QoS_UploadSpeed"></div></td></tr></tbody></table><div id="speedCheckupMessage" style="width:600px;margin:0 auto;text-align:center;color:#888;display:none"><script>I18N("h","Set the download and upload speed based on your ISP subscription plan in order to adjust the QoS engine to provide precise client priorities.")</script></div></div><hr><div id="main" style="display:none"><div id="qos_label_alldevices" class="qos_label"><script>I18N("h","Connected Clients")</script></div><div id="slideshow"></div><div id="qos_label_priority" class="qos_label"><script>I18N("h","Drag the device cards above to the Priority boxes below.")</script></div><div id="prioity"><div id="prioity_highest"><div id="prioity_highest_bg"></div><div id="prioity_highest_label"><script>I18N("h","Highest")</script></div><div id="prioity_highest_container"></div><div id="prioity_highest_hitarea" style="display:none;cursor:pointer" onmouseover='setDraggingTargetPriority("highest")' onmouseout='setDraggingTargetPriority("none")'></div></div><div id="prioity_high"><div id="prioity_high_bg"></div><div id="prioity_highest_label"><script>I18N("h","High")</script></div><div id="prioity_high_container"></div><div id="prioity_high_hitarea" style="display:none;cursor:pointer" onmouseover='setDraggingTargetPriority("high")' onmouseout='setDraggingTargetPriority("none")'></div></div><div id="prioity_medium"><div id="prioity_medium_bg"></div><div id="prioity_medium_label"><script>I18N("h","Medium")</script></div><div id="prioity_medium_container"></div><div id="prioity_medium_hitarea" style="display:none;cursor:pointer" onmouseover='setDraggingTargetPriority("medium")' onmouseout='setDraggingTargetPriority("none")'></div></div></div></div><div id="CreatePopAlertMessage" style="display:none"><div id="AlertPopRect"><div id="AlertPopBody"><table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0"><tbody><tr><td><center><div id="Loading_pop_image2"></div></center></td></tr><tr><td><label id="reciprocal_Number"></label></td></tr><tr><td id="dialog_msg_black2"><script>I18N("h","Your changes are being saved.")</script></td></tr></tbody></table><table class="myAlertPop_table_b" id="SuccessSettings" border="0" cellspacing="0" style="display:none"><tbody><tr><td><center><div id="Information_pop_image"></div></center></td></tr><tr><td><div id="dialog_msg_black"><script>I18N("h","The new settings have been saved.")</script></div></td></tr><tr><td><center><div id="Confirm_btn" onclick="returnToHome()" style="cursor:pointer"><script>I18N("h","OK")</script></div></center></td></tr></tbody></table><table class="myAlertPop_table_b" id="FailedSettings" border="0" cellspacing="0" style="display:none"><tbody><tr><td><center><div id="Error_pop_image"></div></center></td></tr><tr><td><div id="dialog_msg_black"><script>I18N("h","The new settings cannot be saved. Please try again.")</script></div></td></tr><tr><td><center><div id="Confirm_btn" onclick="returnToHome()" style="cursor:pointer"><script>I18N("h","OK")</script></div></center></td></tr></tbody></table></div></div></div><div id="createPop" style="display:none"><div id="dialogBox" style="width:616px;top:180px"><div id="closeCreatePopBtn" onclick="closeIDialog()" style="cursor:pointer"></div><table id="buttonTable" border="0"><tbody><tr colspan="4"><th style="text-align:center;font-weight:400;padding:30px 0 0 0"><script>I18N("h","ISP often specify speed as a download/upload pair; for example 1.5Mbps/0.25Mbps.  You can measure your upload and download speed with a speed test service on the internet.")</script></th></tr><tr colspan="4"><th style="text-align:center;font-weight:400;padding:10px 0 0 0"><script>I18N("h","Note however that sites such as DSL Reports, because they do not consider as many network protocol overheads, will generally slightly lower than the Measured Upload Speed or the ISP rated speed.")</script></th></tr><tr colspan="4"><td style="text-align:center;padding:20px 0 0 0" width="20px"><button type="button" class="styled-button_enable" id="btn_OK" onclick="closeIDialog()"><script>I18N("h","OK")</script></button></td></tr></tbody></table></div></div><div id="speedTestPop" class="createPop_f" style="display:none"><div class="dialogBox" style="width:450px;min-height:250px;top:180px;padding-bottom:60px"><a href="http://www.speedtest.net" target="_blank" style="position:absolute;right:18px;bottom:15px"><img width="235" height="25" src="image/speedtestLogo.png?v=30a130bf79" style="border:0"></a><div id="closeSpeedTestPop" class="closeCreatePopBtn" onclick="clearCreateRulePOP()"></div><div id="privacyNotice"><div style="color:#4598aa;font-weight:700;font-size:20px;margin:10px 0 20px 0"><script>I18N("h","Privacy Notice")</script></div><div style="padding:0 20px;text-align:left;margin-bottom:30px"><script>I18N("h","Ookla collects certain data through Speedtest that may be considered personally identifiable, such as your IP address, unique device identifiers or location. Ookla believes it has a legitimate interest to share this data with internet providers, hardware manufacturers and industry regulators to help them understand and create a better and faster internet. For further information including how the data may be shared, where the data may be transferred and Ookla's contact details, please see our <a href='//www.speedtest.net/privacy' target='_blank' style='color: #4598aa'>Privacy Policy</a>.")</script></div><button type="button" class="styled_button_s" onclick="RunTest(!0)" style="width:180px"><script>I18N("h","OK")</script></button></div><div id="speedTestWaitDialog" style="margin-top:70px;display:none"><img src="image/loading.gif?v=082200f467" width="62px" height="62px"><div id="speedTestWaitMessage"><script>I18N("h","Checking Internet Speed")</script>...</div></div><div id="speedTestErrorDialog" style="margin-top:70px;display:none"><div><script>I18N("h","Service is now busy or not available. Please try again later.")</script></div><div class="speedTestBtn"><button type="button" class="styled_button_s" onclick="RunTest(!0)" style="display:block;margin:30px auto 0;width:180px"><script>I18N("h","Detect Again")</script></button></div></div><div id="speedTestResultDialog" style="display:none"><div style="color:#4598aa;font-weight:700;font-size:20px;margin:10px 0 20px 0"><script>I18N("h","Your Internet Speed")</script></div><div><div class="speedTestResult left" style="float:left;width:50%"><div><img src="image/gotosettings.png?v=04e7b0f464" alt="" width="23" height="23" class="downLoadImg"> <span><script>I18N("h","DOWNLOAD")</script></span></div><span id="downLoadSpeed" style="font-size:26px;font-weight:700;margin-left:50px">0</span> <span style="color:#888">Mbps</span></div><div class="speedTestResult right"><img src="image/gotosettings.png?v=04e7b0f464" alt="" width="23" height="23" class="upLoadImg"> <span><script>I18N("h","UPLOAD")</script></span></div><span id="upLoadSpeed" style="margin-left:75px;font-size:26px;font-weight:700">0</span> <span style="color:#888">Mbps</span></div><div class="speedTestBtn"><button type="button" class="styled_button_s" onclick="RunTest(!0)" style="display:block;margin:30px auto 0;width:180px"><script>I18N("h","Detect Again")</script></button> <button type="button" class="styled_button_s" onclick="insertBWInfo()" style="display:block;margin:10px auto;width:180px"><script>I18N("h","Apply to QoS")</script></button></div></div></div></div><div id="DetectRouterConnection" style="display:none"></div><div id="footer"><div id="copyright"><script>I18N("h","COPYRIGHT")</script></div></div></div></div><div id="itemInstance" style="position:absolute;top:0;left:0;display:none;cursor:pointer"><div class="data"><div class="dataElement_deviceName" id="itemInstance_deviceName"></div><div class="dataElement_vendor" id="itemInstance_vendor"></div><div class="dataElement_ip" id="itemInstance_ip"></div><div class="dataElement_mac" id="itemInstance_mac"></div><div class="dataElement_deviceNameReal" id="itemInstance_deviceNameReal"></div></div></div><div id="popalert" class="black_overlay" style="display:none"><div class="popup_window_border" style="position:relative;top:15%"><div class="popup_window"><div id="popalert_circle"><img src="image/loading.gif?v=082200f467" width="62px" height="62px"></div><div id="popalert_countdown"></div><div id="popalert_title" style="display:none"></div><div id="popalert_InformationIMG" style="display:none"></div><div id="popalert_desc"></div><div id="popalert_buttons" class="btn-group" role="group" aria-label="..."><button type="button" id="popalert_ok" class="btn btn-default"><script>I18N("h","OK")</script></button> <button type="button" id="popalert_cancel" class="btn btn-default"><script>I18N("h","Cancel")</script></button></div></div></div></div></form><script type="text/javascript" charset="utf-8" src="./js/Slideshow.js?v=c2086a1a27"></script><script type="text/javascript" charset="utf-8" src="./js/GridPanel.js?v=33a6810625"></script><script>var mousex=0,mousey=0,itemMouseOffsetX=0,itemMouseOffsetY=0,instance=document.getElementById("itemInstance"),isDraggingItem=!1,dragginItemData=null,targetPriority="",deviceData=function(e,t,i,n,a,o){this.deviceName=e,this.vendor=t,this.ip=i,this.mac=a,this.priority=n,this.deviceNameReal=o,this.element,this.element=document.createElement("div"),this.element.style.width="188px",this.element.style.height="86px",this.element.style.fontSize="12px",this.element.style.cursor="pointer",this.element.style.verticalAlign="top",this.element.style.margin="0 6px",this.element.className="dataElement",this.element.onmouseover=function(){this.style.backgroundPosition="bottom left"},this.element.onmouseout=function(){this.style.backgroundPosition="top left"},this.element_deviceName=document.createElement("div"),this.element_deviceName.className="dataElement_deviceName",this.element_deviceName.innerHTML=e,this.element_vendor=document.createElement("div"),this.element_vendor.className="dataElement_vendor",this.element_vendor.innerHTML=t,this.element_ip=document.createElement("div"),this.element_ip.className="dataElement_ip",this.element_ip.innerHTML=i,this.element_mac=document.createElement("div"),this.element_mac.className="dataElement_mac",this.element_mac.innerHTML=a,this.element_deviceNameReal=document.createElement("div"),this.element_deviceNameReal.className="dataElement_deviceNameReal",this.element_deviceNameReal.innerHTML=o,this.element.appendChild(this.element_deviceName),this.element.appendChild(this.element_vendor),this.element.appendChild(this.element_ip),this.element.appendChild(this.element_mac),this.element.appendChild(this.element_deviceNameReal),"none"!=n&&(this.element.style.width="0px",this.element.style.opacity="0",this.element.style.filter="alpha(opacity=0)",this.element.style.margin="0",this.element_deviceName.style.display="none",this.element_vendor.style.display="none",this.element_ip.style.display="none");var s=this;this.setPriority=function(e){s.priority=e},this.element.onmousedown=function(){if("none"==s.priority){$(this.element).stop();var e=getElementXY(this);itemMouseOffsetX=e.x-mousex,itemMouseOffsetY=e.y-mousey,document.getElementById("itemInstance_deviceName").innerHTML=s.deviceName,document.getElementById("itemInstance_vendor").innerHTML=s.vendor,document.getElementById("itemInstance_ip").innerHTML=s.ip,document.getElementById("itemInstance_mac").innerHTML=s.mac,document.getElementById("itemInstance_deviceNameReal").innerHTML=s.deviceNameReal,s.hideElement_noAnimation(),instance.style.top=e.y+"px",instance.style.left=e.x+"px",instance.style.display="block",startDrag(s)}},this.element.addEventListener&&this.element.addEventListener("touchstart",function(e){if("none"==s.priority){$(this.element).stop();var t=getElementXY(this);itemMouseOffsetX=t.x-e.changedTouches[0].pageX,itemMouseOffsetY=t.y-e.changedTouches[0].pageY,document.getElementById("itemInstance_deviceName").innerHTML=s.deviceName,document.getElementById("itemInstance_vendor").innerHTML=s.vendor,document.getElementById("itemInstance_ip").innerHTML=s.ip,document.getElementById("itemInstance_mac").innerHTML=s.mac,document.getElementById("itemInstance_deviceNameReal").innerHTML=s.deviceNameReal,s.hideElement_noAnimation(),instance.style.top=t.y+"px",instance.style.left=t.x+"px",instance.style.display="block",startDrag(s)}}),this.showElement_backToSlideshow=function(){mySlideshow.putAndSlideToLast(s.element,function(){$(s.element).stop(),$(s.element).animate({opacity:1,width:"188px"},300),s.element.style.cursor="pointer",s.element.style.margin="0 6px",s.element_deviceName.style.display="block",s.element_vendor.style.display="block",s.element_ip.style.display="block",s.element_mac.style.display="none",s.element_deviceNameReal.style.display="none"})},this.showElement_noAnimation=function(){s.element.style.width="188px",$(s.element).css({opacity:1}),s.element.style.opacity=1,s.element.style.margin="0 6px",s.element.style.cursor="pointer",s.element_deviceName.style.display="block",s.element_vendor.style.display="block",s.element_ip.style.display="block",s.element_mac.style.display="none",s.element_deviceNameReal.style.display="none"},this.hideElement=function(){$(s.element).stop(),$(s.element).animate({width:"0px",margin:"0px"},300),s.element.style.cursor="default",s.element_deviceName.style.display="none",s.element_vendor.style.display="none",s.element_ip.style.display="none",s.element_mac.style.display="none",s.element_deviceNameReal.style.display="none",mySlideshow.updateToLastPage()},this.hideElement_noAnimation=function(){s.element.style.opacity="0",$(s.element).css({opacity:0}),s.element_deviceName.style.display="none",s.element_vendor.style.display="none",s.element_ip.style.display="none",s.element_mac.style.display="none",s.element_deviceNameReal.style.display="none"}},deviceDataArray=new Array,createDeviceData=function(e,t,i,n,a,o){var s=new deviceData(e,t,i,n,a,o);return deviceDataArray.push(s),s},mySlideshow=new Slideshow("slideshow");function startDrag(e){isDraggingItem=!0,dragginItemData=e,document.getElementById("prioity_highest_hitarea").style.display="block",document.getElementById("prioity_high_hitarea").style.display="block",document.getElementById("prioity_medium_hitarea").style.display="block"}function endDrag(){isDraggingItem=!1,document.getElementById("prioity_highest_hitarea").style.display="none",document.getElementById("prioity_high_hitarea").style.display="none",document.getElementById("prioity_medium_hitarea").style.display="none",$("#prioity_highest_bg").stop(),$("#prioity_highest_bg").stop(),$("#prioity_highest_bg").stop(),$("#prioity_highest_bg").animate({opacity:1},200),$("#prioity_high_bg").animate({opacity:1},200),$("#prioity_medium_bg").animate({opacity:1},200)}function mouseup(){if(isDraggingItem){switch(targetPriority){case"highest":if(!priorityGrid_highest.isFull()&&!priorityGrid_highest.existData(dragginItemData))return addDataToPriorityGrid(dragginItemData,priorityGrid_highest,"highest"),void endDrag();break;case"high":if(!priorityGrid_high.isFull()&&!priorityGrid_high.existData(dragginItemData))return addDataToPriorityGrid(dragginItemData,priorityGrid_high,"high"),void endDrag();break;case"medium":if(!priorityGrid_medium.isFull()&&!priorityGrid_medium.existData(dragginItemData))return addDataToPriorityGrid(dragginItemData,priorityGrid_medium,"medium"),void endDrag();break;default:endDrag()}var e=getElementXY(dragginItemData.element);$(instance).animate({top:e.y,left:e.x},200,function(){instance.style.display="none",dragginItemData.showElement_noAnimation()}),endDrag()}}function checkIfInElement(e,t,i){var n=getElementXY(i),a=parseInt(getStyle(i,"width").replace("px","")),o=parseInt(getStyle(i,"height").replace("px",""));return e>n.x&&e<n.x+a&&t>n.y&&t<n.y+o}function getStyle(e,t){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i=e.currentStyle[t]),i}function addDataToPriorityGrid(e,t,i){var n=t.nextCellPosition();$(instance).animate({top:n.y,left:n.x},100,function(){instance.style.display="none",t.addData(e),e.setPriority(i),e.hideElement(),save_button_changed(),changeFlag=!0,changeTimeoutAction()})}function setDraggingTargetPriority(e){if(isDraggingItem)switch(targetPriority=e){case"highest":$("#prioity_highest_bg").stop(),$("#prioity_high_bg").stop(),$("#prioity_medium_bg").stop(),$("#prioity_highest_bg").animate({opacity:1},200),$("#prioity_high_bg").animate({opacity:.5},200),$("#prioity_medium_bg").animate({opacity:.5},200);break;case"high":$("#prioity_highest_bg").stop(),$("#prioity_high_bg").stop(),$("#prioity_medium_bg").stop(),$("#prioity_highest_bg").animate({opacity:.5},200),$("#prioity_high_bg").animate({opacity:1},200),$("#prioity_medium_bg").animate({opacity:.5},200);break;case"medium":$("#prioity_highest_bg").stop(),$("#prioity_high_bg").stop(),$("#prioity_medium_bg").stop(),$("#prioity_highest_bg").animate({opacity:.5},200),$("#prioity_high_bg").animate({opacity:.5},200),$("#prioity_medium_bg").animate({opacity:1},200);break;case"none":$("#prioity_highest_bg").stop(),$("#prioity_high_bg").stop(),$("#prioity_medium_bg").stop(),$("#prioity_highest_bg").animate({opacity:.5},200),$("#prioity_high_bg").animate({opacity:.5},200),$("#prioity_medium_bg").animate({opacity:.5},200)}}document.body.onmousemove=function(e){mousex=event.clientX+document.body.scrollLeft,mousey=event.clientY+document.body.scrollTop,isDraggingItem&&(instance.style.top=mousey+itemMouseOffsetY+"px",instance.style.left=mousex+itemMouseOffsetX+"px")},window.onmousemove=function(e){mousex=e.clientX,mousey=e.clientY,isDraggingItem&&(instance.style.top=mousey+itemMouseOffsetY+"px",instance.style.left=mousex+itemMouseOffsetX+"px")},document.body.onmouseup=function(e){mouseup()},window.onmouseup=function(e){mouseup()},document.addEventListener&&document.addEventListener("touchmove",function(e){(mousex=e.changedTouches[0].pageX,mousey=e.changedTouches[0].pageY,isDraggingItem)&&(e.preventDefault(),instance.style.top=mousey+itemMouseOffsetY+"px",instance.style.left=mousex+itemMouseOffsetX+"px",checkIfInElement(mousex,mousey,document.getElementById("prioity_highest_hitarea"))?setDraggingTargetPriority("highest"):checkIfInElement(mousex,mousey,document.getElementById("prioity_high_hitarea"))?setDraggingTargetPriority("high"):setDraggingTargetPriority(checkIfInElement(mousex,mousey,document.getElementById("prioity_medium_hitarea"))?"medium":"none"))}),document.addEventListener&&document.addEventListener("touchend",function(e){mouseup()});var InstanceObject=function(){this.deviceName="none",this.vendor="none",this.ip="none",this.mac="none",this.deviceNameReal="none",this.element,this.delete_btn,this.status,this.parent,this.deviceData,this.element=document.createElement("div"),this.element.style.width="188px",this.element.style.height="86px",this.element.style.fontSize="12px",this.element.className="dataElement",this.element.style.cursor="default";var t=document.createElement("div");t.className="dataElement_deviceName",t.innerHTML=this.deviceName;var i=document.createElement("div");i.className="dataElement_vendor",i.innerHTML=this.vendor;var n=document.createElement("div");n.className="dataElement_ip",n.innerHTML=this.ip;var a=document.createElement("div");a.className="dataElement_mac",a.innerHTML=this.mac;var o=document.createElement("div");o.className="dataElement_deviceNameReal",o.innerHTML=this.deviceNameReal;var e=document.createElement("div");e.style.position="absolute",e.style.top="15px",e.style.right="14px",e.style.width="13px",e.style.height="13px",e.style.backgroundImage="url('image/slideshow_closeBtn.png?v=dfab904569')",e.style.cursor="pointer",this.element.appendChild(t),this.element.appendChild(i),this.element.appendChild(n),this.element.appendChild(a),this.element.appendChild(o),this.element.appendChild(e);var s=this;e.onclick=function(){s.deviceData.setPriority("none"),s.deviceData.showElement_backToSlideshow(),s.parent.removeData(s.deviceData),save_button_changed(),changeFlag=!0,changeTimeoutAction()},this.setDeviceData=function(e){s.deviceData=e,t.innerHTML=e.deviceName,i.innerHTML=e.vendor,n.innerHTML=e.ip,a.innerHTML=e.mac,o.innerHTML=e.deviceNameReal},this.removeDeviceData=function(){s.deviceData=null,t.innerHTML="none",i.innerHTML="none",n.innerHTML="none",a.innerHTML="none",o.innerHTML="none"},this.show=function(){$(this.element).css({opacity:1}),this.element.style.opacity=1,t.style.display="block",i.style.display="block",n.style.display="block",e.style.display="block"},this.hide=function(){$(this.element).css({opacity:0}),this.element.style.opacity=0,t.style.display="none",i.style.display="none",n.style.display="none",e.style.display="none"}},priorityGrid_highest=new GridPanel(1,1,"prioity_highest_container"),highestInstance=new InstanceObject;priorityGrid_highest.addInstance(highestInstance);for(var priorityGrid_high=new GridPanel(2,1,"prioity_high_container"),i=0;i<2;i++){var _instance=new InstanceObject;priorityGrid_high.addInstance(_instance)}var priorityGrid_medium=new GridPanel(4,2,"prioity_medium_container");for(i=0;i<8;i++){_instance=new InstanceObject;priorityGrid_medium.addInstance(_instance)}function addDevice(e,t,i,n,a,o){var s=createDeviceData(e,t,i,n,a,o);switch(mySlideshow.addItem(s),n){case"highest":priorityGrid_highest.isFull()?s.setPriority("none"):priorityGrid_highest.addData(s);break;case"high":priorityGrid_high.isFull()?s.setPriority("none"):priorityGrid_high.addData(s);break;case"medium":priorityGrid_medium.isFull()?s.setPriority("none"):priorityGrid_medium.addData(s)}}function getElementXY(e){for(var t=0,i=0;null!=e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{x:t,y:i}}function getMousePosition(e){return isIE||(e.pageX,e.pageY),isIE&&(event.clientX+document.body.scrollLeft,event.clientY+document.body.scrollTop),!0}function SetXML(){var e=I18N("j","Please wait")+" ...";PopView.show(e),HNAP.GetXMLAsync("SetQoSSettings",null,"GetXML",function(e){SetResult_1st(e)})}function SetResult_1st(e){if(null!=e){var t=new SOAPAction,i=new SOAPSetQoSManagementType,n=document.getElementById("id_MGMT_TYPE").value;if(1==currentDevice.featureQoSMgmtType){switch(n){case"Off":i.QoSManagementType="Off";break;case"ByApplication":i.QoSManagementType="ByApplication";break;case"ByDevice":i.QoSManagementType="ByDevice"}t.sendSOAPAction("SetQoSManagementType",i,null).done(function(e){}).fail(function(e){document.getElementById("waitSettingFinish").style.display="none",document.getElementById("FailedSettings").style.display="inline"})}var a=new SOAPSetQoSSettings;a.UploadBandwidth=document.getElementById("QoS_UploadSpeed").value,a.DownloadBandwidth=document.getElementById("QoS_DownloadSpeed").value;for(var o=new SOAPQoSInfoLists,s=o.QoSInfo.length=0;s<deviceDataArray.length;s++){var l=new SOAPQoSInfo;switch(l.Hostname=deviceDataArray[s].deviceNameReal,l.IPAddress=deviceDataArray[s].ip,l.MACAddress=deviceDataArray[s].mac,deviceDataArray[s].priority){case"highest":l.Priority=3;break;case"high":l.Priority=2;break;case"medium":l.Priority=1;break;case"none":l.Priority=0}l.Type="TC_WFQ",o.QoSInfo.push(l)}a.QoSInfoData=o,t.sendSOAPAction("SetQoSSettings",a,null).done(function(e){if("OK"==e.SetQoSSettingsResult||"RESTART"==e.SetQoSSettingsResult){var t=I18N("j","Please wait")+" ...",i=I18N("j","The new settings have been saved.");PopView.showWithCountdown(t,currentDevice.okcount).always(function(){PopView.showConfirm(i).done(function(){waitSettingFinished()})})}else"REBOOT"==e.SetQoSSettingsResult?Device_Reboot():"ERROR"==e.SetQoSSettingsResult&&(1==DebugMode&&alert("[!!SetXML Error!!] Function: SetResult_2nd"),window.location.reload())}).fail(function(e){})}else 1==DebugMode&&alert("[!!SetXML Error!!] Function: SetResult_1st")}function SetResult_2nd(e){var t=e.Get("SetQoSSettingsResponse/SetQoSSettingsResult");"OK"==t||"RESTART"==t?waitSettingFinished():"REBOOT"==t?Device_Reboot():"ERROR"==t&&(1==DebugMode&&alert("[!!SetXML Error!!] Function: SetResult_2nd"),window.location.reload())}function Device_Reboot(){HNAP.GetXMLAsync("Reboot",null,"GetXML",function(e){GetResult_Reboot(e)})}function GetResult_Reboot(e){null!=e&&HNAP.SetXMLAsync("Reboot",e,function(e){SetResult_Reboot(e)})}function SetResult_Reboot(e){var t=e.Get("RebootResponse/RebootResult");if("OK"==t||"REBOOT"==t||"RESTART"==t){var i=I18N("j","Rebooting"),n=I18N("j","The new settings have been saved.");PopView.showWithCountdown(i,_ReciprocalRebootNumber).always(function(){PopView.showConfirm(n).done(function(){redirectPage(null)})})}}function Start_reciprocal_Number_Reboot(){0<=_ReciprocalRebootNumber?(document.getElementById("reciprocal_Number").innerHTML=_ReciprocalRebootNumber+" "+I18N("j","Sec"),_ReciprocalRebootNumber--,setTimeout("Start_reciprocal_Number_Reboot()",1e3)):redirectPage(null)}function waitSettingFinished(){window.location.reload()}function returnToHome(){window.location.reload()}function CheckConnectionStatus(){$.ajax({cache:!1,url:"./js/CheckConnection",timeout:5e3,type:"GET",success:function(e){SetXML()},error:function(){document.getElementById("DetectRouterConnection").style.display="inline"}})}function getAllDeviceStatus(){for(var e=0;e<deviceDataArray.length;e++){var t=deviceDataArray[e].deviceName,i=deviceDataArray[e].vendor,n=deviceDataArray[e].ip,a=deviceDataArray[e].priority,o=deviceDataArray[e].mac,s=deviceDataArray[e].deviceNameReal;alert("name:      "+t+"\nvendor:   "+i+"\nip:            "+n+"\npriority:   "+a+"\nmac:   "+o+"\ndeviceNameReal:   "+s)}}document.onkeydown=function(e){(e=e||window.event).charCode||e.keyCode}</script><script type="text/javascript">$(document).ready(function(){if(Load_HTML(),$("#id_MGMT_TYPE").selectbox(),Initial(),setMenu("menu_Advanced"),startTimeout(),1==currentDevice.featureQoSMgmtType&&$("#tr_qosMgmtType").show(),1==currentDevice.featureQoSSpeed&&($("#tr_qosDownloadSpeed").show(),$("#tr_qosUploadSpeed").show()),1==currentDevice.featureQosManageByApp){$("#id_MGMT_TYPE").selectbox("detach");var e=document.getElementById("id_MGMT_TYPE"),t=document.createElement("option");t.innerHTML="Manage By Application",t.value="ByApplication",e.add(t,e[1]),$("#id_MGMT_TYPE").selectbox("attach")}})</script><script type="text/javascript" charset="utf-8">function initValidate(){$.validator.addMethod("checkNumberValue",function(e,r){var a=$(r).attr("id"),t=!0;if(/^[0-9]+(\.[0-9]{1,3})?$/.test(e))switch(e<=0&&(t=!1),a){case"QoS_UploadSpeed":case"QoS_DownloadSpeed":(e<1||e>Number(speedLimit))&&(t=!1)}else t=!1;return t},I18N("j","Please enter a value between 1 and %d",speedLimit)),$("#qosBandwidtht_form").validate({rules:{QoS_UploadSpeed:{required:!0,checkNumberValue:!0},QoS_DownloadSpeed:{required:!0,checkNumberValue:!0}},messages:{QoS_UploadSpeed:{required:jQuery.validator.messages.number},QoS_DownloadSpeed:{required:jQuery.validator.messages.number}},submitHandler:function(e){CheckConnectionStatus()},errorPlacement:function(e,r){var a=r.parent();e.insertAfter(a).css({color:"#f00","font-size":"14px","font-weight":"normal"})},skipBr:function(e){return 0!=e.parent("div").length}})}</script></body></html><!-- svn info: $Revision: 1236 $ $Date: 2018-12-11 18:18:39 +0800 (Tue, 11 Dec 2018) $ --> 
