<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3c.org/1999/xhtml"><head><title>D-LINK</title><meta http-equiv="cache-control" content="no-cache"><meta http-equiv="expires" content="0"><link rel="icon" href="/image/dlink-favicon.ico?v=1075792207"><link rel="shortcut icon" href="/image/favicon.ico?v=1075792207" type="image/x-icon"><meta http-equiv="X-UA-Compatible" content="IE=9"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="Content-Type" content="text/css"><link rel="stylesheet" type="text/css" href="/css/jquery.selectbox.css?v=1a58d5229c"><link rel="stylesheet" type="text/css" href="/css/jquery.checkbox.css?v=d4c74ef61d"><link rel="stylesheet" type="text/css" href="css/style_pages.css?v=99eab4966a" media="all"><script type="text/javascript" charset="utf-8" src="/js/initialJQ.js?v=72051ca6ec"></script><script type="text/javascript" charset="utf-8" src="/js/initialJS.js?v=49978ee093"></script><script type="text/javascript" charset="utf-8" src="/js/initialValidate.js?v=18ad6b1a1d"></script><script type="text/javascript" charset="utf-8" src="/js/VLAN.js?v=962fa8d70e"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPAction.js?v=10137dfbc9"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPVLAN.js?v=d6cf9de100"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPWanSettings.js?v=40ec20b96f"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPNetworkSettings.js?v=7f32ed9643"></script><script type="text/javascript" charset="utf-8" src="/js/SOAP/SOAPWLanRadio.js?v=9c71ea07ac"></script><link rel="stylesheet" type="text/css" href="css/style_pop.css?v=ebdc1ea095" media="all"><script type="text/javascript" charset="utf-8" src="/js/popView.js?v=28d8d08a05"></script><script>top!=self&&(top.location=self.location),null===sessionStorage.getItem("PrivateKey")&&window.location.replace("../info/Login.html"),$(document).ready(function(){currentDevice.threeGFailover&&$("#internet_IPoE").show(),currentDevice.featureCloseVLANWireless&&($("#WLAN_Item").hide(),$("#WLANGuestZone_Item").hide()),1==currentDevice.featureLanPort&&$("#LANPort1_title").html(I18N("j","LAN Port")+":");for(var e=4;e>currentDevice.featureLanPort;e--)$("#LanPort"+e+"_Item").hide();$("#enableVLAN").on("click",function(){$(this).prop("checked")?$("#vlan_setting").css({display:"inline"}):$("#vlan_setting").css({display:"none"}),changeFlag=!0,save_button_changed()}),$("#enablePriority").on("click",function(){$(this).prop("checked")?$("#vlan_setting .pid").show():$("#vlan_setting .pid").hide(),changeFlag=!0,save_button_changed()})})</script><script type="text/javascript">var datalist,datalistRule,getNetworkSettingsResponse,_ReciprocalNumber=25,CountryCode="",serviceAndInterface=function(){var d;function t(e){this.countryList=e.countryCode.split(","),this.country="",this.selectBox=e.selectBox,this.hasData=!1}var n={getData:function(e){var a=this;d=new t(e),$.ajax({cache:!1,url:"/js/VLANProfile.json",type:"GET",dataType:"json",async:!1,success:function(e){var t,n=-1;for(n=0;n<d.countryList.length&&1!=d.hasData;n++)if(""!=d.countryList[n]&&"NA"!=d.countryList[n])for(t in e.RegionalProfiles)if(d.countryList[n]==t){d.country=d.countryList[n],a.convertData(e.RegionalProfiles[t]),d.hasData=!0;break}}})},convertData:function(e){var t=-1,n=e.VLANLists;for(d.newDataList={},t=0;t<n.length;t++)d.newDataList[n[t].Name]={},d.newDataList[n[t].Name].Internet=n[t].VLAN.Internet,d.newDataList[n[t].Name].IPTV=n[t].VLAN.IPTV,d.newDataList[n[t].Name].VOIP=n[t].VLAN.VOIP,d.newDataList[n[t].Name]["Designated LAN Port"]=n[t]["Designated LAN Port"]},addSelect:function(){var e,t=[],n=-1;for(e in d.newDataList)t.push(e);for(t.sort(),n=0;n<t.length;n++)$(d.selectBox).append('<option value="'+t[n]+'">'+t[n]+"&nbsp;</option>");d.newDataList.Others={Internet:[0,0],IPTV:[0,0],VOIP:[0,0]},$(d.selectBox).append('<option value="Others">'+I18N("j","Others")+"&nbsp;</option>")},selectChange:function(){var n=this,a=d.newDataList,o=$("#internetVlanId"),i=$("#internet_pid"),r=$("#iptvVlanId"),l=$("#iptv_pid"),s=$("#voipVlanId"),c=$("#voip_pid");$(d.selectBox).change(function(){$("#enablePriority").prop("checked",!0),$("#vlan_setting .pid").show();var e=new Object;for(var t in e.width=100,a)$(d.selectBox).val()==t&&(i.selectbox("detach"),l.selectbox("detach"),c.selectbox("detach"),o.val(a[t].Internet[0]),r.val(a[t].IPTV[0]),s.val(a[t].VOIP[0]),i.val(a[t].Internet[1]),l.val(a[t].IPTV[1]),c.val(a[t].VOIP[1]),i.selectbox(e),l.selectbox(e),c.selectbox(e),i.selectbox("attach"),l.selectbox("attach"),c.selectbox("attach"));$("#lan_port1").val("Internet"),$("#lan_port2").val("Internet"),$("#lan_port3").val("Internet"),$("#lan_port4").val("Internet"),"Others"!=$(d.selectBox).val()&&null!=d.newDataList[$(d.selectBox).val()]["Designated LAN Port"].VOIP&&$("#lan_port"+d.newDataList[$(d.selectBox).val()]["Designated LAN Port"].VOIP).val("VOIP"),"Others"!=$(d.selectBox).val()&&null!=d.newDataList[$(d.selectBox).val()].IPTV&&$("#lan_port"+d.newDataList[$(d.selectBox).val()]["Designated LAN Port"].IPTV).val("IPTV"),$("#internet_form").validate().element(o),$("#internet_form").validate().element(r),$("#internet_form").validate().element(s),n.othersControl(),n.interfaceChange()})},othersControl:function(){"Others"!=$(d.selectBox).val()?($("#enablePriority").prop("checked")||($("#enablePriority").prop("checked"),$("#vlan_setting .pid").show()),$("#enablePriority").prop("disabled",!0),$("#internetVlanId").prop("disabled",!0),$("#iptvVlanId").prop("disabled",!0),$("#voipVlanId").prop("disabled",!0),$("#internet_pid").selectbox("disable"),$("#iptv_pid").selectbox("disable"),$("#voip_pid").selectbox("disable")):($("#enablePriority").prop("disabled",!1),$("#internetVlanId").prop("disabled",!1),$("#iptvVlanId").prop("disabled",!1),$("#voipVlanId").prop("disabled",!1),$("#internet_pid").selectbox("enable"),$("#iptv_pid").selectbox("enable"),$("#voip_pid").selectbox("enable"))},interfaceChange:function(){var e=this,t=$("#internetVlanId"),n=$("#iptvVlanId"),a=$("#voipVlanId"),o=["lan_port1","lan_port2","lan_port3","lan_port4","wifi","wifi_guestZone"];if(t.val(t.val().replace(/\s/g,"")),n.val(n.val().replace(/\s/g,"")),a.val(a.val().replace(/\s/g,"")),"0"==t.val()&&"0"==n.val()&&"0"==a.val())for(var i in o)$("#"+o[i]).selectbox("detach"),$("#"+o[i]+' > option[value="Bridge"]').hide(),$("#"+o[i]+' > option[value="Internet"]').show(),currentDevice.featureVLANVID0Support?($("#"+o[i]+' > option[value="IPTV"]').show(),$("#"+o[i]+' > option[value="VOIP"]').show()):($("#"+o[i]+' > option[value="IPTV"]').hide(),$("#"+o[i]+' > option[value="VOIP"]').hide()),e.checkInterfaceSelect(o[i]),$("#"+o[i]).selectbox("attach");else if("0"==t.val()&&"0"==n.val()&&"0"!=a.val())for(var i in o)$("#"+o[i]).selectbox("detach"),$("#"+o[i]+' > option[value="Bridge"]').hide(),$("#"+o[i]+' > option[value="Internet"]').show(),currentDevice.featureVLANVID0Support?$("#"+o[i]+' > option[value="IPTV"]').show():$("#"+o[i]+' > option[value="IPTV"]').hide(),$("#"+o[i]+' > option[value="VOIP"]').show(),e.checkInterfaceSelect(o[i]),$("#"+o[i]).selectbox("attach");else if("0"==t.val()&&"0"!=n.val()&&"0"==a.val())for(var i in o)$("#"+o[i]).selectbox("detach"),$("#"+o[i]+' > option[value="Bridge"]').hide(),$("#"+o[i]+' > option[value="Internet"]').show(),$("#"+o[i]+' > option[value="IPTV"]').show(),currentDevice.featureVLANVID0Support?$("#"+o[i]+' > option[value="VOIP"]').show():$("#"+o[i]+' > option[value="VOIP"]').hide(),e.checkInterfaceSelect(o[i]),$("#"+o[i]).selectbox("attach");else if("0"==t.val()&&"0"!=n.val()&&"0"!=a.val())for(var i in o)$("#"+o[i]).selectbox("detach"),$("#"+o[i]+' > option[value="Bridge"]').hide(),$("#"+o[i]+' > option[value="Internet"]').show(),$("#"+o[i]+' > option[value="IPTV"]').show(),$("#"+o[i]+' > option[value="VOIP"]').show(),e.checkInterfaceSelect(o[i]),$("#"+o[i]).selectbox("attach");else if("0"!=t.val()&&"0"==n.val()&&"0"==a.val())for(var i in o)$("#"+o[i]).selectbox("detach"),$("#"+o[i]+' > option[value="Bridge"]').show(),$("#"+o[i]+' > option[value="Internet"]').show(),$("#"+o[i]+' > option[value="IPTV"]').hide(),$("#"+o[i]+' > option[value="VOIP"]').hide(),e.checkInterfaceSelect(o[i]),$("#"+o[i]).selectbox("attach");else if("0"!=t.val()&&"0"==n.val()&&"0"!=a.val())for(var i in o)$("#"+o[i]).selectbox("detach"),$("#"+o[i]+' > option[value="Bridge"]').hide(),$("#"+o[i]+' > option[value="Internet"]').show(),$("#"+o[i]+' > option[value="IPTV"]').show(),$("#"+o[i]+' > option[value="VOIP"]').show(),e.checkInterfaceSelect(o[i]),$("#"+o[i]).selectbox("attach");else if("0"!=t.val()&&"0"!=n.val()&&"0"==a.val())for(var i in o)$("#"+o[i]).selectbox("detach"),$("#"+o[i]+' > option[value="Bridge"]').hide(),$("#"+o[i]+' > option[value="Internet"]').show(),$("#"+o[i]+' > option[value="IPTV"]').show(),$("#"+o[i]+' > option[value="VOIP"]').show(),e.checkInterfaceSelect(o[i]),$("#"+o[i]).selectbox("attach");else for(var i in o)$("#"+o[i]).selectbox("detach"),$("#"+o[i]+' > option[value="Bridge"]').hide(),$("#"+o[i]+' > option[value="Internet"]').show(),$("#"+o[i]+' > option[value="IPTV"]').show(),$("#"+o[i]+' > option[value="VOIP"]').show(),e.checkInterfaceSelect(o[i]),$("#"+o[i]).selectbox("attach")},checkInterfaceSelect:function(e){var t=$("#"+e),n=$("#"+e+' > option[value="'+t.val()+'"]');""!=t.val()&&null!=t.val()&&"none"!=n.css("display")||t.val("Internet")}};return{setting:function(e){return n.getData(e),this},selectSetting:function(){return d.hasData&&(n.addSelect(),n.selectChange(),$(d.selectBox).selectbox("attach"),$(d.selectBox).closest("tr").show()),this},interFaceSelect:function(){return currentDevice.featureServiceProvider&&d.hasData&&n.othersControl(),n.interfaceChange(),$("#internetVlanId, #iptvVlanId, #voipVlanId").on("keyup",function(){n.interfaceChange()}),this}}}();function Load_HTML(){$("#header").load("header.html")}function Initial(){initialMenu(),datalist=new Datalist,datalistRule=new DatalistRule}function String_UC(e){return e=e.toUpperCase()}function GetXML(){if(currentDevice.featureVlanAdvanced||currentDevice.featureServiceProvider){var e=new SOAPAction,o=new SOAPGetWLanRadiosResponse;e.sendSOAPAction("GetWLanRadios",null,o).done(function(){for(var e=0;e<o.RadioInfos.RadioInfo.length;e++){var t="",n=o.RadioInfos.RadioInfo[e].CountryCode;if("RADIO_2.4GHz"!=o.RadioInfos.RadioInfo[e].RadioID){n=(n=(n=n.replace(/\//g,"")).replace(/\,/g,"")).replace(/\s/g,"");for(var a=0;a<Math.floor(n.length/2);a++)t+=n.substr(2*a,2)+",";CountryCode+=t}}currentDevice.featureVlanAdvanced&&(0<=CountryCode.indexOf("EU")||0<=CountryCode.indexOf("GB"))?($(".advButton").show(),_ReciprocalNumber=35):$(".advButton").hide(),currentDevice.featureServiceProvider&&serviceAndInterface.setting({countryCode:CountryCode,selectBox:"#ServiceProvider"}).selectSetting(),GetXML2()})}else GetXML2()}function GetXML2(){var f=new SOAPGetVLANSettings,e=new SOAPAction,t=new SOAPGetWanSettings,h=new SOAPGetWanSettingsResponse,n=new SOAPAction;t.WANID="WAN02";var a=new SOAPGetWanSettings,S=new SOAPGetWanSettingsResponse,o=new SOAPAction;a.WANID="WAN03",getNetworkSettingsResponse=new SOAPGetNetworkSettingsResponse;var i=new SOAPAction;e.sendSOAPAction("GetVLANSettings",null,f).then(function(){var e=$.Deferred();return currentDevice.featureVlanAdvanced&&(0<=CountryCode.indexOf("EU")||0<=CountryCode.indexOf("GB"))?n.sendSOAPAction("GetWanSettings",t,h).done(function(){e.resolve()}):e.resolve(),e.promise()}).then(function(){var e=$.Deferred();return currentDevice.featureVlanAdvanced&&(0<=CountryCode.indexOf("EU")||0<=CountryCode.indexOf("GB"))?o.sendSOAPAction("GetWanSettings",a,S).done(function(){e.resolve()}):e.resolve(),e.promise()}).then(function(){var e=$.Deferred();return i.sendSOAPAction("GetNetworkSettings",null,getNetworkSettingsResponse).done(function(){e.resolve()}),e.promise()}).then(function(){if("true"==f.Enabled){$("#enableVLAN").prop("checked",!0),document.getElementById("vlan_setting").style.display="inline";var e=f.ISPName;""==e&&(e="Others");var t=f.VLANIDInfoLists.VLANID,n=f.VLANRuleInfoLists.VLANRule;for(var a in currentDevice.featureServiceProvider&&($("#ServiceProvider").selectbox("detach"),$("#ServiceProvider").val(e),$("#ServiceProvider").selectbox("attach")),t){var o=(I=t[a]).Service,i=I.Priority,r=I.VID,l=I.Tagged,s=I.VendorClass;"Internet"==o?(document.getElementById("internetVlanId").value=r,document.getElementById("internet_pid").value=i):"VOIP"==o?(document.getElementById("voipVlanId").value=r,document.getElementById("voip_pid").value=i,document.getElementById("deviceVendorClass_VOIP").value=s):"IPTV"==o&&(document.getElementById("iptvVlanId").value=r,document.getElementById("iptv_pid").value=i,document.getElementById("deviceVendorClass_IPTV").value=s);var c=new Data(o,r,i,l,s);datalist.push(c)}for(var d in n){var v=(V=n[d]).Interface,u=V.ServiceMapping;"LAN1"==v?$("#lan_port1").val(u):"LAN2"==v?$("#lan_port2").val(u):"LAN3"==v?$("#lan_port3").val(u):"LAN4"==v?$("#lan_port4").val(u):"WLAN"==v?$("#wifi").val(u):"WLANGuestZone"==v&&$("#wifi_guestZone").val(u);var p=new DataRule(v,u);datalistRule.push(p)}}else{$("#enableVLAN").prop("checked",!1),document.getElementById("vlan_setting").style.display="none",currentDevice.featureServiceProvider&&($("#ServiceProvider").selectbox("detach"),$("#ServiceProvider").val("Others"),$("#ServiceProvider").selectbox("attach"));t=f.VLANIDInfoLists.VLANID,n=f.VLANRuleInfoLists.VLANRule;for(var a in t){var I;o=(I=t[a]).Service,i=I.Priority,r=I.VID,l=I.Tagged,s=I.VendorClass;"VOIP"==o?document.getElementById("deviceVendorClass_VOIP").value=s:"IPTV"==o&&(document.getElementById("deviceVendorClass_IPTV").value=s);c=new Data(o,r,i,l,s);datalist.push(c)}for(var d in n){var V;v=(V=n[d]).Interface,u=V.ServiceMapping,p=new DataRule(v,u);datalistRule.push(p)}}if("true"==f.PriorityEnabled?$("#enablePriority").prop("checked",!0):($("#enablePriority").prop("checked",!1),$("#vlan_setting .pid").hide()),currentDevice.featureVlanAdvanced&&(0<=CountryCode.indexOf("EU")||0<=CountryCode.indexOf("GB"))){switch(h.Type){case"BridgedOnly":$("#IptvConnectionType").val(1);break;case"Static":$("#IptvConnectionType").val(2);break;case"DHCP":$("#IptvConnectionType").val(3);break;default:$("#IptvConnectionType").val(1)}switch($("#iPAddress_IPTV").val(h.IPAddress),$("#subnetMask_IPTV").val(h.SubnetMask),$("#defaultGateway_IPTV").val(h.Gateway),$("#primaryDNSAddress_IPTV").val(h.ConfigDNS.Primary),$("#secondaryDNSAddress_IPTV").val(h.ConfigDNS.Secondary),$("#MulticastStreams_IPTV").prop("checked",COMM_ToBOOL(h.IGMPProxyEnabled)),S.Type){case"BridgedOnly":$("#VoipConnectionType").val(1);break;case"Static":$("#VoipConnectionType").val(2);break;case"DHCP":$("#VoipConnectionType").val(3);break;default:$("#VoipConnectionType").val(1)}$("#iPAddress_VOIP").val(S.IPAddress),$("#subnetMask_VOIP").val(S.SubnetMask),$("#defaultGateway_VOIP").val(S.Gateway),$("#primaryDNSAddress_VOIP").val(S.ConfigDNS.Primary),$("#secondaryDNSAddress_VOIP").val(S.ConfigDNS.Secondary),$("#MulticastStreams_VOIP").prop("checked",COMM_ToBOOL(S.IGMPProxyEnabled)),ConnectionType_changed()}var P=new Object;P.width=100,$("#internet_pid").selectbox(P),$("#iptv_pid").selectbox(P),$("#voip_pid").selectbox(P),$("#ServiceProvider").selectbox(),$("#lan_port1").selectbox(),$("#lan_port2").selectbox(),$("#lan_port3").selectbox(),$("#lan_port4").selectbox(),$("#wifi").selectbox(),$("#wifi_guestZone").selectbox(),$("#VoipConnectionType").selectbox(),$("#IptvConnectionType").selectbox(),serviceAndInterface.interFaceSelect(),document.getElementById("main").style.display="inline"})}function CheckConnectionStatus(){var e=$.makeArray(["internetVlanId","iptvVlanId","voipVlanId"]);$.map(e,function(e,t){$("#"+e).val(clearcode($("#"+e).val()))}),$.ajax({cache:!1,url:"./js/CheckConnection",timeout:5e3,type:"GET",success:function(e){SetXML()},error:function(){document.getElementById("DetectRouterConnection").style.display="inline"}})}function SetXML(){var e=I18N("j","Please wait")+" ...";PopView.show(e);var n=new SOAPAction,a=new SOAPSetVLANSettings,t=new SOAPAction,o=new SOAPSetWanSettings;o.WANID="WAN02";var i=new SOAPAction,r=new SOAPSetWanSettings;if(r.WANID="WAN03",$("#enableVLAN").prop("checked")){currentDevice.featureServiceProvider&&null!=$("#ServiceProvider").val()&&(a.ISPName=$("#ServiceProvider").val());var l=$("#enablePriority").prop("checked");a.PriorityEnabled=l?"true":"false",a.Enabled="true";for(var s=(u=new SOAPVLANIDInfoLists).VLANID.length=0;s<datalist.length();s++){var c=datalist.list[s].service;"Internet"==((I=new SOAPVLANID).Service=c)?(I.VID=document.getElementById("internetVlanId").value,l&&(I.Priority=document.getElementById("internet_pid").value),I.Tagged=datalist.list[s].tagged,I.VendorClass=datalist.list[s].vendorClass):"IPTV"==c?(I.VID=document.getElementById("iptvVlanId").value,l&&(I.Priority=document.getElementById("iptv_pid").value),I.Tagged=datalist.list[s].tagged,I.VendorClass=document.getElementById("deviceVendorClass_IPTV").value):"VOIP"==c&&(I.VID=document.getElementById("voipVlanId").value,l&&(I.Priority=document.getElementById("voip_pid").value),I.Tagged=datalist.list[s].tagged,I.VendorClass=document.getElementById("deviceVendorClass_VOIP").value),u.VLANID.push(I)}a.VLANIDInfoLists=u;for(var d=(p=new SOAPVLANRuleInfoLists).VLANRule.length=0;d<datalistRule.length();d++){var v=datalistRule.list[d].interface_;"LAN1"==((V=new SOAPVLANRule).Interface=v)?V.ServiceMapping=document.getElementById("lan_port1").value:"LAN2"==v?V.ServiceMapping=document.getElementById("lan_port2").value:"LAN3"==v?V.ServiceMapping=document.getElementById("lan_port3").value:"LAN4"==v?V.ServiceMapping=document.getElementById("lan_port4").value:"WLAN"==v?V.ServiceMapping=document.getElementById("wifi").value:"WLANGuestZone"==v&&(V.ServiceMapping=document.getElementById("wifi_guestZone").value),p.VLANRule.push(V)}a.VLANRuleInfoLists=p}else{var u,p;currentDevice.featureServiceProvider&&(a.ISPName="Others"),a.Enabled="false",a.PriorityEnabled="false";for(s=(u=new SOAPVLANIDInfoLists).VLANID.length=0;s<datalist.length();s++){var I;c=datalist.list[s].service;(I=new SOAPVLANID).Service=c,I.VID="",I.Priority="",I.Tagged=datalist.list[s].tagged,"Internet"==c?I.VendorClass=datalist.list[s].vendorClass:"IPTV"==c?I.VendorClass=document.getElementById("deviceVendorClass_IPTV").value:"VOIP"==c&&(I.VendorClass=document.getElementById("deviceVendorClass_VOIP").value),u.VLANID.push(I)}a.VLANIDInfoLists=u;for(d=(p=new SOAPVLANRuleInfoLists).VLANRule.length=0;d<datalistRule.length();d++){var V;v=datalistRule.list[d].interface_;(V=new SOAPVLANRule).Interface="",V.ServiceMapping="",p.VLANRule.push(V)}a.VLANRuleInfoLists=p}currentDevice.featureVlanAdvanced&&(0<=CountryCode.indexOf("EU")||0<=CountryCode.indexOf("GB"))&&(o.MaxIdleTime="",o.MTU="",o.AutoReconnect="",o.IGMPProxyEnabled=$("#MulticastStreams_IPTV").prop("checked"),o.MLDProxyEnabled=$("#MulticastStreams_IPTV").prop("checked"),1==$("#IptvConnectionType").val()?o.Type="BridgedOnly":(2==$("#IptvConnectionType").val()?(o.Type="Static",o.IPAddress=$("#iPAddress_IPTV").val(),o.SubnetMask=$("#subnetMask_IPTV").val(),o.Gateway=$("#defaultGateway_IPTV").val()):o.Type="DHCP",o.ConfigDNS.Primary=$("#primaryDNSAddress_IPTV").val(),o.ConfigDNS.Secondary=$("#secondaryDNSAddress_IPTV").val()),r.MaxIdleTime="",r.MTU="",r.AutoReconnect="",r.IGMPProxyEnabled=$("#MulticastStreams_VOIP").prop("checked"),r.MLDProxyEnabled=$("#MulticastStreams_VOIP").prop("checked"),1==$("#VoipConnectionType").val()?r.Type="BridgedOnly":(2==$("#VoipConnectionType").val()?(r.Type="Static",r.IPAddress=$("#iPAddress_VOIP").val(),r.SubnetMask=$("#subnetMask_VOIP").val(),r.Gateway=$("#defaultGateway_VOIP").val()):r.Type="DHCP",r.ConfigDNS.Primary=$("#primaryDNSAddress_VOIP").val(),r.ConfigDNS.Secondary=$("#secondaryDNSAddress_VOIP").val())),currentDevice.featureVlanAdvanced&&(0<=CountryCode.indexOf("EU")||0<=CountryCode.indexOf("GB"))?t.sendSOAPAction("SetWanSettings",o,null).then(function(){var e=$.Deferred();return i.sendSOAPAction("SetWanSettings",r,null).done(function(){e.resolve()}),e.promise()}).then(function(){var t=$.Deferred();return n.sendSOAPAction("SetVLANSettings",a,null).done(function(e){t.resolve(e)}),t.promise()}).then(function(e){"OK"==e.SetVLANSettingsResult||"RESTART"==e.SetVLANSettingsResult?Start_reciprocal_Number_RestoreConfiguration(!1):"REBOOT"==e.SetVLANSettingsResult?Start_reciprocal_Number_RestoreConfiguration(!0):location.reload()}):n.sendSOAPAction("SetVLANSettings",a,null).done(function(e){"OK"==e.SetVLANSettingsResult||"RESTART"==e.SetVLANSettingsResult?Start_reciprocal_Number_RestoreConfiguration(!1):"REBOOT"==e.SetVLANSettingsResult?Start_reciprocal_Number_RestoreConfiguration(!0):location.reload()}).fail(function(){location.reload()})}function waitSettingFinished(){window.location.reload()}function Start_reciprocal_Number_RestoreConfiguration(e){var t=I18N("j","Please wait")+" ...",n=I18N("j","The new settings have been saved."),a=currentDevice.internetCountdown_VLAN,o=new SOAPAction;1==e&&(t=I18N("j","Your changes are being saved, and the device will need to reboot."),a=currentDevice.rebootcount,o.sendSOAPAction("Reboot",null,null)),PopView.showWithCountdown(t,a).always(function(){PopView.showConfirm(n).done(function(){location.reload()})})}function returnToHome(){window.location.reload()}function CheckString(e,t){e.value=e.value.replace(/\s/g,"")}function save_button_changed(){document.getElementById("Save_Disable_btn").style.display="none",document.getElementById("Save_btn").style.display="block",changeFlag=!0,changeTimeoutAction()}function ConnectionType_changed(){1==$("#IptvConnectionType").val()?$("#iPAddress_IPTV, #subnetMask_IPTV, #defaultGateway_IPTV, #primaryDNSAddress_IPTV, #secondaryDNSAddress_IPTV, #deviceVendorClass_IPTV").closest("tr").hide():2==$("#IptvConnectionType").val()?$("#iPAddress_IPTV, #subnetMask_IPTV, #defaultGateway_IPTV, #primaryDNSAddress_IPTV, #secondaryDNSAddress_IPTV, #deviceVendorClass_IPTV").closest("tr").show():($("#iPAddress_IPTV, #subnetMask_IPTV, #defaultGateway_IPTV").closest("tr").hide(),$("#primaryDNSAddress_IPTV, #secondaryDNSAddress_IPTV, #deviceVendorClass_IPTV").closest("tr").show()),1==$("#VoipConnectionType").val()?$("#iPAddress_VOIP, #subnetMask_VOIP, #defaultGateway_VOIP, #primaryDNSAddress_VOIP, #secondaryDNSAddress_VOIP, #deviceVendorClass_VOIP").closest("tr").hide():2==$("#VoipConnectionType").val()?$("#iPAddress_VOIP, #subnetMask_VOIP, #defaultGateway_VOIP, #primaryDNSAddress_VOIP, #secondaryDNSAddress_VOIP, #deviceVendorClass_VOIP").closest("tr").show():($("#iPAddress_VOIP, #subnetMask_VOIP, #defaultGateway_VOIP").closest("tr").hide(),$("#primaryDNSAddress_VOIP, #secondaryDNSAddress_VOIP, #deviceVendorClass_VOIP").closest("tr").show())}$(function(){$("select, .chkbox").change(function(){save_button_changed()}),$("input").keydown(function(){save_button_changed()}),$("#VoipConnectionType").on("change",function(){$("#advancedBlock_VOIP label.error").hide(),$("#advancedBlock_VOIP .error").removeClass("error"),ConnectionType_changed()}),$("#IptvConnectionType").on("change",function(){$("#advancedBlock_IPTV label.error").hide(),$("#advancedBlock_IPTV .error").removeClass("error"),ConnectionType_changed()})})</script></head><body><form name="internet_form" id="internet_form" method="POST" action=""><div id="wrapper"><div id="header"></div><div id="menu"></div><div id="menu_edge"></div><div id="content"><div id="info"><div id="FunctionName"><script>I18N("h","Internet")</script></div><div id="wallimage"><img src="image/page_vlan.png?v=22c79dc801" alt="" width="195" height="119"></div><div id="directions"><script>I18N("h","A Triple-Play (VLAN) is a switched network that is logically segmented by function, project team, or application, without regard to the physical location of the users. You can configure which hardware port will be assigned to a VLAN, and all packets from a network device in a VLAN will only be forwarded to other devices in the same VLAN.")</script></div></div><div id="funcBar"><div id="pagePath"><script>I18N("h","Settings")</script>&gt;&gt;<script>I18N("h","Internet")</script>&gt;&gt;<script>I18N("h","VLAN")</script></div><ul id="rightFunc"><li style="display:block"><div id="Save_btn" onclick='document.getElementById("sumbit_CheckData").click(),changeTimeoutAction()' style="cursor:pointer;display:none"><script>I18N("h","Save")</script></div></li><li style="display:block"><div id="Save_Disable_btn"><script>I18N("h","Save")</script></div></li><input id="sumbit_CheckData" class="submit" type="submit" value="Submit" style="display:none"><li style="display:block"><a href="javascript:CheckHTMLStatus('Internet');" style="text-decoration:none" onclick="return confirmExit()"><div id="page_btn" class="linkstyle_1"><script>I18N("h","IPv4")</script></div></a></li><li style="display:block"><a href="javascript:CheckHTMLStatus('Internet_IPv6');" style="text-decoration:none" onclick="return confirmExit()"><div id="page_btn" class="linkstyle_1"><script>I18N("h","IPv6")</script></div></a></li><li id="internet_IPoE" style="display:none"><a href="javascript:CheckHTMLStatus('Internet_IPoE');" style="text-decoration:none" onclick="return confirmExit()"><div id="page_btn" class="linkstyle_1"><script>I18N("h","IPoE")</script></div></a></li></ul></div><br><div id="main" style="display:none"><table class="block" style="margin-bottom:0"><tr><td colspan="2"><div class="title"><script>I18N("h","Triple-Play")</script></div></td></tr><tr><th><script>I18N("h","Status")</script>:</th><td><input type="checkbox" class="chkbox" id="enableVLAN"><label for="enableVLAN"><span class="chkbox_disabled"><script>I18N("h","Disabled")</script></span><span class="chkbox_enabled"><script>I18N("h","Enabled")</script></span></label></td></tr></table><div id="vlan_setting" style="display:none"><table class="block"><tbody><tr style="display:none"><th><script>I18N("h","Internet Service Provider")</script>:</th><td><div class="styled-select"><select name="ServiceProvider" id="ServiceProvider"></select></div></td></tr><tr><th><script>I18N("h","Priority ID")</script>:</th><td><input type="checkbox" class="chkbox" id="enablePriority"><label for="enablePriority"><span class="chkbox_disabled"><script>I18N("h","Disabled")</script></span><span class="chkbox_enabled"><script>I18N("h","Enabled")</script></span></label></td></tr></tbody></table><hr><table class="block"><tbody><tr><td colspan="2"><div class="title"><script>I18N("h","Internet VLAN")</script></div></td></tr><tr><th><script>I18N("h","Internet VLAN ID")</script>:</th><td><input class="styled-text" type="text" name="internetVlanId" size="4" id="internetVlanId" value="0"></td><th class="pid"><script>I18N("h","Priority ID")</script>:</th><td class="pid"><div class="styled-select"><select name="internet_pid" id="internet_pid"><option value="0" selected="selected">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option></select></div></td></tr></tbody></table><hr><table class="block"><tbody><tr><td colspan="2"><div class="title"><script>I18N("h","IPTV VLAN")</script></div></td></tr><tr><th><script>I18N("h","IPTV VLAN ID")</script>:</th><td><input class="styled-text" type="text" name="iptvVlanId" size="4" id="iptvVlanId" value="0"></td><th class="pid"><script>I18N("h","Priority ID")</script>:</th><td class="pid"><div class="styled-select"><select name="iptv_pid" id="iptv_pid"><option value="0" selected="selected">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option></select></div></td></tr></tbody></table><div class="advButton" style="display:none"><span onclick='showAdv("advancedBlock_IPTV")'><script>I18N("h","Advanced Settings")</script>...</span></div><div id="advancedBlock_IPTV" style="display:none"><hr><table class="block"><tr><th><script>I18N("h","IPTV Connection is")</script>:</th><td><div class="styled-select"><select name="IptvConnectionType" id="IptvConnectionType"><option value="1">Bridge</option><option value="2">Static IP</option><option value="3">Dynamic IP (DHCP)</option></select></div></td></tr><tr><th><script>I18N("h","IP Address")</script>:</th><td><input class="styled-text" type="text" name="iPAddress_IPTV" size="27" maxlength="15" id="iPAddress_IPTV" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Subnet Mask")</script>:</th><td><input class="styled-text" type="text" name="subnetMask_IPTV" size="27" maxlength="15" id="subnetMask_IPTV" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Default Gateway")</script>:</th><td><input class="styled-text" type="text" name="defaultGateway_IPTV" size="27" maxlength="15" id="defaultGateway_IPTV" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Devices Vendor Class")</script>:</th><td><input class="styled-text" type="text" name="deviceVendorClass_IPTV" size="27" id="deviceVendorClass_IPTV"></td></tr><tr><th><script>I18N("h","Primary DNS Server")</script>:</th><td><input class="styled-text" type="text" name="primaryDNSAddress_IPTV" size="27" maxlength="15" id="primaryDNSAddress_IPTV" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Secondary DNS Server")</script>:</th><td><input class="styled-text" type="text" name="secondaryDNSAddress_IPTV" size="27" maxlength="15" id="secondaryDNSAddress_IPTV" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Multicast Streams")</script>:</th><td><input type="checkbox" class="chkbox" id="MulticastStreams_IPTV"><label for="MulticastStreams_IPTV"><span class="chkbox_disabled"><script>I18N("h","Disabled")</script></span><span class="chkbox_enabled"><script>I18N("h","Enabled")</script></span></label></td></tr></table></div><hr><table class="block"><tbody><tr><td colspan="2"><div class="title"><script>I18N("h","VOIP VLAN")</script></div></td></tr><tr><th><script>I18N("h","VOIP VLAN ID")</script>:</th><td><input class="styled-text" type="text" name="voipVlanId" size="4" id="voipVlanId" value="0"></td><th class="pid"><script>I18N("h","Priority ID")</script>:</th><td class="pid"><div class="styled-select"><select name="voip_pid" id="voip_pid"><option value="0" selected="selected">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option></select></div></td></tr></tbody></table><div class="advButton" style="display:none"><span onclick='showAdv("advancedBlock_VOIP")'><script>I18N("h","Advanced Settings")</script>...</span></div><div id="advancedBlock_VOIP" style="display:none"><hr><table class="block"><tr><th><script>I18N("h","VOIP Connection is")</script>:</th><td><div class="styled-select"><select name="VoipConnectionType" id="VoipConnectionType"><option value="1">Bridge</option><option value="2">Static IP</option><option value="3">Dynamic IP (DHCP)</option></select></div></td></tr><tr><th><script>I18N("h","IP Address")</script>:</th><td><input class="styled-text" type="text" name="iPAddress_VOIP" size="27" maxlength="15" id="iPAddress_VOIP" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Subnet Mask")</script>:</th><td><input class="styled-text" type="text" name="subnetMask_VOIP" size="27" maxlength="15" id="subnetMask_VOIP" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Default Gateway")</script>:</th><td><input class="styled-text" type="text" name="defaultGateway_VOIP" size="27" maxlength="15" id="defaultGateway_VOIP" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Devices Vendor Class")</script>:</th><td><input class="styled-text" type="text" name="deviceVendorClass_VOIP" size="27" id="deviceVendorClass_VOIP"></td></tr><tr><th><script>I18N("h","Primary DNS Server")</script>:</th><td><input class="styled-text" type="text" name="primaryDNSAddress_VOIP" size="27" maxlength="15" id="primaryDNSAddress_VOIP" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Secondary DNS Server")</script>:</th><td><input class="styled-text" type="text" name="secondaryDNSAddress_VOIP" size="27" maxlength="15" id="secondaryDNSAddress_VOIP" onchange="CheckString(this,this.value)"></td></tr><tr><th><script>I18N("h","Multicast Streams")</script>:</th><td><input type="checkbox" class="chkbox" id="MulticastStreams_VOIP"><label for="MulticastStreams_VOIP"><span class="chkbox_disabled"><script>I18N("h","Disabled")</script></span><span class="chkbox_enabled"><script>I18N("h","Enabled")</script></span></label></td></tr></table></div><hr><table class="block"><tr><td colspan="2"><div class="title"><script>I18N("h","Interface Traffic Type Setting")</script></div></td></tr><tr><th id="LANPort1_title"><script>I18N("h","LAN Port 1")</script>:</th><td><div class="styled-select"><select name="lan_port1" id="lan_port1"><option value="Bridge">Bridge</option><option value="Internet" selected="selected">Internet</option><option value="IPTV">IPTV</option><option value="VOIP">VOIP</option></select></div></td></tr><tr id="LanPort2_Item"><th><script>I18N("h","LAN Port 2")</script>:</th><td><div class="styled-select"><select name="lan_port2" id="lan_port2"><option value="Bridge">Bridge</option><option value="Internet" selected="selected">Internet</option><option value="IPTV">IPTV</option><option value="VOIP">VOIP</option></select></div></td></tr><tr id="LanPort3_Item"><th><script>I18N("h","LAN Port 3")</script>:</th><td><div class="styled-select"><select name="lan_port3" id="lan_port3"><option value="Bridge">Bridge</option><option value="Internet" selected="selected">Internet</option><option value="IPTV">IPTV</option><option value="VOIP">VOIP</option></select></div></td></tr><tr id="LanPort4_Item"><th><script>I18N("h","LAN Port 4")</script>:</th><td><div class="styled-select"><select name="lan_port4" id="lan_port4"><option value="Bridge">Bridge</option><option value="Internet" selected="selected">Internet</option><option value="IPTV">IPTV</option><option value="VOIP">VOIP</option></select></div></td></tr><tr id="WLAN_Item"><th><script>I18N("h","Wireless")</script>:</th><td><div class="styled-select"><select name="wifi" id="wifi"><option value="Bridge">Bridge</option><option value="Internet" selected="selected">Internet</option><option value="IPTV">IPTV</option><option value="VOIP">VOIP</option></select></div></td></tr><tr id="WLANGuestZone_Item"><th><script>I18N("h","Wireless Guest Zone")</script>:</th><td><div class="styled-select"><select name="wifi_guestZone" id="wifi_guestZone"><option value="Bridge">Bridge</option><option value="Internet" selected="selected">Internet</option><option value="IPTV">IPTV</option><option value="VOIP">VOIP</option></select></div></td></tr></table></div></div><div id="CreatePopAlertMessage" style="display:none"><div id="AlertPopRect"><div id="AlertPopBody"><table class="myAlertPop_table_b" id="waitSettingFinish" border="0" cellspacing="0"><tbody><tr><td><center><div id="Loading_pop_image2"></div></center></td></tr><tr><td><label id="reciprocal_Number"></label></td></tr><tr><td id="dialog_msg_black2"><script>I18N("h","Your changes are being saved.")</script></td></tr></tbody></table><table class="myAlertPop_table_b" id="SuccessSettings" border="0" cellspacing="0" style="display:none"><tbody><tr><td><center><div id="Information_pop_image"></div></center></td></tr><tr><td><div id="dialog_msg_black"><script>I18N("h","The new settings have been saved.")</script></div></td></tr><tr><td><center><div id="Confirm_btn" onclick="returnToHome()" style="cursor:pointer"><script>I18N("h","OK")</script></div></center></td></tr></tbody></table><table class="myAlertPop_table_b" id="FailedSettings" border="0" cellspacing="0" style="display:none"><tbody><tr><td><center><div id="Error_pop_image"></div></center></td></tr><tr><td><div id="dialog_msg_black"><script>I18N("h","The new settings cannot be saved. Please try again.")</script></div></td></tr><tr><td><center><div id="Confirm_btn" onclick="returnToHome()" style="cursor:pointer"><script>I18N("h","OK")</script></div></center></td></tr></tbody></table></div></div></div><div id="DetectRouterConnection" style="display:none"></div><div id="footer"><div id="copyright"><script>I18N("h","COPYRIGHT")</script></div></div></div></div><div id="popalert" class="black_overlay" style="display:none"><div class="popup_window_border" style="position:relative;top:15%"><div class="popup_window"><div id="popalert_circle"><img src="image/loading.gif?v=082200f467" width="62px" height="62px"></div><div id="popalert_countdown"></div><div id="popalert_title" style="display:none"></div><div id="popalert_InformationIMG" style="display:none"></div><div id="popalert_desc"></div><div id="popalert_buttons" class="btn-group" role="group" aria-label="..."><button type="button" id="popalert_ok" class="btn btn-default"><script>I18N("h","OK")</script></button> <button type="button" id="popalert_cancel" class="btn btn-default"><script>I18N("h","Cancel")</script></button></div></div></div></div></form><script type="text/javascript" charset="utf-8">$(document).ready(function(){$.validator.addMethod("checkSetValues",function(e,r){var a=r.id;if($("#enableVLAN").prop("checked")&&/(^[0-9]+$)/.test(e)){if("internetVlanId"==a){if(""==e||null==e||!COMM_IsDigit(e))return!1;if(e<0||4094<e||1==e)return!1}if("iptvVlanId"==a){if(""==e||null==e||!COMM_IsDigit(e))return!1;if(e<0||4094<e||1==e)return!1}if("voipVlanId"==a){if(""==e||null==e||!COMM_IsDigit(e))return!1;if(e<0||4094<e||1==e)return!1}}return!0},""),$.validator.addMethod("checkSetValues2",function(e,r){if($("#enableVLAN").prop("checked")){if(!/(^[0-9\,]+$)/.test(e))return!1;if(0<=e.indexOf(",")&&(0==e.indexOf("0")||0<=e.indexOf(",0")))return!1}return!0},""),$.validator.addMethod("vlanvlauedifferent",function(e,r){var a=r.id,t=$("#internetVlanId").val(),n=$("#iptvVlanId").val(),i=$("#voipVlanId").val();if(currentDevice.featureIdenticalVID)return!0;if($("#enableVLAN").prop("checked")){if("internetVlanId"==a&&(t==n&&"0"!=t||t==i&&"0"!=t))return!1;if("iptvVlanId"==a&&(n==t&&"0"!=n||n==i&&"0"!=n))return!1;if("voipVlanId"==a&&(i==t&&"0"!=i||i==n&&"0"!=i))return!1}return!0},I18N("j","VLAN ID cannot be the same.")),$.validator.addMethod("checkWANip",function(e,r){var a=getNetworkSettingsResponse.SubnetMask,t=COMM_IPv4MASK2INT(a),n=getNetworkSettingsResponse.IPAddress;return COMM_IPv4NETWORK(n,t)!=COMM_IPv4NETWORK(e,t)},jQuery.validator.messages.checkIPv6WanLanConflict),$.validator.addMethod("requireddns",function(e,r){var a=!0;return"primaryDNSAddress_IPTV"==r.id?"3"!=$("#IptvConnectionType").val()&&""==e&&(a=!1):"3"!=$("#VoipConnectionType").val()&&""==e&&(a=!1),a},I18N("j","Please enter a primary dns server")),$.validator.addMethod("checkip",function(e,r){var a=!0;return""!=e&&(COMM_ValidV4Addr(e)||(a=!1)),a},I18N("j","Please enter a valid IP address. (e.g. 192.168.0.1)")),$("#internet_form").validate({rules:{iPAddress_IPTV:{checkWANip:!0,checkip:!0},iPAddress_VOIP:{checkWANip:!0,checkip:!0},primaryDNSAddress_IPTV:{requireddns:!0,checkip:!0},primaryDNSAddress_VOIP:{requireddns:!0,checkip:!0},secondaryDNSAddress_IPTV:{checkip:!0},secondaryDNSAddress_VOIP:{checkip:!0},internetVlanId:{required:!0,checkSetValues2:!0,checkSetValues:!0,vlanvlauedifferent:!0},iptvVlanId:{required:!0,checkSetValues2:!0,checkSetValues:!0,vlanvlauedifferent:!0},voipVlanId:{required:!0,checkSetValues2:!0,checkSetValues:!0,vlanvlauedifferent:!0}},messages:{internetVlanId:{required:jQuery.validator.messages.number,checkSetValues:I18N("j","Please enter a value of either 0 or 2-4094."),checkSetValues2:I18N("j","Text field contains illegal characters.")},iptvVlanId:{required:jQuery.validator.messages.number,checkSetValues:I18N("j","Please enter a value of either 0 or 2-4094."),checkSetValues2:I18N("j","Text field contains illegal characters.")},voipVlanId:{required:jQuery.validator.messages.number,checkSetValues:I18N("j","Please enter a value of either 0 or 2-4094."),checkSetValues2:I18N("j","Text field contains illegal characters.")}},submitHandler:function(e){CheckConnectionStatus()}})})</script><script type="text/javascript">Load_HTML(),Initial(),setMenu("menu_Settings"),GetXML(),startTimeout()</script></body></html><!-- svn info: $Revision: 1446 $ $Date: 2019-05-10 20:15:07 +0800 (Fri, 10 May 2019) $ --> 
