#auto-generated by python script.

ifndef PRC_CROSS_COMPILE
PRC_CROSS_COMPILE := /opt/buildroot-gcc463/usr/bin/mipsel-linux-
endif
CC := $(PRC_CROSS_COMPILE)gcc
AR := $(PRC_CROSS_COMPILE)ar
link := $(PRC_CROSS_COMPILE)gcc
STRIP := $(PRC_CROSS_COMPILE)strip


COM_LIB_PATH := ../../../
DM_INC_PATH = $(COM_LIB_PATH)/dm_lib/common/inc
DB_EXT_INC_PATH = $(COM_LIB_PATH)/dm_lib/external_type
LIBXML2_INC_PATH = $(COM_LIB_PATH)/dm_lib/libxml2/include
RESULT_PATH := ../../lib
OBJ_PATH := ../../obj
OBJ_PATH_DMALLOC := ../../obj_dmalloc


DB_CBS_SRC_PATH := ./


OSA_INCLUDES = $(COM_LIB_PATH)/osa/inc
COM_INCLUDES = $(COM_LIB_PATH)/include
DMALLOC_INCLUDES = $(COM_LIB_PATH)/dmalloc


DB_CBS_INCLUDES := -I$(DB_EXT_INC_PATH) -I$(DM_INC_PATH) -I$(COM_INCLUDES) -I$(OSA_INCLUDES) -I$(LIBXML2_INC_PATH) -I$(DMALLOC_INCLUDES)
DB_CBS_OBJ_CFLAGS := -g -Wall -Wshadow -Wcast-qual


DB_CBS_OBJ_CFLAGS += -fPIC
DB_CBS_OBJ_CFLAGS_DMALLOC += $(DB_CBS_OBJ_CFLAGS) -DDMALLOC_CHECK_ENABLED
DB_CBS_LIB_CFLAGS := -g -Wall -Wshadow -Wcast-qual -O -shared -o


DB_CBS_LIB = $(RESULT_PATH)/libTr069DbCbs.so
DB_CBS_LIB_DMALLOC = $(RESULT_PATH)/libTr069DbCbs_dmalloc.so
DB_CBS_STATIC_LIB = $(RESULT_PATH)/libTr069DbCbs.a
DB_CBS_STATIC_LIB_DMALLOC = $(RESULT_PATH)/libTr069DbCbs_dmalloc.a
DB_CBS_SRC := $(wildcard $(DB_CBS_SRC_PATH)/*.c)
DB_CBS_OBJ := $(patsubst $(DB_CBS_SRC_PATH)/%,$(OBJ_PATH)/%,$(patsubst %.c,%.o,$(DB_CBS_SRC)))
DB_CBS_OBJ_DMALLOC := $(patsubst $(DB_CBS_SRC_PATH)/%,$(OBJ_PATH_DMALLOC)/%,$(patsubst %.c,%.o,$(DB_CBS_SRC)))


ifdef BRCM_DMALLOC_ENABLED
all : $(DB_CBS_STATIC_LIB) $(DB_CBS_LIB) $(DB_CBS_STATIC_LIB_DMALLOC) $(DB_CBS_LIB_DMALLOC)
else
all : $(DB_CBS_STATIC_LIB) $(DB_CBS_LIB)
endif

$(DB_CBS_STATIC_LIB) : $(DB_CBS_OBJ)
	$(AR) -r $(DB_CBS_STATIC_LIB) $(DB_CBS_OBJ)

$(DB_CBS_STATIC_LIB_DMALLOC) : $(DB_CBS_OBJ_DMALLOC)
	$(AR) -r $(DB_CBS_STATIC_LIB_DMALLOC) $(DB_CBS_OBJ_DMALLOC)

$(DB_CBS_LIB) : $(DB_CBS_OBJ)
	$(CC) $(DB_CBS_LIB_CFLAGS) $(DB_CBS_LIB) $(DB_CBS_OBJ)

$(DB_CBS_LIB_DMALLOC) : $(DB_CBS_OBJ_DMALLOC)
	$(CC) $(DB_CBS_LIB_CFLAGS) $(DB_CBS_LIB_DMALLOC) $(DB_CBS_OBJ_DMALLOC)

$(DB_CBS_OBJ):$(OBJ_PATH)/%.o:$(DB_CBS_SRC_PATH)/%.c
	@mkdir -p $(OBJ_PATH)
	$(CC) $(DB_CBS_OBJ_CFLAGS) $(DB_CBS_INCLUDES) -pthread -c $< -o $@

$(DB_CBS_OBJ_DMALLOC):$(OBJ_PATH_DMALLOC)/%.o:$(DB_CBS_SRC_PATH)/%.c
	@mkdir -p $(OBJ_PATH_DMALLOC)
	$(CC) $(DB_CBS_OBJ_CFLAGS_DMALLOC) $(DB_CBS_INCLUDES) -pthread -c $< -o $@


.PHONY:clean
clean:
	$(RM) $(DB_CBS_LIB) $(DB_CBS_LIB_DMALLOC)
	$(RM) $(DB_CBS_STATIC_LIB) $(DB_CBS_STATIC_LIB_DMALLOC)
	$(RM) $(DB_CBS_OBJ) $(DB_CBS_OBJ_DMALLOC)


.PHONY:code_clean
code_clean:
	@$(RM) -rf ./*.c
	@$(RM) -rf $(DB_CBS_OBJ)
