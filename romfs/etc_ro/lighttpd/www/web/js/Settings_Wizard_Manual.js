/* svn info: $Revision: 1430 $ $Date: 2019-04-30 16:35:47 +0800 (Tue, 30 Apr 2019) $ */
top!=self&&(top.location=self.location),null===sessionStorage.getItem("PrivateKey")&&window.location.replace("../info/Login.html"),$(function(){wizardFn.BtnChange(),"true"==localStorage.RunningWizard?(wizardFn.PopupTermOfUser(),$("#createPop_Manual").show()):wizardFn.PopupWizard(),$.validator.addMethod("checkIPFormat",function(e,t){var a=!0;return""==e&&"static_gateway"==t.id?a:a=!!/(^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))+$/.test(e)},jQuery.validator.messages.address_Check),$.validator.addMethod("checkillegalssid",function(e,t){return COMM_ValidName(e)},""),$.validator.addMethod("checkWPAPassword",function(e,t){var a=!0;return(64<e.length||e.length<8)&&(a=!1),a},jQuery.validator.messages.password_WPACheck),$.validator.addMethod("checkASCIIChar",function(e,t){return!!/^[ -~]+$/.test(e)},I18N("j","Text field contains illegal characters.")),$.validator.addMethod("checkDevicePassword",function(e,t){var a=!0;return(15<e.length||e.length<6)&&(a=!1),a},I18N("j","The device password must be between <b>6</b> and <b>15</b> characters long.")),$.validator.addMethod("checkSecondDNS",function(e,t){var a=!0;return""!=e&&(a=!!/(^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))+$/.test(e)),a},jQuery.validator.messages.address_Check),$.validator.addMethod("check_PPPoE",function(e,t){var a=!0;return 1!=COMM_IsASCII(e)&&(a=!1),a},I18N("j","Text field contains illegal characters.")),$.validator.addMethod("checkiPAddress_StaticIP",function(e,t){var a=!0,n=document.getElementById("static_subnetMask").value;COMM_IPv4MASK2INT(n);return/^[0-9\.]{1,}$/.test(e)||(a=!1),COMM_ValidV4Format(e)&&COMM_ValidV4Addr(e)||(a=!1),a},I18N("j","Please enter a valid IP address. (e.g. 192.168.0.1)")),$.validator.addMethod("checkiPAddress_StaticIP2",function(e,t){var a=!0,n=document.getElementById("static_subnetMask").value,i=COMM_IPv4MASK2INT(n);return""!=n&&COMM_IPv4NETWORK(e,i)==COMM_IPv4NETWORK(wizardFn.getNetworkSettingsResponse.IPAddress,i)&&(a=!1),a},I18N("j","The IP address is used by Local Area Network. Please assign another IP address for Internet.")),$.validator.addMethod("checksubnetMask_StaticIP",function(e,t){var a=!0;"255.255.255.255"==e&&(a=!1);var n=COMM_IPv4MASK2INT(e);return(n<=0||32<n)&&(a=!1),a},I18N("j","Please enter a valid network mask.")),$.validator.addMethod("checkdefaultGateway_StaticIP",function(e,t){var a=!0,n=(document.getElementById("static_ipAddress").value,document.getElementById("static_subnetMask").value),i=COMM_IPv4MASK2INT(n);return""!=n&&""!=e&&(COMM_ValidV4HOST(e,i)||(a=!1)),a},I18N("j","Please enter a valid IP address. (e.g. 192.168.0.1)")),$.validator.addMethod("checkdefaultGateway_StaticIP2",function(e,t){var a=!0,n=document.getElementById("static_ipAddress").value,i=document.getElementById("static_subnetMask").value;COMM_IPv4MASK2INT(i);return""!=i&&""!=n&&""!=e&&e==n&&(a=!1),a},I18N("j","Please enter a valid IP address for the default gateway.")),$.validator.addMethod("checkdefaultGateway_StaticIP3",function(e,t){var a=!0,n=document.getElementById("static_ipAddress").value,i=document.getElementById("static_subnetMask").value,s=COMM_IPv4MASK2INT(i);return""!=i&&""!=n&&""!=e&&COMM_IPv4NETWORK(e,s)!=COMM_IPv4NETWORK(n,s)&&(a=!1),a},I18N("j","The IP address is used. Please check the IP address of your default gateway.")),$.validator.addMethod("checkprimaryDNSAddress_StaticIP",function(e,t){var a=!0;return""!=e&&(COMM_ValidV4Format_Simple(e)&&COMM_ValidV4Addr(e)||(a=!1)),a},I18N("j","Please enter a valid IP address. (e.g. 192.168.0.1)")),$.validator.addMethod("checkprimaryDNSAddress_StaticIP2",function(e,t){var a=!0,n=document.getElementById("static_ipAddress").value;return""!=e&&""!=n&&e==n&&(a=!1),a},I18N("j","The dns server cannot be equal to the IP address.")),$.validator.addMethod("checkpasswordsp",function(e,t){var a=!0;return/^\s{1,}$/.test(e)&&(a=!1),a},I18N("j","Text field contains illegal characters.")),$.validator.addMethod("trimpasswordsp",function(e,t){var a=!0;return e!=e.trim()&&(a=!1),a},""),$.validator.addMethod("checkTimezone",function(e,t){var a=!1;e=e.toLowerCase();for(var n=0;n<countryCity.length;n++)if(countryCity[n].toLowerCase()==e&&""!=e){a=!0;break}return a},I18N("j","Some essential features require you to set a time zone to work properly. Please select your time zone from the drop-down menu.")),$("#pppoe_Settings, #staticIP_Settings, #wifi_Settings, #devicePassword_Settings, #Time_form").each(function(e,t){$(t).validate({rules:{pppoe_username:{required:!0,check_PPPoE:!0,trimpasswordsp:!0},pppoe_password:{check_PPPoE:!0},static_ipAddress:{required:!0,checkIPFormat:!0,checkiPAddress_StaticIP:!0,checkiPAddress_StaticIP2:!0},static_subnetMask:{required:!0,checkIPFormat:!0,checksubnetMask_StaticIP:!0},static_gateway:{checkIPFormat:!0,checkdefaultGateway_StaticIP:!0,checkdefaultGateway_StaticIP2:!0,checkdefaultGateway_StaticIP3:!0},static_primaryDNS:{required:!0,checkIPFormat:!0,checkprimaryDNSAddress_StaticIP:!0,checkprimaryDNSAddress_StaticIP2:!0},static_secondaryDNS:{checkSecondDNS:!0,checkprimaryDNSAddress_StaticIP:!0,checkprimaryDNSAddress_StaticIP2:!0},wifi_networkName24G:{required:!0,checkillegalssid:!0,trimpasswordsp:!0},wifi_networkName5G:{required:!0,checkillegalssid:!0,trimpasswordsp:!0},wifi_password24G:{required:!0,checkASCIIChar:!0,checkWPAPassword:!0,checkpasswordsp:!0,trimpasswordsp:!0},wifi_password5G:{required:!0,checkASCIIChar:!0,checkWPAPassword:!0,checkpasswordsp:!0,trimpasswordsp:!0},device_password:{required:!0,checkDevicePassword:!0,checkASCIIChar:!0,checkpasswordsp:!0,trimpasswordsp:!0},timeZone_Search:{checkTimezone:!0}},messages:{pppoe_username:{required:I18N("j","Please enter an user name."),check_PPPoE:I18N("j","Text field contains illegal characters."),trimpasswordsp:I18N("j","Text field contains illegal characters.")},pppoe_password:{check_PPPoE:I18N("j","Text field contains illegal characters.")},static_subnetMask:{required:jQuery.validator.messages.subnet_Mask,checkIPFormat:jQuery.validator.messages.netmask_Check},static_gateway:{required:jQuery.validator.messages.gateway_Address},wifi_networkName24G:{required:jQuery.validator.messages.ssid,trimpasswordsp:I18N("j","Text field contains invalid characters (such as blank space at the beginning or the end)."),checkillegalssid:I18N("j","Invalid %s. Only A-Z, a-z, 0-9, “-”, “_”, and spaces are allowed.",I18N("j","Wi-Fi Name"))},wifi_networkName5G:{required:jQuery.validator.messages.ssid,trimpasswordsp:I18N("j","Text field contains invalid characters (such as blank space at the beginning or the end)."),checkillegalssid:I18N("j","Invalid %s. Only A-Z, a-z, 0-9, “-”, “_”, and spaces are allowed.",I18N("j","Wi-Fi Name"))},wifi_password24G:{required:jQuery.validator.messages.check_Password,trimpasswordsp:I18N("j","Text field contains illegal characters.")},wifi_password5G:{required:jQuery.validator.messages.check_Password,trimpasswordsp:I18N("j","Text field contains illegal characters.")},device_password:{required:jQuery.validator.messages.check_Password,trimpasswordsp:I18N("j","Password cannot start and end with spaces.")}},submitHandler:function(e){"pppoe_Settings"==e.id&&(currentDevice.featurePPPoEValid?wizardFn.setWan("DHCPPPPoE",!0):wizardFn.setWan("DHCPPPPoE")),"staticIP_Settings"==e.id&&wizardFn.setWan("Static"),"wifi_Settings"==e.id&&(wizardFn.wizard_next(wizardFn.wizard_Step),setWLanRadioSettings_24g.SSID=XMLEncode($("#wifi_networkName24G").val()),setWLanRadioSecurity_24g.Key=$("#wifi_password24G").val(),setWLanRadioSettings_5g.SSID=XMLEncode($("#wifi_networkName24G").val()),setWLanRadioSecurity_5g.Key=$("#wifi_password24G").val(),currentDevice.feature2nd5GHz&&(setWLanRadioSettings_5g2.SSID=XMLEncode($("#wifi_networkName24G").val()),setWLanRadioSecurity_5g2.Key=$("#wifi_password24G").val())),"devicePassword_Settings"==e.id&&wizardFn.wizard_next(wizardFn.wizard_Step),"Time_form"==e.id&&wizardFn.wizard_next(wizardFn.wizard_Step)}})})});var serviceAndInterface=function(){var i;function t(e){this.countryList=e.countryCode.split(","),this.country="",this.selectBox=e.selectBox,this.hasData=!1,null==e.selectWidth?this.selectWidth=588:this.selectWidth=e.selectWidth}var a={getData:function(e){var n=this;i=new t(e),$.ajax({cache:!1,url:"/js/VLANProfile.json",type:"GET",dataType:"json",async:!1,success:function(e){var t,a=-1;for(a=0;a<i.countryList.length&&1!=i.hasData;a++)if(""!=i.countryList[a]&&"NA"!=i.countryList[a])for(t in e.RegionalProfiles)if(i.countryList[a]==t){i.country=i.countryList[a],n.convertData(e.RegionalProfiles[t]),i.hasData=!0;break}}})},convertData:function(e){var t=-1,a=e.VLANLists;for(i.newDataList={},t=0;t<a.length;t++)i.newDataList[a[t].Name]={},i.newDataList[a[t].Name].Internet=a[t].VLAN.Internet,i.newDataList[a[t].Name].IPTV=a[t].VLAN.IPTV,i.newDataList[a[t].Name].VOIP=a[t].VLAN.VOIP,i.newDataList[a[t].Name].ConnectionType={},i.newDataList[a[t].Name].ConnectionType.Internet=a[t].ConnectionType.Internet,i.newDataList[a[t].Name]["Designated LAN Port"]=a[t]["Designated LAN Port"]},addSelect:function(){var e,t=[],a=-1;for(e in i.newDataList)t.push(e);for(t.sort(),a=0;a<t.length;a++)$(i.selectBox).append('<option value="'+t[a]+'">'+t[a]+"&nbsp;</option>");i.newDataList.Others={Internet:[0,0],IPTV:[0,0],VOIP:[0,0]},$(i.selectBox).append('<option value="Others">'+I18N("j","Others")+"&nbsp;</option>")}};return{setting:function(e){return a.getData(e),this},selectSetting:function(){return i.hasData&&(wizardFn.matchVLANProfile=!0,a.addSelect(),$(i.selectBox).selectbox("detach"),$(i.selectBox).val($(i.selectBox+" option:first").val()),$(i.selectBox).selectbox({width:i.selectWidth}),$(i.selectBox).selectbox("attach")),this},exportConType:function(e){var t=i.newDataList[e].ConnectionType.Internet;return"Manual"==t||null==t?"Manual":"PPPoE"==t?"DHCPPPPoE":t},exportConfigData:function(){return i.newDataList[wizardFn.vlanServiceProvider]}}}(),wizardFn={wizard_Step:0,wizardStepStack:new Array,getDeviceSettingsResponse:new SOAPGetDeviceSettingsResponse,getWanSettingsResponse:new SOAPGetWanSettingsResponse,getNetworkSettingsResponse:new SOAPGetNetworkSettingsResponse,getWLanRadiosResponse:new SOAPGetWLanRadiosResponse,getVLANResponse:new SOAPGetVLANSettings,setWanSettings:null,wanconnected:0,mydlink_registered:!1,countDownTimer:currentDevice.wizardCountdown,ianaTimeZone:"",hasianaTimeZone:!1,automaticUpgradeTick:!0,finishWizard:!1,wifi_datalist:[],modelInfo:"",matchVLANProfile:!1,vlanServiceProvider:"Others",featureWizardDFSDefaultByCountry:!1,WiFiSetting:function(e,t){this.band=e,this.settings=t},getWiFiData:function(e){for(var t in this.wifi_datalist)if(e==this.wifi_datalist[t].band)return this.wifi_datalist[t];return null},PopupWizard:function(){var e=this;startTimeout(),(new SOAPAction).sendSOAPAction("GetDeviceSettings",null,e.getDeviceSettingsResponse),currentDevice.featureRunningWizardNoCloseBtn&&"true"==localStorage.getItem("RunningWizard")&&$("#closeCreatePopBtn").hide(),e.modelInfo=JSON.parse(XMLEncode_forheader(sessionStorage.getItem("modelInfomation"))),$("#modelName2").html(e.modelInfo.modelName),currentDevice.featureCovrWIFI&&$("#modelName2").html(I18N("j","COVR Point A")),$("#modelName").html(e.modelInfo.modelName),$("#HWversion").html(e.modelInfo.hwVer),$("#FWversion").html(e.modelInfo.fwVer),e.wizard_update(),e.GetWanSettingXML(),(new TimeZoneSearch).searchEvent(),$("#timeZone_Search").val(e.ianaTimeZone)},detectBrowser:function(){var e=$.client.browser,t=$.client.version;"Mozilla"==e&&"11"==t&&(e="Explorer");var a=!0;switch(e){case"Chrome":t<28&&(a=!1);break;case"Explorer":case"Edge":a=!1;break;case"Safari":t<10&&(a=!1);break;case"Firefox":t<52&&(a=!1);break;default:a=!1}return a},GetWanSettingXML:function(){var t=this,e=new SOAPAction,a=new SOAPAction,n=t.detectBrowser();if(currentDevice.featureNewTime)if(n){t.ianaTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,null!=t.ianaTimeZone&&""!=t.ianaTimeZone||(t.ianaTimeZone="Europe/London");for(var i=!1,s=0;s<countryCity.length;s++)if(t.ianaTimeZone==countryCity[s]){i=!0;break}1!=i&&(countryCity.push(t.ianaTimeZone),countryCity.sort())}else t.ianaTimeZone=get_timezone_id(),null!=t.ianaTimeZone&&""!=t.ianaTimeZone||(t.ianaTimeZone="Europe/London");e.sendSOAPAction("GetNetworkSettings",null,t.getNetworkSettingsResponse).then(function(){var e=$.Deferred();return a.sendSOAPAction("GetWanSettings",null,t.getWanSettingsResponse).done(function(){e.resolve()}),e.promise()}).then(function(){switch(t.getWanSettingsResponse.Type){case"Static":$("#static_ipAddress").val(t.getWanSettingsResponse.IPAddress),$("#static_subnetMask").val(t.getWanSettingsResponse.SubnetMask),$("#static_gateway").val(t.getWanSettingsResponse.Gateway),$("#static_primaryDNS").val(t.getWanSettingsResponse.ConfigDNS.Primary),$("#static_secondaryDNS").val(t.getWanSettingsResponse.ConfigDNS.Secondary);break;case"DHCPPPPoE":case"StaticPPPoE":$("#pppoe_username").val(t.getWanSettingsResponse.Username),$("#pppoe_password").val(t.getWanSettingsResponse.Password)}t.GetWirelessParameter()})},GetWanConnectionType:function(e){var n=this,t=new SOAPSetTriggerADIC;t.TriggerADIC=e,(new SOAPAction).sendSOAPAction("SetTriggerADIC",t,null).done(function(e){if(0<=e.SetTriggerADICResult.indexOf("OK_DETECTING")){var t=e.SetTriggerADICResult.split("_"),a=3;void 0!==t[2]&&(a=parseInt(t[2]),1==isNaN(a)&&(a=3)),setTimeout("wizardFn.GetWanConnectionType('false')",1e3*a)}else switch(e.SetTriggerADICResult.toUpperCase()){case"OK_PPPOE":document.getElementById("wz_ConnectionType").innerHTML=I18N("j","DHCPPPPoE"),n.selectConnectionType("pppoe"),n.wanconnected=1,n.wizard_Step=4,n.wizard_update();break;case"OK_DHCP":document.getElementById("wz_ConnectionType").innerHTML=I18N("j","DHCP"),n.selectConnectionType("dhcp"),n.wanconnected=1,n.setWan("DHCP");break;case"OK_PPPOE&DHCP":n.wanconnected=1,n.wizard_Step=17,n.wizard_update();break;case"ERROR_WANLINKDOWN":n.wanconnected=0,n.wizard_Step=2,n.wizard_update();break;case"ERROR_UNABLETODETECT":n.wanconnected=0,n.wizard_Step=3,n.wizard_update()}})},selectConnectionType:function(e){changeTimeoutAction(),"dhcp"==e?($("#cb_dhcp").attr("class","clicked"),$("#cb_pppoe, #cb_static").attr("class","unclick")):"pppoe"==e?($("#cb_pppoe").attr("class","clicked"),$("#cb_dhcp, #cb_static").attr("class","unclick")):"static"==e&&($("#cb_static").attr("class","clicked"),$("#cb_dhcp, #cb_pppoe").attr("class","unclick"))},hasInternetUserPwd:function(e){changeTimeoutAction(),"yes"==e?($("#hasup_yes").attr("class","clicked"),$("#hasup_no").attr("class","unclick")):($("#hasup_yes").attr("class","unclick"),$("#hasup_no").attr("class","clicked"))},setWan:function(e,t){var a=this;new SOAPAction;switch(a.setWanSettings=new SOAPSetWanSettings,a.setWanSettings.Type=e){case"DHCP":a.setWanSettings.MTU="1500";break;case"DHCPPPPoE":a.setWanSettings.Username=XMLEncode(document.getElementById("pppoe_username").value),a.setWanSettings.Password=document.getElementById("pppoe_password").value,a.setWanSettings.IPAddress="",currentDevice.featureAlwaysOnWanWizard?(a.setWanSettings.AutoReconnect=!0,a.setWanSettings.MaxIdleTime="0"):(a.setWanSettings.AutoReconnect=!1,a.setWanSettings.MaxIdleTime="300"),a.setWanSettings.MTU="1492",a.setWanSettings.ConfigDNS.Primary="",a.setWanSettings.ConfigDNS.Secondary="";break;case"Static":a.setWanSettings.IPAddress=document.getElementById("static_ipAddress").value,a.setWanSettings.SubnetMask=document.getElementById("static_subnetMask").value,a.setWanSettings.Gateway=document.getElementById("static_gateway").value,a.setWanSettings.MTU="1500",a.setWanSettings.ConfigDNS.Primary=document.getElementById("static_primaryDNS").value,a.setWanSettings.ConfigDNS.Secondary=document.getElementById("static_secondaryDNS").value}"DHCPPPPoE"==e&&1==t?($("#btn_next, #btn_back").attr("class","styled-button_disable").prop("disabled",!0),$("#pppoe_username").prop("disabled",!0),$("#pppoe_password").prop("disabled",!0),a.PPPoEValidFn("true")):(a.wizardStepStack.push(a.wizard_Step),a.wizard_Step=6,a.wizard_update())},PPPoEValidFn:function(e){var n=this,t=new SOAPAction,a=new SOAPSetTriggerPPPoEValidate;a.TriggerPPPoEValidate=e,a.Username=XMLEncode($("#pppoe_username").val()),a.Password=$("#pppoe_password").val(),t.sendSOAPAction("SetTriggerPPPoEValidate",a,null).done(function(e){if(0<=e.SetTriggerPPPoEValidateResult.indexOf("OK_DETECTING")){var t=e.SetTriggerPPPoEValidateResult.split("_"),a=3;void 0!==t[2]&&(a=parseInt(t[2]),1==isNaN(a)&&(a=3)),setTimeout("wizardFn.PPPoEValidFn('false')",1e3*a)}else"OK"==e.SetTriggerPPPoEValidateResult?(n.setWanSettings.Username=XMLEncode(document.getElementById("pppoe_username").value),n.setWanSettings.Password=document.getElementById("pppoe_password").value,n.wizardStepStack.push(n.wizard_Step),n.wizard_Step=6,n.wizard_update()):($("#pppoe_password").addClass("error"),$("#pppoe_password").closest("td").find("label").show().html("<br>"+I18N("j","Invalid username or password, please try again."))),$("#btn_next, #btn_back").attr("class","styled-button_enable").prop("disabled",!1),$("#pppoe_username").prop("disabled",!1),$("#pppoe_password").prop("disabled",!1)}).fail(function(){$("#pppoe_password").addClass("error"),$("#pppoe_password").closest("td").find("label").show().html("<br>"+I18N("j","Invalid username or password, please try again.")),$("#btn_next, #btn_back").attr("class","styled-button_enable").prop("disabled",!1),$("#pppoe_username").prop("disabled",!1),$("#pppoe_password").prop("disabled",!1)})},GetWirelessParameter:function(){var s=this,e=new SOAPGetWLanRadioSettings,a=new SOAPGetWLanRadioSecurity,n=new SOAPGetWLanRadioSettings,i=new SOAPGetWLanRadioSettings,r=new SOAPGetWLanRadioSettingsResponse,o=new SOAPGetWLanRadioSecurityResponse,d=new SOAPGetWLanRadioSettingsResponse,c=new SOAPGetWLanRadioSettingsResponse,t=new SOAPAction,l=new SOAPAction;e.RadioID="RADIO_2.4GHz",t.sendSOAPAction("GetWLanRadioSettings",e,r).then(function(){var e=$.Deferred(),t=new s.WiFiSetting(24,r);return s.wifi_datalist.push(t),a.RadioID="RADIO_2.4GHz",l.sendSOAPAction("GetWLanRadioSecurity",a,o).done(function(){e.resolve()}),e.promise()}).then(function(){var t=$.Deferred(),e=new SOAPAction;return n.RadioID="RADIO_5GHz",e.sendSOAPAction("GetWLanRadioSettings",n,d).done(function(){var e=new s.WiFiSetting(5,d);s.wifi_datalist.push(e),t.resolve()}),t.promise()}).then(function(){var t=$.Deferred(),e=new SOAPAction;return currentDevice.feature2nd5GHz?(i.RadioID="RADIO_5GHz_2",e.sendSOAPAction("GetWLanRadioSettings",i,c).done(function(){var e=new s.WiFiSetting(52,c);s.wifi_datalist.push(e),t.resolve()})):t.resolve(),t.promise()}).then(function(){var e=$.Deferred();return $("#wifi_networkName24G").val(r.SSID),$("#wifi_password24G").val(o.Key),(new SOAPAction).sendSOAPAction("GetWLanRadios",null,s.getWLanRadiosResponse).done(function(){e.resolve()}),e.promise()}).then(function(){for(var e="",t=0;t<s.getWLanRadiosResponse.RadioInfos.RadioInfo.length;t++){var a="",n=s.getWLanRadiosResponse.RadioInfos.RadioInfo[t].CountryCode;if("RADIO_2.4GHz"!=s.getWLanRadiosResponse.RadioInfos.RadioInfo[t].RadioID){n=(n=(n=n.replace(/\//g,"")).replace(/\,/g,"")).replace(/\s/g,"");for(var i=0;i<Math.floor(n.length/2);i++)a+=n.substr(2*i,2)+",";e+=a}}if("object"==typeof currentDevice.featureWizardDFSDefaultByCountry){for(i=0;i<currentDevice.featureWizardDFSDefaultByCountry.length;i++)if(0<=e.indexOf(currentDevice.featureWizardDFSDefaultByCountry[i])){s.featureWizardDFSDefaultByCountry=!0;break}}else s.featureWizardDFSDefaultByCountry=currentDevice.featureWizardDFSDefaultByCountry;1==currentDevice.featureServiceProvider&&1==currentDevice.featureVLANwizard?(serviceAndInterface.setting({countryCode:e,selectBox:"#ServiceProvider",selectWidth:588}).selectSetting(),(new SOAPAction).sendSOAPAction("GetVLANSettings",null,s.getVLANResponse).done(function(){$("#createPop_Manual").show()})):$("#createPop_Manual").show()})},BtnChange:function(){var a=this;$("select").change(function(){changeTimeoutAction()}),$("input").keydown(function(){changeTimeoutAction()}),$("button").click(function(){changeTimeoutAction()}),$("#Language").on("change",function(){sessionStorage.removeItem("langPack"),localStorage.setItem("language",$(this).val()),location.reload()}),$("#btn_next").on("click",function(){a.wizard_next_btn(a.wizard_Step),changeTimeoutAction()}),$("#closeCreatePopBtn").on("click",function(){if(changeTimeoutAction(),a.finishWizard)wizardFn.returnToHome();else{$("#createPop_Manual, #dialogBox_Background").hide(),$("#alert_Message").show();var e=new SOAPAction,t=new SOAPSetWanSettings;e.copyObject(t,a.getWanSettingsResponse),e.sendSOAPAction("SetWanSettings",t,null).done(function(e){setTimeout("wizardFn.returnToHome()",2e3)})}}),$("#btn_agree").on("click",function(){$("#Dialog_termNprivacy, #btn_agree").hide(),$("#createPop_Manual").hide(),$("#wizard_settings, #closeCreatePopBtn").show(),a.PopupWizard()});var e=localStorage.getItem("language");$("#Language").selectbox("detach"),$("#Language").val(e),$("#Language").selectbox({width:120})},wizard_back:function(e){var t=this;switch(t.wizard_Step=t.wizardStepStack.pop(),e){case 0:break;case 1:t.wizard_update();break;case 2:t.wizardStepStack.push(0),t.wizard_Step=1,t.wizard_update(),t.GetWanConnectionType("true");break;case 3:1==currentDevice.featureServiceProvider&&1==currentDevice.featureVLANwizard&&1==t.matchVLANProfile?t.wizard_Step=18:t.wizard_Step=0,t.wizard_update();break;case 4:case 5:t.wizard_Step=3,t.wizard_update();break;case 6:"clicked"==document.getElementById("cb_dhcp").getAttribute("class")?t.wizard_Step=3:"clicked"==document.getElementById("cb_pppoe").getAttribute("class")?t.wizard_Step=4:"clicked"==document.getElementById("cb_static").getAttribute("class")&&(t.wizard_Step=5),t.wizard_update();break;case 7:t.wizard_Step=6,t.wizard_update();break;case 8:t.wizard_update();break;case 9:t.wizard_Step=3,t.wizard_update();break;case 10:document.getElementById("wz_MydlinkStatus").innerHTML=I18N("j","Unregistered"),document.getElementById("wz_MydlinkStatus").style.color="#ff0000",t.wizard_Step=13,t.wizard_update();break;case 11:case 12:t.wizard_Step=10,t.wizard_update();break;case 13:break;case 15:case 16:t.wizard_update();break;case 17:1==currentDevice.featureServiceProvider&&1==currentDevice.featureVLANwizard&&1==t.matchVLANProfile?t.wizard_Step=18:t.wizard_Step=0,t.wizard_update();break;case 18:t.wizard_Step=0,t.wizard_update()}},wizard_next_btn:function(e,t){switch(e){case 4:$("#sumbit_CheckData").trigger("click");break;case 5:$("#sumbit_CheckData1").trigger("click");break;case 6:$("#sumbit_CheckData2").trigger("click");break;case 7:$("#sumbit_CheckData3").trigger("click");break;case 16:$("#sumbit_CheckData4").trigger("click");break;default:this.wizard_next(e,t)}},wizard_next:function(e,t){var a=this;switch(a.wizardStepStack.push(e),e){case 0:1==currentDevice.featureServiceProvider&&1==currentDevice.featureVLANwizard&&1==a.matchVLANProfile?a.wizard_Step=18:(a.wizard_Step=1,a.GetWanConnectionType("true"));break;case 1:a.wizardStepStack.pop();break;case 2:a.wizard_Step=3;break;case 3:if("clicked"==document.getElementById("cb_dhcp").getAttribute("class"))return $("#btn_next, #btn_back").hide(),document.getElementById("wz_ConnectionType").innerHTML=I18N("j","DHCP"),void a.setWan("DHCP");"clicked"==document.getElementById("cb_pppoe").getAttribute("class")?(document.getElementById("wz_ConnectionType").innerHTML=I18N("j","DHCPPPPoE"),a.wizard_Step=4):"clicked"==document.getElementById("cb_static").getAttribute("class")&&(document.getElementById("wz_ConnectionType").innerHTML=I18N("j","Static"),a.wizard_Step=5);break;case 4:case 5:a.wizard_Step=6;break;case 6:a.wizard_Step=7;break;case 7:1==currentDevice.featureNewTime?a.wizard_Step=16:1==currentDevice.featureAutoUpgrade?a.wizard_Step=15:a.wizard_Step=8;break;case 8:a.GetXML_SetDeviceSettings();break;case 9:a.wizardStepStack.pop();break;case 10:"clicked"==document.getElementById("cb_yes").getAttribute("class")?a.wizard_Step=12:"clicked"==document.getElementById("cb_no").getAttribute("class")&&(a.wizard_Step=11);break;case 11:a.SetMyDlinkRegister();break;case 12:a.SetDeviceRegister_a();break;case 13:a.SetXML();break;case 14:a.returnToHome();break;case 15:a.wizard_Step=8;break;case 16:currentDevice.featureAutoUpgrade?a.wizard_Step=15:a.wizard_Step=8;break;case 17:if("clicked"!=$("#hasup_yes").attr("class"))return document.getElementById("wz_ConnectionType").innerHTML=I18N("j","DHCP"),a.selectConnectionType("dhcp"),void a.setWan("DHCP");document.getElementById("wz_ConnectionType").innerHTML=I18N("j","DHCPPPPoE"),a.selectConnectionType("pppoe"),a.wizard_Step=4;break;case 18:if(a.vlanServiceProvider=$("#ServiceProvider").val(),"Others"==$("#ServiceProvider").val())a.wizard_Step=1,a.GetWanConnectionType("true");else switch(serviceAndInterface.exportConType($("#ServiceProvider").val())){case"Manual":a.wizard_Step=17;break;case"DHCP":document.getElementById("wz_ConnectionType").innerHTML=I18N("j","DHCP"),a.selectConnectionType("dhcp"),a.setWan("DHCP");break;case"DHCPPPPoE":document.getElementById("wz_ConnectionType").innerHTML=I18N("j","DHCPPPPoE"),a.selectConnectionType("pppoe"),a.wizard_Step=4;break;case"Static":document.getElementById("wz_ConnectionType").innerHTML=I18N("j","Static"),a.selectConnectionType("static"),a.wizard_Step=5}}a.wizard_update()},wizard_update:function(){switch(this.wizard_Step){case 0:$("#wizard_title").html(I18N("j","Welcome")),currentDevice.featureCovrWIFI?$("#wizard_wording").html(I18N("j","This wizard will walk you through, step-by-step through the configuration process for your COVR Wi-Fi system.")):$("#wizard_wording").html(I18N("j","This wizard will guide you through a step-by-step process to configure your new D-Link device.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_off"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#wizard_setupTable").show(),$("#mydlink_step4").css({display:"none"}),currentDevice.featureCovrWIFI?($("#setupTable_step1").html(I18N("j","Step 1: Install your first COVR Point, COVR Point A")),$("#setupTable_step3").html(I18N("j","Step 3: Set your device password")),$("#RelocateCovr_step4").css({display:"table-row"})):$("#RelocateCovr_step4").css({display:"none"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Cancel")),$("#btn_next").html(I18N("j","Next")),$("#languagetext, #languageselect").css({display:"inline-block"}),$("#btn_next").css({display:"inline"});break;case 1:$("#wizard_title").html(I18N("j","Configure Your Internet Connection")),$("#wizard_wording").html(I18N("j","Detecting Internet Connection")+"..."),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_on"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#detection").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Cancel")),$("#btn_next").html(I18N("j","Next"));break;case 2:$("#wizard_title").html(I18N("j","Install")),currentDevice.featureRunningWizardNoCloseBtn?currentDevice.featureCovrWIFI?"EU"==sessionStorage.FWRegion?$("#wizard_wording").html(I18N("j","Connect one end of an Ethernet cable to port 1 on the COVR Point labeled A, and connect the other end to your modem or Internet-connected wall jack.")):$("#wizard_wording").html(I18N("j","Power off the modem and connect one end of an Ethernet cable to the port 1 on the cover point labeled A, and connect the other end to your modem or Internet-connected Ethernet wall jack. Power the modem back on.")):$("#wizard_wording").html(I18N("j","Connect one end of an Ethernet cable to one of the Ethernet ports on the router and connect the other end of the cable to your modem or Internet-connected Ethernet wall jack.")):$("#wizard_wording").html(I18N("j","Please plug one end of the Ethernet cable included with your device into the port labeled INTERNET on your device. Plug the other end of this cable into the Ethernet port on your DSL or cable broadband modem, and power cycle the modem.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_on"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#plug_page").css({display:"block"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Retry")),$("#btn_next").html(I18N("j","Next")),$("#btn_back").css({display:"inline"}),currentDevice.featureRunningWizardNoCloseBtn&&"true"==localStorage.getItem("RunningWizard")?$("#btn_next").css({display:"none"}):$("#btn_next").css({display:"inline"});break;case 3:$("#wizard_title").html(I18N("j","Configure Your Internet Connection")),$("#wizard_wording").html(I18N("j","Please select your Internet connection type below")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_on"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#selectConnectionType").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 4:$("#wizard_title").html(I18N("j","PPPoE")),$("#wizard_wording").html(I18N("j","To setup this Internet connection, you will need to have a User Name from your Internet Service Provider. If you do not have this information, please contact your ISP.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_on"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#pppoe_setupTable").css({display:"table"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 5:$("#wizard_title").html(I18N("j","Static IP")),$("#wizard_wording").html(I18N("j","To set up this conncetion you will need to have a complete list of IP information by your Internet Service Provider. If you have a Static IP connection and do not have this information, please contact your ISP.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_on"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#staticIP_setupTable").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 6:$("#wizard_title").html(I18N("j","Wi-Fi Settings")),$("#wizard_wording").html(I18N("j","To setup a Wi-Fi Network you will need to give your Wi-Fi Network a Name(SSID) and Password.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_off"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_on"),$("#wizard_router").attr("class","wizard_router_off"),currentDevice.featureSmartConnect?($(".wifi_5g").hide(),$("#wifi_networkName24G_show, #confirm_wifi_networkName24G_show, #wz_24GHz_Wireless_show").html(I18N("j","Wi-Fi Network Name")+":"),$("#wifi_password24G_show, #confirm_wifi_password24G_show, #wz_24GHz_WirelessPassword_show").html(I18N("j","Wi-Fi Password")+":")):currentDevice.featureCovrWIFI?($(".wifi_5g").hide(),$("#wifi_networkName24G_show, #confirm_wifi_networkName24G_show, #wz_24GHz_Wireless_show").html("COVR "+I18N("j","Wi-Fi Network Name")+":"),$("#wifi_password24G_show, #confirm_wifi_password24G_show, #wz_24GHz_WirelessPassword_show").html("COVR "+I18N("j","Wi-Fi Password")+":")):($(".wifi_5g").show(),$("#wifi_networkName24G_show, #confirm_wifi_networkName24G_show, #wz_24GHz_Wireless_show").html(I18N("j","2.4GHz Wi-Fi Network Name")+":"),$("#wifi_password24G_show, #confirm_wifi_password24G_show, #wz_24GHz_WirelessPassword_show").html(I18N("j","2.4GHz Wi-Fi Password")+":")),$(".wizardElement").hide(),$("#wifi_setupTable").css({display:"table"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 7:$("#wizard_title").html(I18N("j","Device Admin Password")),$("#wizard_wording").html(I18N("j","By default, your new D-Link device does not have a password configured for administrator access to the Web-based configuration utility. To secure your new device, please create a password below.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_off"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_on"),$(".wizardElement").hide(),$("#devicePassword_setupTable").css({display:"table"}),$("#autoUpgrade_icon").css({display:"none"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 8:$("#wizard_title").html(I18N("j","Summary")),$("#wizard_wording").html(I18N("j",'Below is a summary of your Wi-Fi security and device password settings. Please note down your settings and click "Next".')),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_off"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),currentDevice.featureAutoUpgrade&&$("#wizardAutoUpgrade").show(),$("#confirm_connection_type").html(I18N("j",$("#wz_ConnectionType").html())),$("#confirm_wifi_networkName24G").html(HTMLEncode($("#wifi_networkName24G").val())),$("#confirm_wifi_networkName5G").html(HTMLEncode($("#wifi_networkName5G").val())),$("#confirm_wifi_password24G").html(HTMLEncode($("#wifi_password24G").val())),$("#confirm_wifi_password5G").html(HTMLEncode($("#wifi_password5G").val())),$("#confirm_device_password").html(HTMLEncode($("#device_password").val())),$(".wizardElement").hide(),$("#confirm_setup").css({display:"inline"}),$("#autoUpgrade_icon").css({display:"none"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 9:$("#wizard_title").html(I18N("j","Checking Your Internet Connectivity")),$("#wizard_wording").html(I18N("j","Checking Internet Connectivity")+"..."),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_on"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#checking_connection").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide();break;case 10:$("#wizard_title").html(I18N("j","mydlink Registration")),$("#wizard_wording").css({display:"none"}),$("#wizard_topology").css({display:"none"}),$(".wizardTopology").css({display:"none"}),$(".wizardElement").hide(),$("#mydlink_step1").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 11:$("#wizard_title").html(I18N("j","mydlink Registration")),$("#wizard_wording").css({display:"none"}),$("#wizard_topology").css({display:"none"}),$(".wizardTopology").css({display:"none"}),$(".wizardElement").hide(),$("#mydlink_step2").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_next").css({display:"inline"});break;case 12:$("#wizard_title").html(I18N("j","mydlink Registration")),$("#wizard_wording").css({display:"none"}),$("#wizard_topology").css({display:"none"}),$(".wizardTopology").css({display:"none"}),$(".wizardElement").hide(),$("#mydlink_step3").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_next").css({display:"inline"});break;case 13:$("#wizard_title").html(I18N("j","Congratulations")),$("#wizard_wording").html(I18N("j","Congratulations, your device has been configured. You can now connect to your Wi-Fi network by using the new Wi-Fi Network Name and Password you created.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"none"}),$(".wizardTopology").css({display:"none"}),$("#wz_24GHz_Wireless").html(HTMLEncode($("#wifi_networkName24G").val())),$("#wz_5GHz_Wireless").html(HTMLEncode($("#wifi_networkName5G").val())),$("#wz_24GHz_WirelessPassword").html(HTMLEncode($("#wifi_password24G").val())),$("#wz_5GHz_WirelessPassword").html(HTMLEncode($("#wifi_password5G").val())),$("#wz_DeviceAdminPassword").html(HTMLEncode($("#device_password").val())),$(".wizardElement").hide(),$("#congratulationsTable").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_next").css({display:"inline"});break;case 14:if($("#wizard_title").html(I18N("j","Covr Point(s) Placement")),currentDevice.featureCovrWIFI){var e=I18N("j","You may now plug in the COVR Point(s) and position it somewhere between COVR Point A and the Wi-Fi dead zone. If the COVR LED starts to blink white, try moving the COVR Point closer to COVR Point A. If it’s blinking orange, it means there’s no Wi-Fi connection. Check if the COVR Point A is turned on and try moving the COVR Point closer to COVR Point A to improve the signal."),t=I18N("j","Once the COVR LEDs light up solid white, it means the COVR Point has a strong signal."),a=I18N("j","Click “Finish” to proceed.");$("#wizard_wording").html(e+"<br/><br/>"+t+"<br/><br/>"+a)}else $("#wizard_wording").html(I18N("j","You may now <span style='color:red;'>plug</span> the Covr Extender and place it in a location <b>between your Covr Router and the Wi-Fi weak area or deadzone.</b> Once placed, verify that <b>all five LEDs are solid green.</b> If the two uplink LEDs are not solid green move the Covr Extender closer to the Covr Router until they are."));$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"none"}),$(".wizardTopology").css({display:"none"}),$(".wizardElement").hide(),$("#CovrExtenderPlacement").css({display:"table"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Finish")),$("#btn_next").css({display:"inline"});break;case 15:$("#wizard_title").html(I18N("j","Install Updates Automatically")),$("#wizard_wording").html(I18N("j","Allow your device to automatically update to make sure you are always enjoying the latest features and improvements.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"none"}),$(".wizardElement").hide(),$("#AutoUpgrade_setupTable").css({display:"table"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#autoUpgrade_icon").css({display:"block"}),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 16:$("#wizard_title").html(I18N("j","Time Zone")),$("#wizard_wording").html(I18N("j","Some essential features require you to set a time zone to work properly. Please select your time zone from the drop-down menu.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_off"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_on"),$("#autoUpgrade_icon").css({display:"none"}),$(".wizardElement").hide(),$("#ianaTimeZone_setupTable").css({display:"table"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 17:$("#wizard_title").html(I18N("j","Internet username and password")),$("#wizard_wording").html(I18N("j","Do you have an Internet username and password provided by your internet service provider?")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_on"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#hasInternetUserPwd").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"});break;case 18:$("#wizard_title").html(I18N("j","Internet Service Provider")),$("#wizard_wording").html(I18N("j","Select your Internet Service Provider from the dropdown list. We will take care the Internet setup from here.")),$("#wizard_wording").css({display:"block"}),$("#wizard_topology").css({display:"inline"}),$(".wizardTopology").css({display:"none"}),$("#topology").css({display:"inline-block"}),$("#wizard_deviceName").css({display:"block"}),$("#wizard_wan_line").attr("class","wizard_wan_line_on"),$("#wizard_wifi_line").attr("class","wizard_wifi_line_off"),$("#wizard_router").attr("class","wizard_router_off"),$(".wizardElement").hide(),$("#InternetServiceProvider").css({display:"inline"}),$("#languagetext, #languageselect, #btn_back, #btn_next").hide(),$("#btn_back").html(I18N("j","Back")),$("#btn_next").html(I18N("j","Next")),$("#btn_back, #btn_next").css({display:"inline"})}$("#dialogBox").css({overflow:"visible"})},GetXML_SetDeviceSettings:function(){this.SetXML()},getInternetStatus:function(e){var a=this,t=!1,n=e;0==n&&(t=!0);var i=new SOAPGetCurrentInternetStatus;i.InternetStatus=t;var s=new SOAPAction;s.sendSOAPAction("GetCurrentInternetStatus",i,null).done(function(e){if(n++,"OK_DETECTING_2"==e.GetCurrentInternetStatusResult)n<5?setTimeout("wizardFn.GetInternetConnectionStatus("+n+")",2e3):(a.wizard_Step=13,a.wizard_update());else{a.wizard_Step=13;var t=new SOAPGetMyDLinkSettingsResponse;s.sendSOAPAction("GetMyDLinkSettings",null,t).done(function(){"true"==t.GetRegisterAccountStatus?($("#wz_MydlinkStatus").html(I18N("j","Registered")),$("#wz_MydlinkStatus").css({color:"#4598aa"}),$("#wz_mydlink_status").attr("src","./image/connected.png?v=c3d3a4b979")):($("#wz_MydlinkStatus").html(I18N("j","Unregistered")),$("#wz_MydlinkStatus").css({color:"#ff0000"}),$("#wz_mydlink_status").attr("src","./image/disconnected.png?v=3e3747ccf7")),"OK_CONNECTED"==t.GetCurrentInternetStatusResult&&(a.wizard_Step=10)})}a.wizard_update()})},mydlinkAccount:function(e){"yes"==e&&"unclick"==document.getElementById("cb_yes").getAttribute("class")?(cb_yes.setAttribute("class","clicked"),cb_no.setAttribute("class","unclick")):"no"==e&&"unclick"==document.getElementById("cb_no").getAttribute("class")&&(cb_yes.setAttribute("class","unclick"),cb_no.setAttribute("class","clicked"))},changeButtonStatus:function(){$("#option1").prop("checked")?$("#btn_next").attr("class","styled-button_enable").prop("disabled",!1):$("#btn_next").attr("class","styled-button_disable").prop("disabled",!0)},SetMyDlinkRegister:function(){var t=this;if(""==document.getElementById("accountName").value||""==document.getElementById("password_mydlink").value)document.getElementById("MyDLink_description").innerHTML=I18N("j","Email or password field is required.");else{document.getElementById("btn_next").setAttribute("class","styled-button_disable"),document.getElementById("btn_back").setAttribute("class","styled-button_disable"),document.getElementById("btn_next").disabled=!0,document.getElementById("btn_back").disabled=!0,document.getElementById("MyDLink_description").innerHTML="",document.getElementById("show_loadingImageDefault").style.display="table-row";var e=new SOAPAction,a=new SOAPSetMyDLinkSettings;a.Email=$("#accountName").val(),a.Password=$("#password_mydlink").val(),a.LastName=$("#lastName").val(),a.FirstName=$("#firstName").val(),a.AccountStatus=!1,e.sendSOAPAction("SetMyDLinkSettings",a,null).done(function(e){"OK"==e.SetMyDLinkSettingsResult.toUpperCase()||"RESTART"==e.SetMyDLinkSettingsResult.toUpperCase()?t.SetMyDlinkRegister2():(document.getElementById("MyDLink_description").innerHTML=SetResult_2nd,document.getElementById("show_loadingImageDefault").style.display="none",document.getElementById("btn_next").setAttribute("class","styled-button_enable"),document.getElementById("btn_back").setAttribute("class","styled-button_enable"),document.getElementById("btn_next").disabled=!1,document.getElementById("btn_back").disabled=!1)})}},SetMyDlinkRegister2:function(){var n=this,e=new SOAPAction,t=new SOAPSetMyDLinkSettings;t.Email=$("#accountName").val(),t.Password=$("#password_mydlink").val(),t.AccountStatus=!0,e.sendSOAPAction("SetMyDLinkSettings",t,null).done(function(e){if("OK"==e.SetMyDLinkSettingsResult.toUpperCase()||"RESTART"==e.SetMyDLinkSettingsResult.toUpperCase())document.getElementById("wz_MydlinkStatus").innerHTML=I18N("j","Registered"),document.getElementById("wz_mydlink_status").src="./image/connected.png?v=c3d3a4b979",document.getElementById("show_loadingImageDefault").style.display="none",n.wizard_Step=13,n.wizard_update();else{var t=e.SetMyDLinkSettingsResult.split("]"),a=t[t.length-1];document.getElementById("MyDLink_description").innerHTML=a,document.getElementById("show_loadingImageDefault").style.display="none"}})},SetDeviceRegister_a:function(){var n=this;if(""==document.getElementById("accountName_a").value||""==document.getElementById("password_mydlink_a").value)document.getElementById("MyDLink_description_a").innerHTML=I18N("j","Email or password field is required."),wizardStepStack.pop();else{$("#btn_next, #btn_back").attr("class","styled-button_disable").prop("disabled",!0),document.getElementById("MyDLink_description_a").innerHTML="",document.getElementById("show_loadingImage").style.display="table-row";var e=new SOAPAction,t=new SOAPSetMyDLinkSettings;t.Email=$("#accountName_a").val(),t.Password=$("#password_mydlink_a").val(),t.AccountStatus=!0,e.sendSOAPAction("SetMyDLinkSettings",t,null).done(function(e){if("OK"==e.SetMyDLinkSettingsResult.toUpperCase()||"RESTART"==e.SetMyDLinkSettingsResult.toUpperCase())document.getElementById("wz_MydlinkStatus").innerHTML=I18N("j","Registered"),document.getElementById("wz_mydlink_status").src="./image/connected.png?v=c3d3a4b979",document.getElementById("show_loadingImage").style.display="none",n.mydlink_registered=!0,n.wizard_Step=13,n.wizard_update();else{var t=e.SetMyDLinkSettingsResult.split("]"),a=t[t.length-1];document.getElementById("MyDLink_description_a").innerHTML=a,document.getElementById("show_loadingImage").style.display="none",$("#btn_next, #btn_back").attr("class","styled-button_enable").prop("disabled",!1),wizardStepStack.pop()}})}},SetXML:function(){var s=this;$("#createPop_Manual, #dialogBox_Background").hide();var e=I18N("j","Please wait");PopView.show(e),stopTimeout(),s.finishWizard=!0;var t=new SOAPAction,a=new SOAPSetDeviceSettings;a.DeviceName=s.getDeviceSettingsResponse.DeviceName,a.AdminPassword=document.getElementById("device_password").value,a.ChangePassword=!0,a.CAPTCHA=!1,a.PresentationURL=s.getDeviceSettingsResponse.PresentationURL,currentDevice.featureNewTime&&(a.TZLocation=$("#timeZone_Search").val()),t.SetMultipleSOAP("SetDeviceSettings",a,null),localStorage.setItem("RunningWizard","false"),t.SetMultipleSOAP("SetWanSettings",s.setWanSettings,null);var n=s.getWiFiData(24);setWLanRadioSettings_24g.Mode=n.settings.Mode,setWLanRadioSettings_24g.SSIDBroadcast=n.settings.SSIDBroadcast,setWLanRadioSettings_24g.SecondaryChannel=n.settings.SecondaryChannel,setWLanRadioSettings_24g.QoS=n.settings.QoS,setWLanRadioSettings_24g.ScheduleName=n.settings.ScheduleName,setWLanRadioSettings_24g.TXPower=n.settings.TXPower,setWLanRadioSettings_24g.Coexistence=n.settings.Coexistence,setWLanRadioSettings_24g.MUMIMOEnabled=n.settings.MUMIMOEnabled,setWLanRadioSettings_24g.BandSteeringEnabled=!0,setWLanRadioSettings_24g.AirTimeFairnessEnabled=n.settings.AirTimeFairnessEnabled,t.SetMultipleSOAP("SetWLanRadioSettings",setWLanRadioSettings_24g,null),t.SetMultipleSOAP("SetWLanRadioSecurity",setWLanRadioSecurity_24g,null);var i=s.getWiFiData(5);if(setWLanRadioSettings_5g.Mode=i.settings.Mode,setWLanRadioSettings_5g.SSIDBroadcast=i.settings.SSIDBroadcast,setWLanRadioSettings_5g.SecondaryChannel=i.settings.SecondaryChannel,setWLanRadioSettings_5g.QoS=i.settings.QoS,setWLanRadioSettings_5g.ScheduleName=n.settings.ScheduleName,setWLanRadioSettings_5g.TXPower=i.settings.TXPower,setWLanRadioSettings_5g.Coexistence=i.settings.Coexistence,setWLanRadioSettings_5g.MUMIMOEnabled=i.settings.MUMIMOEnabled,setWLanRadioSettings_5g.BandSteeringEnabled=!0,setWLanRadioSettings_5g.AirTimeFairnessEnabled=i.settings.AirTimeFairnessEnabled,setWLanRadioSettings_5g.Channel=s.checkChannelSupport(5),setWLanRadioSettings_5g.ChannelWidth=currentDevice.featureWizardHNAPChannelWidth,t.SetMultipleSOAP("SetWLanRadioSettings",setWLanRadioSettings_5g,null),t.SetMultipleSOAP("SetWLanRadioSecurity",setWLanRadioSecurity_5g,null),currentDevice.feature2nd5GHz){var r=s.getWiFiData(52);setWLanRadioSettings_5g2.Mode=r.settings.Mode,setWLanRadioSettings_5g2.SSIDBroadcast=r.settings.SSIDBroadcast,setWLanRadioSettings_5g2.SecondaryChannel=r.settings.SecondaryChannel,setWLanRadioSettings_5g2.QoS=r.settings.QoS,setWLanRadioSettings_5g2.ScheduleName=n.settings.ScheduleName,setWLanRadioSettings_5g2.TXPower=r.settings.TXPower,setWLanRadioSettings_5g2.Coexistence=r.settings.Coexistence,setWLanRadioSettings_5g2.MUMIMOEnabled=r.settings.MUMIMOEnabled,setWLanRadioSettings_5g2.BandSteeringEnabled=!0,setWLanRadioSettings_5g2.AirTimeFairnessEnabled=r.settings.AirTimeFairnessEnabled,setWLanRadioSettings_5g2.Channel=s.checkChannelSupport(52),setWLanRadioSettings_5g2.ChannelWidth=currentDevice.featureWizardHNAPChannelWidth,t.SetMultipleSOAP("SetWLanRadioSettings",setWLanRadioSettings_5g2,null),t.SetMultipleSOAP("SetWLanRadioSecurity",setWLanRadioSecurity_5g2,null)}if(currentDevice.featureSmartConnect){var o=new SOAPSetSmartconnectSettings;o.Enabled=!0,t.SetMultipleSOAP("SetSmartconnectSettings",o,null)}if(currentDevice.featureAutoUpgrade){var d=new SOAPSetFirmwareAutoUpdate,c=new SOAPSetEventNotification;d.AutoDownload=s.automaticUpgradeTick,d.AutoUpdate=s.automaticUpgradeTick,c.Enabled=s.automaticUpgradeTick,c.AutoFirmwareUpgrade=s.automaticUpgradeTick,delete d.TimeToUpdate.TimeHourValue,delete d.TimeToUpdate.TimeMinuteValue,delete d.TimeToUpdate.TimeMidDateValue,t.SetMultipleSOAP("SetEventNotification",c,null),t.SetMultipleSOAP("SetFirmwareAutoUpdate",d,null)}if(!currentDevice.featureNewTime){var l=new SOAPSetTimeSettings_old;switch(((new Date).getTimezoneOffset()/-60).toString()){case"-12":l.TimeZone="1";break;case"-11":l.TimeZone="2";break;case"-10":l.TimeZone="3";break;case"-9":l.TimeZone="4";break;case"-8":l.TimeZone="5";break;case"-7":l.TimeZone="6";break;case"-6":l.TimeZone="9";break;case"-5":l.TimeZone="13";break;case"-4.5":l.TimeZone="15";break;case"-4":l.TimeZone="16";break;case"-3.5":l.TimeZone="19";break;case"-3":l.TimeZone="20";break;case"-2":l.TimeZone="23";break;case"-1":l.TimeZone="24";break;case"0":l.TimeZone="27";break;case"1":l.TimeZone="28";break;case"2":l.TimeZone="33";break;case"3":l.TimeZone="39";break;case"3.5":l.TimeZone="42";break;case"4":l.TimeZone="43";break;case"4.5":l.TimeZone="46";break;case"5":l.TimeZone="47";break;case"5.5":l.TimeZone="48";break;case"5.75":l.TimeZone="50";break;case"6":l.TimeZone="51";break;case"6.5":l.TimeZone="53";break;case"7":l.TimeZone="54";break;case"8":l.TimeZone="60";break;case"9":l.TimeZone="62";break;case"9.5":l.TimeZone="65";break;case"10":l.TimeZone="67";break;case"11":l.TimeZone="72";break;case"12":l.TimeZone="74";break;case"13":l.TimeZone="77";break;default:l.TimeZone="60"}t.SetMultipleSOAP("SetTimeSettings",l,null)}if(1==currentDevice.featureServiceProvider&&1==currentDevice.featureVLANwizard&&1==s.matchVLANProfile&&"Others"!=s.vlanServiceProvider){var u=serviceAndInterface.exportConfigData();delete s.getVLANResponse.GetVLANSettingsResult,s.getVLANResponse.Enabled=!0,s.getVLANResponse.PriorityEnabled=!0,s.getVLANResponse.ISPName=s.vlanServiceProvider;for(var _=0;_<s.getVLANResponse.VLANIDInfoLists.VLANID.length;_++){var w=s.getVLANResponse.VLANIDInfoLists.VLANID[_].Service;"Internet"==w&&(s.getVLANResponse.VLANIDInfoLists.VLANID[_].VID=u.Internet[0],s.getVLANResponse.VLANIDInfoLists.VLANID[_].PID=u.Internet[1]),"IPTV"==w&&(s.getVLANResponse.VLANIDInfoLists.VLANID[_].VID=u.IPTV[0],s.getVLANResponse.VLANIDInfoLists.VLANID[_].PID=u.IPTV[1]),"VOIP"==w&&(s.getVLANResponse.VLANIDInfoLists.VLANID[_].VID=u.VOIP[0],s.getVLANResponse.VLANIDInfoLists.VLANID[_].PID=u.VOIP[1])}for(var p=0;p<s.getVLANResponse.VLANRuleInfoLists.VLANRule.length;p++)s.getVLANResponse.VLANRuleInfoLists.VLANRule[p].ServiceMapping="Internet";for(var g in u["Designated LAN Port"])if(null!=u["Designated LAN Port"][g])for(var m="LAN"+u["Designated LAN Port"][g].toString(),h=0;h<s.getVLANResponse.VLANRuleInfoLists.VLANRule.length;h++)m==s.getVLANResponse.VLANRuleInfoLists.VLANRule[h].Interface&&(s.getVLANResponse.VLANRuleInfoLists.VLANRule[h].ServiceMapping=g);t.SetMultipleSOAP("SetVLANSettings",s.getVLANResponse,null)}t.SendMultipleSOAPAction("SetMultipleActions").done(function(e,t,a){""!=a&&(s.countDownTimer=a);var n=I18N("j","When reconnecting to this device, please use the new Wi-Fi name and password you created."),i=I18N("j","The new settings have been saved.");PopView.showWithCountdown(n,s.countDownTimer).done(function(){var e=s.getDeviceSettingsResponse.BundleName,t=s.modelInfo.modelName,a=!0;e&&e!=t&&(a=!1),currentDevice.featureCovrWIFI&&!a?($("#createPop_Manual, #dialogBox_Background").show(),s.wizard_Step=14,s.wizard_update(),PopView.hide()):PopView.showConfirm(i).done(function(){s.returnToHome()})})}).fail(function(){s.returnToHome()})},wizardTickChange:function(e){changeTimeoutAction(),"on"==e?($("#AutoUpgrade_on").attr("class","clicked"),$("#AutoUpgrade_off").attr("class","unclick"),this.automaticUpgradeTick=!0):($("#AutoUpgrade_on").attr("class","unclick"),$("#AutoUpgrade_off").attr("class","clicked"),this.automaticUpgradeTick=!1)},returnToHome:function(){this.finishWizard?window.location.replace("../info/Login.html"):self.location.href="Home.html"},PopupTermOfUser:function(){startTimeout();$("#wizard_title").html(I18N("j","Terms of Use and Privacy Policy")),$("#wizard_topology, #wizard_settings, #closeCreatePopBtn, #btn_back, #btn_next").hide(),$("#btn_agree").show(),$("#languagetext, #languageselect").css({display:"inline-block"}),$("#Dialog_termNprivacy").load("wizard_TermUI.html #page-content-expand",function(){var e=XMLEncode_forheader(localStorage.language.split("-")[1]),t=tos_LANG[e],a=privacy_LANG[e];for(var n in t)$("#"+n).html(t[n]);for(var n in a)$("#"+n).html(a[n])}).show()},checkChannelSupport:function(e){var t=!1,a=!1,n="";switch(e){case 24:n="RADIO_2.4GHz";break;case 5:n="RADIO_5GHz";break;case 52:n="RADIO_5GHz_2"}for(var i in this.getWLanRadiosResponse.RadioInfos.RadioInfo){var s=this.getWLanRadiosResponse.RadioInfos.RadioInfo[i];if(s.RadioID==n){for(var r in s.Channels){var o=s.Channels[r];"0"==o&&(t=!0),"999"==o&&(a=!0)}break}}return 0==t&&1==a?"999":1==t&&1==a&&1==this.featureWizardDFSDefaultByCountry?"999":"0"}};