/* svn info: $Revision: 1404 $ $Date: 2019-04-23 11:10:34 +0800 (Tue, 23 Apr 2019) $ */
define(["wizPath/wizardModel","wizPath/wizardView"],function(e,i){var a,t,r=null;function n(e){return a=$.Deferred(),1==(t=e).wps?($("#APssid_24").val(t.apcSSID+"-ext"),$("#APkey_24").val(t.apcPWD)):($("#APssid_24").val(t.apSSID),$("#APkey_24").val(t.apPWD)),$("#wizard_title").html(I18N("j","Extended Network")),$("#DUTToClientRight").attr("src","image/wireless_on.gif"),$("#DUTToClientLeft").attr("src","image/wireless_on_180.gif"),$("#Wizard5").show(),0==isTouch()&&$("#APssid_24").focus(),$("#wizButton_back").show().off("click").on("click",function(){a.resolve("back")}),$("#wizButton_next").show().off("click").on("click",function(){$("#Wizard5_form").submit()}),$("#closeWizBtn").off("vclick").on("vclick",function(){a.reject()}),$("#cloneWifiBtn").unbind("click").on("click",function(){if("wizard_tick"==$("#cloneWifiBtn").attr("class")){var e=!1;$("#cloneWifiBtn").removeClass("wizard_tick").addClass("wizard_untick");var i=$("#APssid_24").val()+"-EXT";$("#APssid_24").val(i)}else{e=!0;$("#cloneWifiBtn").removeClass("wizard_untick").addClass("wizard_tick"),$("#APssid_24").val(t.apcSSID),$("#APkey_24").val(t.apcPWD),$("#Wizard5_form").validate().element($("#APssid_24")),$("#Wizard5_form").validate().element($("#APkey_24"))}$("#APssid_24, #APkey_24").attr("disabled",e)}),function(){null!=r&&r.resetForm();$.validator.addMethod("checkASCIIChar",function(e,i){return!!(e.length=0)||CheckASCII(e)},I18N("j","Text field contains illegal characters.")),$.validator.addMethod("checkWPAPassword",function(e,i){if(currentDevice.featureCloseWizExtendedWifi_ea&&0==e.length)return!0;if(0==currentDevice.featureCloseWizExtendedWifi_ea){if(63<e.length||e.length<8)return!1}else if(64<e.length||e.length<8)return!1;return!0},I18N("j","The password must be at least 8 characters long.")),$.validator.addMethod("checkssid",function(e,i){return!(0!=currentDevice.featureCloseWizExtendedWifi_ea&&32<e.length)},I18N("j","The Wi-Fi Network Name can be up to 32 characters long.")),$.validator.addMethod("checkssid31",function(e,i){return!(0==currentDevice.featureCloseWizExtendedWifi_ea&&31<e.length)},I18N("j","The Wi-Fi Network Name can be up to 31 characters long.")),$.validator.addMethod("checkillegalssid",function(e,i){var a=!0;return 0==currentDevice.featureCloseWizExtendedWifi_ea&&(a=COMM_ValidName(e)),a},I18N("j","Invalid %s. Only A-Z, a-z, 0-9, “-”, “_”, and spaces are allowed.",I18N("j","Wi-Fi Name (SSID)"))),$.validator.addMethod("trimpasswordsp",function(e,i){var a=!0;return 0==currentDevice.featureCloseWizExtendedWifi_ea&&e!=e.trim()&&(a=!1),a},""),r=$("#Wizard5_form").validate({rules:{APssid_24:{required:!0,checkssid:!0,checkssid31:!0,checkillegalssid:!0,trimpasswordsp:!0},APkey_24:{checkASCIIChar:!0,checkWPAPassword:!0,trimpasswordsp:!0}},messages:{APssid_24:{required:I18N("j","Please enter a Wi-Fi Name(SSID)."),trimpasswordsp:I18N("j","Text field contains invalid characters (such as blank space at the beginning or the end).")},APkey_24:{trimpasswordsp:I18N("j","Text field contains illegal characters.")}},submitHandler:function(e){return t.apSSID=$("#APssid_24").val(),t.apPWD=$("#APkey_24").val(),a.resolve("pwd"),!1},skipBr:function(e){var i=e.parent("div");return 0!=i.length}})}(),a.promise()}return{init:function(e){return n(e)}}});