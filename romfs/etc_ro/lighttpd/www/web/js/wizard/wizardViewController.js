/* svn info: $Revision: 1399 $ $Date: 2019-04-22 14:31:12 +0800 (Mon, 22 Apr 2019) $ */
require.config({paths:{wizPath:"wizard"},baseUrl:"/js/"}),define(["wizPath/wizardModel","wizPath/wizardView","wizPath/wizStartViewCtrl","wizPath/wizWpsViewCtrl","wizPath/wizSiteSurveyViewCtrl","wizPath/wizEthViewCtrl","wizPath/wizWiFiViewCtrl","wizPath/wizPwdViewCtrl","wizPath/wizSummaryViewCtrl","wizPath/wizAutoUpgradeViewCtrl","wizPath/wizTimeZoneViewCtrl"],function(i,t,c,l,s,w,u,g,f,h,z){var d=new i.WizDeviceInfo,m=[],e=!1;function a(i){i&&$("input").on("tap",function(){$(this).focus()})}function n(){r(),i.setWizardStatus(!0).fail(function(){}),function r(o){!function(){for(var i=1;i<=9;i++)$("#Wizard"+i).hide();$("#wizButton_back").html(I18N("j","Back")),$("#wizButton_next").html(I18N("j","Next")),t.unlockBtn($(".btn-step")),$("#RTToDUTRight").attr("src","image/wireless_off.gif"),$("#RTToDUTLeft").attr("src","image/wireless_off_180.gif"),$("#DUT").attr("src","image/Device_gary.png"),$("#DUTToClientRight").attr("src","image/wireless_off.gif"),$("#DUTToClientLeft").attr("src","image/wireless_off_180.gif")}();o.init(d).progress(function(i){"done"==i&&(e=!0,_())}).then(function(i){var t,e,a=function(i){var t=null;switch(i){case"start":t=c;break;case"wps":t=l;break;case"sitesurvey":t=s;break;case"eth":t=w;break;case"wifi":t=u;break;case"pwd":t=g;break;case"summary":t=f;break;case"autoUpgrade":t=h;break;case"timeZone":t=z}return t}(i);if("back"==i){var n=m.pop();r(n)}else"done"==i?(t=d.LanMacAddress.toUpperCase().split(":"),e="dlinkap"+t[4]+t[5],location.href="http://"+e+".local./"):null!=a&&(m.push(o),r(a))}).fail(function(){p()});t.initView();changeTimeoutAction()}(c),t.initView(),$("#WizardSection, #wizard_background").show(),clearhometimer(),a(!0)}function p(){i.setWizardStatus(!1).always(function(){_()})}function r(){var i=localStorage.getItem("language");$("#Language").selectbox("detach"),$("#Language").val(i),$("#Language").selectbox({width:150}),$("#Language").off("change").on("change",function(i){switch_Language(i.target.value)})}function _(){a(!1),localStorage.removeItem("RunningWizard"),m=[],$("#WizardSection, #wizard_background").hide(),changeTimeoutAction(),e||starthometimer()}return{init:n,initTermUI:function(){t.initView(),r(),$("#Wizard1, #topology, #wizButton_back, #wizButton_next, #closeWizBtn").hide(),$("#WizardSection, #wizard_background, #btn_agree, #language_table").show(),$("#wizard_title").html(I18N("j","Terms of Use and Privacy Policy")),$("#Dialog_termNprivacy").load("../../wizard_TermUI.html #page-content-expand",function(){var i=XMLEncode(localStorage.language.split("-")[1]),t=tos_LANG[i],e=privacy_LANG[i];for(var a in t)$("#"+a).html(t[a]);for(var a in e)$("#"+a).html(e[a])}).show(),$("#btn_agree").on("click",function(){$("#btn_agree, #Dialog_termNprivacy").hide(),$("#closeWizBtn, #topology").show(),n()})},closeWizard:p}});