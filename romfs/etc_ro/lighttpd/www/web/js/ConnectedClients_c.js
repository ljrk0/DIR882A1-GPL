/* svn info: $Revision: 1449 $ $Date: 2019-05-10 21:23:01 +0800 (Fri, 10 May 2019) $ */
function Datalist(){this.list=new Array,this.maxrowid=0;new Data("","","","New","","","","","","")}function Data(e,t,n,i,s,a,r,d,l,o){this.MacAddress=e,this.IPv4Address=t,this.IPv6Address=n,this.Type=i,this.DeviceName=s,this.NickName=a,this.ReserveIP=r,this.State=o,this.Vendor=getVendor(e),this.ScheduleName="Always",this.MacfilterEnabled=!1,this.isAllowList=!1,this.isMacfilterEnabled=!0,this.Status=!1,this.ExtenderMacAddress=d,this.SignalStrength=l,this.Live=!0,this.ExtenderCard=!0}var tmpXML_ScheduleCnt;Datalist.prototype={get length(){return this.list.length},set length(e){0<=parseInt(e,10)&&(this.list.length=parseInt(e,10))},get extenderLength(){var e=0;for(var t in this.list)"WiFi_2.4G_MeshExtender"==this.list[t].Type&&e++;return e},get connectedLength(){var e=0,t=0,n=0;for(var i in this.list)"Blocked"==this.list[i].Type&&e++,"offline"==this.list[i].Type.toLowerCase()&&n++,"WiFi_2.4G_MeshExtender"==this.list[i].Type&&t++;return this.list.length-e-t-n}},Datalist.prototype.prepareUpdate=function(){for(var e in this.list)this.list[e].Live=!1},Datalist.prototype.getData=function(e){var t,n;for(t=0;t<this.list.length&&(n=this.list[t]).rowid!=e;t++);return n},Datalist.prototype.getDataRowNumByMac=function(e){var t,n=null,i=e.toLowerCase();for(t=0;t<this.list.length;t++)if(this.list[t].MacAddress.toLowerCase()==i){n=t;break}return n},Datalist.prototype.getRowNum=function(e){var t=0;for(t=0;t<this.list.length&&e!=this.list[t].rowid;t++);return t},Datalist.prototype.editData=function(e,t){var n=this.list[this.getRowNum(e)];return n.IPv4Address=t.IPv4Address,n.IPv6Address=t.IPv6Address,n.Type=t.Type,n.DeviceName=t.DeviceName,n.NickName=t.NickName,n.ReserveIP=t.ReserveIP,n.Vendor=t.Vendor,n.ScheduleName=t.ScheduleName,n.MacfilterEnabled=t.MacfilterEnabled,n.Status=t.Status,n.isAllowList=t.isAllowList,n.isMacfilterEnabled=t.isMacfilterEnabled,n.ExtenderMacAddress=t.ExtenderMacAddress,n.SignalStrength=t.SignalStrength,n.Live=!0},Datalist.prototype.deleteData=function(e){var t=this.getRowNum(e);this.list.splice(t,1)},Datalist.prototype.push=function(e){return e.setRowid(this.maxrowid),this.list.push(e),this.maxrowid++,this.list.sort(function(e,t){function n(e){return"LAN"==e?0:0<=e.toUpperCase().indexOf("WIFI_")?1:2}return n(e.Type)-n(t.Type)}),!0},Datalist.prototype.clean=function(){for(var e in this.list)obj=this.list[e],0==obj.Live&&this.list.splice(e,1)},Data.prototype={get NickName(){return""==this._NickName?this.DeviceName:this._NickName},set NickName(e){(this._NickName=e)==this.DeviceName&&(this._NickName="")},get ScheduleName(){return this._ScheduleName},set ScheduleName(e){""==e||"always"==e.toLowerCase()?this._ScheduleName="Always":this._ScheduleName=e},setRowid:function(e){this.rowid=e},showExtenderInfo:function(e){var t,n,i=this,s=i.NickName,a="link_IconE_Extender",r="",d={"COVR-C1200":"-32px","COVR-2200":"-64px","COVR-P2500":"-96px"};if(1==e?(t="",n="none",cardBgOne="extenderCardBg1",cardBgTwo="extenderCardBg2"):(t="none",n="",cardBgOne="extenderCardBg1 extenderCardBg1_2",cardBgTwo="extenderCardBg2 extenderCardBg2_2"),void 0===i.MacAddress||0==i.MacAddress.length)return"";""==s&&(s="Unknown");var l=parseInt(i.SignalStrength),o="color:#000";67<l?r="Excellent":l<=67&&33<l?r="Good":l<=33&&0<l?r="Weak":(r="Disconnect",o="color:#f00",a+="_Offline");var c=I18N("j","Remove"),h=I18N("j","Reboot"),u="0px";return null!=d[clearcode(i.DeviceName)]&&(u=d[clearcode(i.DeviceName)]),'<td><div class="extenderLargeCard"><div class="'+cardBgOne+'"></div><div class="'+cardBgTwo+'"></div><div id="extenderInfoCard'+i.rowid+'" class="client_Tag2" style="cursor:default; display:'+t+'"><div class="'+a+'" style="background-position-y:'+u+'"></div><div class="client_Info"><div class="client_EditImage" onclick="editExtenderData('+i.rowid+')" style="cursor:pointer"></div><div class="ExtenderCard_Settings"><div class="ExtenderCard_SettingsIMG" onclick="extenderCardChange(2,'+i.rowid+')" style="cursor:pointer"></div></div><div class="client_Name Extender">'+s+'</div><div class="client_ExtenderQulity">'+I18N("j","Quality")+': <div class="client_signalQulity '+r+'"></div><span style='+o+"> "+I18N("j",r)+'</span></div></div></div><div id="extenderSettingCard'+i.rowid+'" class = "client_Tag2" style="cursor:default; display:'+n+'"><div class="client_EditImage ExtenderReturn" onclick="extenderCardChange(1,'+i.rowid+')"></div><div id="check_btn_Reboot" class="styled_button_s ExtenderReboot" onclick="ExtenderReboot('+i.rowid+')">'+h+'</div><div id="check_btn_Remove" class="styled_button_s ExtenderRemove" onclick="ExtenderRemove('+i.rowid+')">'+c+"</div></div></div></td>"},showClientInfo:function(){var e=this,t=e.NickName,n="link_IconE_",i="client_Name",s=e.IPv4Address,a=e.Vendor;if(void 0===e.MacAddress||0==e.MacAddress.length)return"";""==t&&(t="Unknown");var r=e.Type.toUpperCase();"WIFI_2.4G"==r||"WIFI_2.4G_GUEST"==r?n="link_IconW_":"WIFI_5G"==r||"WIFI_5G_GUEST"==r?n="link_IconW5G_":"OFFLINE"==r&&(n="link_Offline_",i+=" client_Name_Offline",s=e.ReserveIP),e.MacfilterEnabled?I18N("j","Enabled"):I18N("j","Disabled"),"BLOCKED"==e.State?n+="Block":n+="Allow";var d='<td><div class ="client_Tag" style ="cursor:default"><div class ="'+n+'"></div><div class ="client_Info"><div class ="'+i+'">'+HTMLEncode(t)+"</div>";return e.Type.toUpperCase().indexOf("GUEST")<0&&(d+='<div class ="client_EditImage" onclick ="editData('+e.rowid+')" style ="cursor:pointer"></div>'),d+='<div class ="client_Vender" title="'+a+'" style="overflow:hidden;text-overflow:ellipsis;width:100px;white-space:nowrap;">'+a+'</div><div class ="client_IPv4Address">'+s+'</div><div class ="client_IPv6Address" id="IPv6Address_Client_'+e.rowid+'" title="'+e.IPv6Address+'">'+e.IPv6Address+"</div>",d+="</div></div></td>"}};var Client_Type="Host",datalist=new Datalist,macList="",editType=!0,editID="";function LoadMACList(){$.ajax({url:"/js/MacList.json",type:"GET",dataType:"json",success:function(e){macList=e}})}function Base92(e){function t(e){return e+35==92?"!":String.fromCharCode(e+35)}var n=Math.floor(e/92),i=e%92,s="";return s+=92<=n?Base92(n):t(n),s+=t(i)}function getVendor(e){var t,n="Unknown Vendor";if(void 0===macList||""==macList)return n;try{var i=e.split(":"),s=Base92(parseInt(i[0],16)),a=Base92(parseInt(i[1]+i[2],16));void 0===(t=macList[s][a])&&(t=n)}catch(e){t=n}return decode_char_text(t)}function Get_ClientInfo(){var d=$.Deferred(),l=new SOAPGetClientInfoResponse,e=(new SOAPGetMACFilters2Response,(new SOAPAction).sendSOAPAction("GetClientInfo",null,l));return $.when(e,null).done(function(e){for(var t in datalist.prepareUpdate(),datalist.list){"Blocked"!=(e=datalist.list[t]).Type&&"New"!=e.Type||(e.Live=!0)}for(var n in l.ClientInfoLists.ClientInfo){var i=l.ClientInfoLists.ClientInfo[n],s=new Data(i.MacAddress,i.IPv4Address,i.IPv6Address,i.Type,i.DeviceName,decode_char_text(i.NickName),i.ReserveIP,i.ExtenderMacAddress,i.SignalStrength,i.State),a=datalist.getDataRowNumByMac(i.MacAddress);null!=a?datalist.editData(datalist.list[a].rowid,s):datalist.push(s)}datalist.clean(),Remainingnumber=24;for(var r=0;r<datalist.list.length;r++){""!=datalist.list[r].ReserveIP&&Remainingnumber--}Remainingnumber<=0&&(Remainingnumber=0),$(".Remainingtext").find("span").text(Remainingnumber),"clientInfo"==currentState?(datalist.clean(),showClientLists(Client_Type)):getExtenderList(),$("#Total_ConnectedClients").html(datalist.connectedLength),$("#Total_Extenders").html(datalist.extenderLength),null!=getClientInfo_timer&&(clearTimeout(getClientInfo_timer),getClientInfo_timer=setTimeout("Get_ClientInfo()",5e3)),d.resolve()}).fail(function(){null!=getClientInfo_timer&&(clearTimeout(getClientInfo_timer),getClientInfo_timer=setTimeout("Get_ClientInfo()",5e3))}),d.promise()}function getExtenderList(e){var t=0,n='<table class="block" border="0" ondragstart="return false" onselectstart="return false" width="900px"><tbody><tr>';for(var i in datalist.list){var s=datalist.list[i];e&&(s.ExtenderCard=!0),"WiFi_2.4G_MeshExtender"==s.Type&&(t++,n+=s.showExtenderInfo(s.ExtenderCard),t%3==0&&(n+="</tr><tr>"))}n+="</tr></tbody>",$("#Extender_Group").html(n),0<t?($("#Extender_NoDeviceInfo").hide(),$("#Extender_DeviceInfo").show()):($("#Extender_NoDeviceInfo").show(),$("#Extender_DeviceInfo").hide()),$("#Extender_Group").css("display","table-row")}function showClientLists(e){var t=0,n='<table class="block" border="0" ondragstart="return false" onselectstart="return false" width="900px"><tbody><tr>';for(var i in datalist.list){var s=datalist.list[i];if("WiFi_2.4G_MeshExtender"!=s.Type){if("Guest"==e){if(s.Type.toLowerCase().indexOf("guest")<0)continue}else if("Host"==e){if(0<=s.Type.toLowerCase().indexOf("guest"))continue;if("Blocked"==s.Type)continue;if("New"==s.Type)continue}else if("Blocked"==e&&"Blocked"!=s.Type)continue;t++,n+=s.showClientInfo(),t%3==0&&(n+="</tr><tr>")}}n+="</tr></tbody></table>",$("#Client_Group").html(n),0<t?$("#Client_Info").hide():"Blocked"==e||$("#Client_Info").show(),$("#Client_Group").css("display","table-row")}function addData(){clearTimeout(getClientInfo_timer),getClientInfo_timer=null,changeTimeoutAction(),$("#popTitle").html(I18N("j","Add Rule")),$("#check_btn").attr("class","styled_button_dis").prop("disabled",!0),$("#show_Vendor").hide(),$("#client_MACAddress").hide(),$("#show_editMac").show(),$("#show_IPAdr").hide(),"Guest"==Client_Type?$("#show_ReserveIP").hide():$("#show_ReserveIP").show(),$("#show_IPAdrReserve").hide(),$("#enableReserveIP").prop("checked",!1),Remainingnumber<=0?$("#enableReserveIP").attr("disabled",!0):$("#enableReserveIP").attr("disabled",!1),$("#enableAccess").prop("checked",!1),$("#show_Schedule").hide(),$("#editPop").show(),editType=!1,editID=""}function editData(e){clearTimeout(getClientInfo_timer),getClientInfo_timer=null,changeTimeoutAction(),$("#check_btn").attr("class","styled_button_dis").prop("disabled",!0),$("#show_Vendor").show(),$("#client_MACAddress").show(),$("#show_editMac").hide(),$("#show_IPAdr").show();var t=datalist.getData(e),n=t.IPv4Address;document.getElementById("client_IPAdrReserve").value=t.ReserveIP,document.getElementById("client_MACAddress").innerHTML=t.MacAddress,$("#client_Name").val(t.NickName),""==n&&(n=I18N("j","Not Available")),$("#client_IPAdr").html(n),"Guest"==Client_Type?(t.ReserveIP="",$("#show_ReserveIP").hide()):$("#show_ReserveIP").show(),""==t.ReserveIP?(document.getElementById("show_IPAdrReserve").style.display="none",document.getElementById("show_IPAdr").style.display="table-row",$("#enableReserveIP").prop("checked",!1)):(document.getElementById("show_IPAdrReserve").style.display="table-row",document.getElementById("show_IPAdr").style.display="none",$("#enableReserveIP").prop("checked",!0)),Remainingnumber<=0?$("#enableReserveIP").is(":checked")?$("#enableReserveIP").attr("disabled",!1):$("#enableReserveIP").attr("disabled",!0):$("#enableReserveIP").attr("disabled",!1),""!=t.Vendor?document.getElementById("client_Vendor").innerHTML=t.Vendor:document.getElementById("client_Vendor").innerHTML="N/A",t.MacfilterEnabled?($("#schedule").selectbox("detach"),$("#schedule").val(t.ScheduleName),$("#schedule").selectbox("attach"),$("#enableAccess").prop("checked",!0),$("#show_Schedule").show()):($("#schedule").selectbox("detach"),$("#schedule").val("Always"),$("#schedule").selectbox("attach"),$("#enableAccess").prop("checked",!1),$("#show_Schedule").hide()),$("#popTitle").html(I18N("j","Edit Name")),$("#show_ReserveIP").hide(),$("#show_IPAdrReserve").hide(),$("#show_parentalControl").hide(),$("#show_Schedule").hide(),$("#editPop").show(),editType=!0,editID=e}function closeEditPOP(){changeTimeoutAction();var e=$("#enableReserveIP").prop("checked"),t=$("#client_IPAdrReserve").val(),n=$("#client_Name").val(),i=$("#enableAccess").prop("checked"),s=$("#schedule").val();$("#check_btn").attr("class","styled_button_dis").prop("disabled",!0);var a=datalist.getData(editID);a.NickName=n,a.ReserveIP=e&&""!=t?t:"",a.MacfilterEnabled=i,a.isAllowList=datalist.isAllowList,a.ScheduleName=i?s:"",datalist.editData(a.rowid,a);var r=new SOAPAction,d=new SOAPSetClientInfo,l=new SOAPClientInfo;l.MacAddress=a.MacAddress,l.NickName=encode_char_text(a.NickName),l.ReserveIP=a.ReserveIP,d.ClientInfoLists.push(l),r.sendSOAPAction("SetClientInfo",d,null).done(function(e){resetRulePOP("Client")}).fail(function(){resetRulePOP("Client")})}function closeAddPOP(){changeTimeoutAction();var e=$("#enableReserveIP").prop("checked"),t=$("#client_IPAdrReserve").val(),n=$("#client_Name").val(),i=$("#enableAccess").prop("checked"),s=$("#schedule").val(),a=$("#client_editMac").val();$("#check_btn").attr("class","styled_button_dis").prop("disabled",!0);var r=new SOAPAction,d=null,l=null;if(e){var o=new SOAPSetClientInfo;(u=new SOAPClientInfo).MacAddress=a,u.NickName=encode_char_text(n),u.ReserveIP=t,o.ClientInfoLists.push(u),(d=r.sendSOAPAction("SetClientInfo",o,null)).done(function(e){"ERROR_RESERVEIP_CONFLICT"==e.SetClientInfoResult&&(alert(I18N("j","IP address cannot be the same.")),$("#check_btn").attr("class","styled_button_s").prop("disabled",!1))})}if(i){var c=new SOAPSetMACFilters2;for(var h in c.IsAllowList=datalist.isAllowList,datalist.list){var u;if(datalist.list[h].MacfilterEnabled&&"New"!=datalist.list[h].Type)(u=new SOAPMacInfo).DeviceName=datalist.list[h].DeviceName,u.MacAddress=datalist.list[h].MacAddress,u.ScheduleName=encode_char_text(datalist.list[h].ScheduleName),c.MACList.push(u)}var v=new SOAPMacInfo;v.DeviceName=encode_char_text(n),v.MacAddress=a,v.ScheduleName=encode_char_text(s),c.MACList.push(v),l=r.sendSOAPAction("SetMACFilters2",c,null)}$.when(d,l).always(function(e){resetRulePOP("Client")})}function editExtenderData(e){clearTimeout(getClientInfo_timer),getClientInfo_timer=null,changeTimeoutAction();var t=datalist.getData(e);$("#check_btn_Extender").attr("class","styled_button_dis").prop("disabled",!0),$("#Extender_Name").val(t.NickName),$("#Extender_MACAddress").html(t.MacAddress),$("#editExtenderPop").show(),editID=e}function clearExtenderRulePOP(){changeTimeoutAction(),resetRulePOP("Extender")}function saveEditExtenderPOP(){changeTimeoutAction();I18N("j","Your changes are being saved, please wait..."),I18N("j","The new settings have been saved.");$("#check_btn_Extender").attr("class","styled_button_dis").prop("disabled",!0);var e=$("#Extender_Name").val(),t=datalist.getData(editID);t.NickName=e;var n=new SOAPAction,i=new SOAPSetClientInfo,s=new SOAPClientInfo;s.MacAddress=t.MacAddress,s.NickName=encode_char_text(t.NickName),s.ReserveIP=t.ReserveIP,i.ClientInfoLists.push(s),n.sendSOAPAction("SetClientInfo",i,null).done(function(e){resetRulePOP("Extender")})}function ExtenderRemove(e){clearTimeout(getClientInfo_timer),getClientInfo_timer=null;var t=new SOAPAction2,n=datalist.getData(e),i=[];i.push(n.MacAddress);var s=I18N("j","Are you sure you want to reset the device to its factory default settings? This will cause current settings to be lost.");PopView.showDialog(s,!0).done(function(){extenderCardChange(1,e),t.sendSOAPAction("SetFactoryDefault",null,null,i).done(function(){"OK"!=obj.SetFactoryDefaultResult&&"REBOOT"!=obj.SetFactoryDefaultResult&&"RESTART"!=obj.SetFactoryDefaultResult||resetRulePOP("Extender")}),PopView.hide()}).fail(function(){PopView.hide()})}function ExtenderReboot(e){clearTimeout(getClientInfo_timer),getClientInfo_timer=null;var t=new SOAPAction2,n=datalist.getData(e),i=[];i.push(n.MacAddress);var s=I18N("j","Are you sure you want to restart the device?");PopView.showDialog(s,!0).done(function(){extenderCardChange(1,e),t.sendSOAPAction("Reboot",null,null,i).done(function(e){"OK"!=e.RebootResult&&"REBOOT"!=e.RebootResult&&"RESTART"!=e.RebootResult||resetRulePOP("Extender")}),PopView.hide()}).fail(function(){PopView.hide()})}function closeCreatePopMessage(){changeTimeoutAction(),$("#CreatePopAlertMessage").hide(),$("#REBOOTCheck").hide(),$("#REBOOT").hide(),$("#SuccessREBOOT").hide(),$("#FACTORYDEFAULTCheck").hide(),$("#FACTORYDEFAULT").hide(),$("SuccessFACTORYDEFAULT").hide()}function extenderCardChange(e,t){changeTimeoutAction(),clearTimeout(getClientInfo_timer),getClientInfo_timer=null;var n="#extenderInfoCard"+t,i="#extenderSettingCard"+t,s=datalist.getData(t);1==e?($(n).closest(".extenderLargeCard").find(".extenderCardBg1").addClass("extenderCardTransition").removeClass("extenderCardBg1_2"),$(i).closest(".extenderLargeCard").find(".extenderCardBg2").addClass("extenderCardTransition").removeClass("extenderCardBg2_2"),$(n).delay(500).fadeIn(100),$(i).hide(),s.ExtenderCard=!0):($(n).hide(),$(i).delay(500).fadeIn(100),$(n).closest(".extenderLargeCard").find(".extenderCardBg1").addClass("extenderCardTransition").addClass("extenderCardBg1_2"),$(i).closest(".extenderLargeCard").find(".extenderCardBg2").addClass("extenderCardTransition").addClass("extenderCardBg2_2"),s.ExtenderCard=!1),setTimeout(function(){null==getClientInfo_timer&&(getClientInfo_timer=setTimeout("Get_ClientInfo()",5e3))},1e3)}function popDiagnosticsMSG(){PopView.showWarningMSG("title","content").done(function(){PopView.hide()})}function clearCreateRulePOP(){changeTimeoutAction(),resetRulePOP("Client")}function resetRulePOP(e){Get_ClientInfo().always(function(){"Client"==e?($("#editPop").hide(),$("input").val(""),$("#editMac_Info").hide(),$("select").selectbox("detach"),$("#schedule").val("Always"),$("select").selectbox("attach"),$("#client_IPAdrReserve_warning").remove(),$("#client_form").validate().resetForm(),$("#client_form input").removeClass("error")):($("input").val(""),$("#editExtenderPop").hide())}),null==getClientInfo_timer&&(getClientInfo_timer=setTimeout("Get_ClientInfo()",5e3))}function getClientList(e){"Host"==e?($("#client_btn_Blocked").attr("class","v4v6_linkstyle_2"),$("#client_btn_Guest").attr("class","v4v6_linkstyle_2"),$("#client_btn_Host").attr("class","v4v6_linkstyle_1"),$(".client_add_Tag").show()):"Guest"==e?($("#client_btn_Blocked").attr("class","v4v6_linkstyle_2"),$("#client_btn_Guest").attr("class","v4v6_linkstyle_1"),$("#client_btn_Host").attr("class","v4v6_linkstyle_2"),$(".client_add_Tag").hide()):($("#client_btn_Blocked").attr("class","v4v6_linkstyle_1"),$("#client_btn_Guest").attr("class","v4v6_linkstyle_2"),$("#client_btn_Host").attr("class","v4v6_linkstyle_2")),Client_Type=e,Get_ClientInfo()}function buttonStyleChange(){var e=!0;changeTimeoutAction(),1==editType||(""==$("#client_editMac").val()&&(e=!1),0==$("#enableReserveIP").prop("checked")&&0==$("#enableAccess").prop("checked")&&(e=!1)),1==$("#enableReserveIP").prop("checked")&&""==$("#client_IPAdrReserve").val()&&(e=!1),e?$("#check_btn").attr("class","styled_button_s").prop("disabled",!1):$("#check_btn").attr("class","styled_button_dis").prop("disabled",!0)}function setEvents(){$("#enableReserveIP").on("change",function(e){buttonStyleChange(),$(this).prop("checked")?$("#show_IPAdrReserve").show():$("#show_IPAdrReserve").hide()}),$("#enableAccess").on("change",function(e){buttonStyleChange(),$(this).prop("checked")?$("#show_Schedule").show():$("#show_Schedule").hide()})}function setClientValidate(){$.validator.addMethod("checkIP",function(e,t){return""==e||!(!COMM_ValidV4Format(e)||!COMM_ValidV4Addr(e))},jQuery.validator.messages.address_Check),$.validator.addMethod("checkMac",function(e,t){return 0!=COMM_IsMAC(e)},jQuery.validator.messages.mac_Check),$.validator.addMethod("checkMacConflict",function(e,t){for(var n in datalist.list){var i=datalist.list[n];if(e=e.replace(/-/g,":"),i.MacAddress.toLowerCase()==e.toLowerCase())return!1}return!0},jQuery.validator.messages.mac_Conflict),$.validator.addMethod("checkIPConflict",function(e,t){for(var n in datalist.list){var i=datalist.list[n];if((1!=editType||editID!=i.rowid)&&(""!=e&&i.ReserveIP==e))return!1}return!0},jQuery.validator.messages.ip_Conflict),$.validator.addMethod("checkDHCPServerEnabled",function(e,t){var n=!0;return"false"==getRouterLanSettingsResponse.DHCPServerEnabled&&(n=!1),n},I18N("j","Please Enable DHCP Server first.")),$.validator.addMethod("checkDHCPrange",function(e,t){var n=!0,i=e.split("."),s=getNetworkSettings.IPAddress.split("."),a=getRouterLanSettingsResponse.DHCPServerEnabled,r=parseInt(getNetworkSettings.IPRangeStart,10),d=parseInt(getNetworkSettings.IPRangeEnd,10);return"true"==a&&(i[0]!=s[0]||i[1]!=s[1]||i[2]!=s[2]?n=!1:(parseInt(i[3],10)<r||parseInt(i[3],10)>d)&&(n=!1)),n},I18N("j","Reserved IP address should be within the configured DHCP range.")),$.validator.addMethod("checklanip",function(e,t){return""==getRouterLanSettingsResponse.RouterIPAddress||e!=getRouterLanSettingsResponse.RouterIPAddress},I18N("j","err_address_Check")),$.validator.addMethod("trimWhiteSpace",function(e,t){var n=!0;return e!=e.trim()&&(n=!1),n},I18N("j","Invalid %s. Only A-Z, a-z, 0-9, “-”, “_”, and spaces are allowed.",I18N("j","Name"))),$.validator.addMethod("checkGenName",function(e,t){var n=!0;return""!=e&&(n=COMM_ValidName(e)),n},I18N("j","Invalid %s. Only A-Z, a-z, 0-9, “-”, “_”, and spaces are allowed.",I18N("j","Name"))),$("#client_form").validate({rules:{client_Name:{trimWhiteSpace:!0,checkGenName:!0},client_editMac:{},client_IPAdrReserve:{}},submitHandler:function(e){1==editType?closeEditPOP():closeAddPOP()},unhighlight:function(e,t,n){if($(e).removeClass(t).addClass(n),e==$("input#client_IPAdrReserve")[0]&&1==editType){$("#client_IPAdrReserve_warning").remove();var i=datalist.getData(editID);e.value&&e.value!=i.ReserveIP&&($(e).after("<div id='client_IPAdrReserve_warning' style='color:#00f;fone-size:12px' />"),$("#client_IPAdrReserve_warning").html(I18N("j","It will take effect after reconnecting")))}},highlight:function(e,t,n){$(e).addClass(t).removeClass(n),e==$("input#client_IPAdrReserve")[0]&&$("#client_IPAdrReserve_warning").remove()},errorPlacement:function(e,t){e.insertAfter(t).css("display","inline")}}),$("#extender_form").validate({rules:{Extender_Name:{trimWhiteSpace:!0,checkGenName:!0}},submitHandler:function(e){saveEditExtenderPOP()}})}